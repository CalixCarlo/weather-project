/*! For license information please see prebid-e.cb8eb251293b0ee801aa.js.LICENSE.txt */
!function(){var e={1432:function(e){o.SYNC=1,o.ASYNC=2,o.QUEUE=4;var t=Object.freeze({useProxy:!0,ready:0}),n=new WeakMap,r="2,1,0"===[1].reduce((function(e,t,n){return[e,t,n]}),2).toString()?Array.prototype.reduce:function(e,t){var n,r=Object(this),i=r.length>>>0,a=0;if(t)n=t;else{for(;a<i&&!(a in r);)a++;n=r[a++]}for(;a<i;)a in r&&(n=e(n,r[a],a,r)),a++;return n};function i(e,t){return Array.prototype.slice.call(e,t)}var a=Object.assign||function(e){return r.call(i(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),e)};function o(e){var s,d={},c=[];function u(e,t){return"function"==typeof e?g.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?g.apply(null,arguments):"object"==typeof e?l.apply(null,arguments):void 0}function l(e,t,n){var r=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),r=!1);var i={},a=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==a.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var r=t.split(":"),a=r[0],o=r[1]||"sync";if(!i[a]){var s=e[a];i[a]=e[a]=g(o,s,n?[n,a]:void 0)}})),e=Object.getPrototypeOf(e)}while(r&&e);return i}function f(e){var t=Array.isArray(e)?e:e.split(".");return r.call(t,(function(n,r,i){var a=n[r],o=!1;return a||(i===t.length-1?(s||c.push((function(){o||console.warn("fun-hooks: referenced '"+e+"' but it was never created")})),n[r]=p((function(e){n[r]=e,o=!0}))):n[r]={})}),d)}function p(e){var t=[],r=[],i=function(){},o={before:function(e,n){return d.call(this,t,"before",e,n)},after:function(e,t){return d.call(this,r,"after",e,t)},getHooks:function(e){var n=t.concat(r);"object"==typeof e&&(n=n.filter((function(t){return Object.keys(e).every((function(n){return t[n]===e[n]}))})));try{a(n,{remove:function(){return n.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return n},removeAll:function(){return this.getHooks().remove()}},s={install:function(n,a,o){this.type=n,i=o,o(t,r),e&&e(a)}};return n.set(o.after,s),o;function d(e,n,a,o){var s={hook:a,type:n,priority:o||10,remove:function(){var n=e.indexOf(s);-1!==n&&(e.splice(n,1),i(t,r))}};return e.push(s),e.sort((function(e,t){return t.priority-e.priority})),i(t,r),this}}function g(t,r,d){var u=r.after&&n.get(r.after);if(u){if(u.type!==t)throw"fun-hooks: recreated hookable with different type";return r}var l,g,m=d?f(d):p(),v={get:function(e,t){return m[t]||Reflect.get.apply(Reflect,arguments)}};return s||c.push(h),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?g=new Proxy(r,v):(g=function(){return v.apply?v.apply(r,this,i(arguments)):r.apply(this,arguments)},a(g,m)),n.get(g.after).install(t,g,(function(e,n){var r,a=[];function o(e){a.push(e.hook)}e.length||n.length?(e.forEach(o),r=a.push(void 0)-1,n.forEach(o),l=function(e,n,o){var s,d=0,c="async"===t&&"function"==typeof o[o.length-1]&&o.pop();function u(e){"sync"===t?s=e:c&&c.apply(null,arguments)}function l(e){if(a[d]){var r=i(arguments);return l.bail=u,r.unshift(l),a[d++].apply(n,r)}"sync"===t?s=e:c&&c.apply(null,arguments)}return a[r]=function(){var r=i(arguments,1);"async"===t&&c&&(delete l.bail,r.push(l));var a=e.apply(n,r);"sync"===t&&l(a)},l.apply(null,o),s}):l=void 0,h()})),g;function h(){!s&&("sync"!==t||e.ready&o.SYNC)&&("async"!==t||e.ready&o.ASYNC)?"sync"!==t&&e.ready&o.QUEUE?v.apply=function(){var e=arguments;c.push((function(){g.apply(e[1],e[2])}))}:v.apply=function(){throw"fun-hooks: hooked function not ready"}:v.apply=l}}return(e=a({},t,e)).ready?u.ready=function(){s=!0,function(e){for(var t;t=e.shift();)t()}(c)}:s=!0,u.get=f,u}e.exports=o},7079:function(e){e.exports=function e(t){var n=Array.isArray(t)?[]:{};for(var r in t){var i=t[r];n[r]=i&&"object"==typeof i?e(i):i}return n}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){s=!0,i=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return window.pbjs}function o(n){return function(t){if(Array.isArray(t))return e(t)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||t(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t,n){return e&&e.includes(t,n)||!1}function c(e,t,n){return e&&e.find(t,n)}window.pbjs=window.pbjs||{},window.pbjs.cmd=window.pbjs.cmd||[],window.pbjs.que=window.pbjs.que||[],window._pbjsGlobals=window._pbjsGlobals||[],window._pbjsGlobals.push("pbjs");var u={buckets:[{max:5,increment:.5}]},l={buckets:[{max:20,increment:.1}]},f={buckets:[{max:20,increment:.01}]},p={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},g={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=parseFloat(e);return isNaN(r)&&(r=""),{low:""===r?"":v(e,u,n),med:""===r?"":v(e,l,n),high:""===r?"":v(e,f,n),auto:""===r?"":v(e,g,n),dense:""===r?"":v(e,p,n),custom:""===r?"":v(e,t,n)}}function v(e,t,n){var r="";if(!h(t))return r;var i=t.buckets.reduce((function(e,t){return e.max>t.max?e:t}),{max:0}),a=0,o=c(t.buckets,(function(t){if(e>i.max*n){var o=t.precision;void 0===o&&(o=2),r=(t.max*n).toFixed(o)}else{if(e<=t.max*n&&e>=a*n)return t.min=a,t;a=t.max}}));return o&&(r=b(e,o,n)),r}function h(e){if(Re(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach((function(e){e.max&&e.increment||(t=!1)})),t}function b(e,t,n){var r=void 0!==t.precision?t.precision:2,i=t.increment*n,a=t.min*n,o=Math.floor,s=k.getConfig("cpmRoundingFunction");"function"==typeof s&&(o=s);var d,c,u=Math.pow(10,r+2),l=(e*u-a*u)/(i*u);try{d=o(l)*i+a}catch(e){c=!0}return(c||"number"!=typeof d)&&(we("Invalid rounding function passed in config"),d=Math.floor(l)*i+a),(d=Number(d.toFixed(10))).toFixed(r)}function y(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}var w=JSON.parse('{"k2":{"xn":"adserverTargeting","zF":"standard"},"f":"pbjs_debug","Q_":{"Q":1,"H":2},"FP":{"AUCTION_INIT":"auctionInit","AUCTION_END":"auctionEnd","BID_ADJUSTMENT":"bidAdjustment","BID_TIMEOUT":"bidTimeout","BID_REQUESTED":"bidRequested","BID_RESPONSE":"bidResponse","BID_REJECTED":"bidRejected","NO_BID":"noBid","BID_WON":"bidWon","BIDDER_DONE":"bidderDone","BIDDER_ERROR":"bidderError","SET_TARGETING":"setTargeting","BEFORE_REQUEST_BIDS":"beforeRequestBids","BEFORE_BIDDER_HTTP":"beforeBidderHttp","REQUEST_BIDS":"requestBids","ADD_AD_UNITS":"addAdUnits","AD_RENDER_FAILED":"adRenderFailed","AD_RENDER_SUCCEEDED":"adRenderSucceeded","TCF2_ENFORCEMENT":"tcf2Enforcement","AUCTION_DEBUG":"auctionDebug","BID_VIEWABLE":"bidViewable","STALE_RENDER":"staleRender","BILLABLE_EVENT":"billableEvent"},"q_":{"PREVENT_WRITING_ON_MAIN_DOCUMENT":"preventWritingOnMainDocument","NO_AD":"noAd","EXCEPTION":"exception","CANNOT_FIND_AD":"cannotFindAd","MISSING_DOC_OR_ADID":"missingDocOrAdid"},"aI":{"bidWon":"adUnitCode"},"Ql":{"yE":"low","M2":"medium","lj":"high","B7":"auto","uN":"dense","qN":"custom"},"TD":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","SOURCE":"hb_source","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_ID":"hb_cache_id","CACHE_HOST":"hb_cache_host","ADOMAIN":"hb_adomain","ACAT":"hb_acat"},"kF":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_HOST":"hb_cache_host"},"FY":{"title":"hb_native_title","body":"hb_native_body","body2":"hb_native_body2","privacyLink":"hb_native_privacy","privacyIcon":"hb_native_privicon","sponsoredBy":"hb_native_brand","image":"hb_native_image","icon":"hb_native_icon","clickUrl":"hb_native_linkurl","displayUrl":"hb_native_displayurl","cta":"hb_native_cta","rating":"hb_native_rating","address":"hb_native_address","downloads":"hb_native_downloads","likes":"hb_native_likes","phone":"hb_native_phone","price":"hb_native_price","salePrice":"hb_native_saleprice","rendererUrl":"hb_renderer_url","adTemplate":"hb_adTemplate"},"os":{"YZ":"s2s"},"UE":{"CK":"targetingSet","fe":"rendered","G9":"bidRejected"},"Gw":{"UI":"Bid has missing or invalid properties","Gp":"Invalid request ID","Dg":"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes"},"V1":{"body":"desc","body2":"desc2","sponsoredBy":"sponsored","cta":"ctatext","rating":"rating","address":"address","downloads":"downloads","likes":"likes","phone":"phone","price":"price","salePrice":"saleprice","displayUrl":"displayurl"},"s$":{"sponsored":1,"desc":2,"rating":3,"likes":4,"downloads":5,"price":6,"saleprice":7,"phone":8,"address":9,"desc2":10,"displayurl":11,"ctatext":12},"oF":{"ICON":1,"MAIN":3},"zA":["privacyLink","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"]}');function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var x="TRUE"===Ee(w.f).toUpperCase(),C="random",O={random:!0,fixed:!0},T={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},E="*",k=function(){var e,t,n,a=[],o=null;function u(){e={};var r={_debug:x,get debug(){return this._debug},set debug(e){this._debug=e},_bidderTimeout:3e3,get bidderTimeout(){return this._bidderTimeout},set bidderTimeout(e){this._bidderTimeout=e},_publisherDomain:null,get publisherDomain(){return this._publisherDomain},set publisherDomain(e){we("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),this._publisherDomain=e},_priceGranularity:T.MEDIUM,set priceGranularity(e){a(e)&&("string"==typeof e?this._priceGranularity=i(e)?e:T.MEDIUM:Pe(e)&&(this._customPriceBucket=e,this._priceGranularity=T.CUSTOM,be("Using custom price granularity")))},get priceGranularity(){return this._priceGranularity},_customPriceBucket:{},get customPriceBucket(){return this._customPriceBucket},_mediaTypePriceGranularity:{},get mediaTypePriceGranularity(){return this._mediaTypePriceGranularity},set mediaTypePriceGranularity(e){var t=this;this._mediaTypePriceGranularity=Object.keys(e).reduce((function(n,r){return a(e[r])?"string"==typeof e?n[r]=i(e[r])?e[r]:t._priceGranularity:Pe(e)&&(n[r]=e[r],be("Using custom price granularity for ".concat(r))):we("Invalid price granularity for media type: ".concat(r)),n}),{})},_sendAllBids:!0,get enableSendAllBids(){return this._sendAllBids},set enableSendAllBids(e){this._sendAllBids=e},_useBidCache:!1,get useBidCache(){return this._useBidCache},set useBidCache(e){this._useBidCache=e},_deviceAccess:!0,get deviceAccess(){return this._deviceAccess},set deviceAccess(e){this._deviceAccess=e},_bidderSequence:"random",get bidderSequence(){return this._bidderSequence},set bidderSequence(e){O[e]?this._bidderSequence=e:we("Invalid order: ".concat(e,". Bidder Sequence was not set."))},_timeoutBuffer:400,get timeoutBuffer(){return this._timeoutBuffer},set timeoutBuffer(e){this._timeoutBuffer=e},_disableAjaxTimeout:!1,get disableAjaxTimeout(){return this._disableAjaxTimeout},set disableAjaxTimeout(e){this._disableAjaxTimeout=e},_maxNestedIframes:10,get maxNestedIframes(){return this._maxNestedIframes},set maxNestedIframes(e){this._maxNestedIframes=e},_auctionOptions:{},get auctionOptions(){return this._auctionOptions},set auctionOptions(e){(function(e){if(!Pe(e))return we("Auction Options must be an object"),!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("secondaryBidders"!==r&&"suppressStaleRender"!==r)return we("Auction Options given an incorrect param: ".concat(r)),!1;if("secondaryBidders"===r){if(!Ae(e[r]))return we("Auction Options ".concat(r," must be of type Array")),!1;if(!e[r].every(Se))return we("Auction Options ".concat(r," must be only string")),!1}else if("suppressStaleRender"===r&&!Ue(e[r]))return we("Auction Options ".concat(r," must be of type boolean")),!1}return!0})(e)&&(this._auctionOptions=e)}};function i(e){return c(Object.keys(T),(function(t){return e===T[t]}))}function a(e){if(!e)return Ie("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)i(e)||we("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if(Pe(e)&&!h(e))return Ie("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}t&&S(Object.keys(t).reduce((function(e,n){return t[n]!==r[n]&&(e[n]=r[n]||{}),e}),{})),t=r,n={}}function l(){if(o&&n&&Pe(n[o])){var e=n[o];return function(){return Array.from.apply(Array,arguments)}(new Set(Object.keys(t).concat(Object.keys(e)))).reduce((function(n,r){return void 0===e[r]?n[r]=t[r]:void 0===t[r]?n[r]=e[r]:Pe(e[r])?n[r]=St({},t[r],e[r]):n[r]=e[r],n}),{})}return Object.assign({},t)}var f=[l,function(){var e=l();return Object.defineProperty(e,"ortb2",{get:function(){throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var t=arguments.length<=0?void 0:arguments[0];return t?y(e(),t):l()}return _.apply(void 0,arguments)}})),p=r(f,2),g=p[0],m=p[1],v=[m,g].map((function(e){return function(){var t=e.apply(void 0,arguments);return t&&"object"===s(t)&&(t=rt(t)),t}})),b=r(v,2),w=b[0],C=b[1];function k(n){if(Pe(n)){var r=Object.keys(n),i={};r.forEach((function(r){var a=n[r];Pe(e[r])&&Pe(a)&&(a=Object.assign({},e[r],a));try{i[r]=t[r]=a}catch(e){we("Cannot set config for property ".concat(r," : "),e)}})),S(i)}else Ie("setConfig options must be an object")}function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t;if("string"!=typeof e&&(r=e,e=E,n=t||{}),"function"==typeof r){var o={topic:e,callback:r};return a.push(o),n.init&&r(e===E?m():i({},e,m(e))),function(){a.splice(a.indexOf(o),1)}}Ie("listener must be a function")}function S(e){var t=Object.keys(e);a.filter((function(e){return d(t,e.topic)})).forEach((function(t){t.callback(i({},t.topic,e[t.topic]))})),a.filter((function(e){return e.topic===E})).forEach((function(t){return t.callback(e)}))}function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{r(e),e.bidders.forEach((function(r){n[r]||(n[r]={}),Object.keys(e.config).forEach((function(i){var a=e.config[i];if(Pe(a)){var o=t?St:Object.assign;n[r][i]=o({},n[r][i]||{},a)}else n[r][i]=a}))}))}catch(e){Ie(e)}function r(e){if(!Pe(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!Pe(e.config))throw"setBidderConfig bidder options must contain a config object"}}function j(e,t){o=e;try{return t()}finally{P()}}function P(){o=null}return u(),{getCurrentBidder:function(){return o},resetBidder:P,getConfig:m,getAnyConfig:g,readConfig:w,readAnyConfig:C,setConfig:k,mergeConfig:function(e){if(Pe(e)){var t=St(l(),e);return k(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),t}Ie("mergeConfig input must be an object")},setDefaults:function(n){Pe(e)?(Object.assign(e,n),Object.assign(t,n)):Ie("defaults must be an object")},resetConfig:u,runWithBidder:j,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return j(e,oe.call.apply(oe,[t,this].concat(r)))}we("config.callbackWithBidder callback is not a function")}}},setBidderConfig:A,getBidderConfig:function(){return n},mergeBidderConfig:function(e){return A(e,!0)}}}(),_=n(7079),S=n.n(_);function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function B(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=B(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},D.apply(this,arguments)}function q(e,t){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},q(e,t)}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q(e,t)}function z(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function F(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function M(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,F(e,t,"get"))}function L(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,F(e,t,"set"),n),n}function W(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}var Y=new WeakMap,K=new WeakMap,G=new WeakMap,H=function(e){N(a,e);var t,n,i=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=R(t);if(n){var i=R(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return z(this,e)});function a(e){var t;A(this,a);var n=[],r=[];function o(e,t){return function(i){if(!n.length){for(n.push(e,i);r.length;)r.shift()();t(i)}}}return W(U(t=i.call(this,"function"!=typeof e?e:function(t,n){var r,i=o(1,n),a=(r=o(0,t),function(e){return"function"==typeof(null==e?void 0:e.then)?e.then(r,i):r(e)});try{e(a,i)}catch(e){i(e)}})),Y,{writable:!0,value:void 0}),W(U(t),K,{writable:!0,value:void 0}),W(U(t),G,{writable:!0,value:null}),L(U(t),Y,n),L(U(t),K,r),t}return P(a,[{key:"then",value:function(e,t){var n=this;if("function"==typeof t)for(var i=this;i;){D(R(a.prototype),"then",this).call(i,null,(function(){return null}));var o=M(i,G);L(i,G,null),i=o}var s=M(this,Y),d=new a((function(i,a){var o=function(){var n=s[1],o=r(0===s[0]?[e,i]:[t,a],2),d=o[0],c=o[1];if("function"==typeof d){try{n=d(n)}catch(e){return void a(e)}c=i}c(n)};s.length?o():M(n,K).push(o)}));return L(d,G,this),d}}],[{key:"timeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new a((function(t){0===e?t():setTimeout(t,e)}))}}]),a}(a().Promise||Promise);function V(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.promiseFactory,i=void 0===r?function(e){return new H(e)}:r;function a(e){return function(t){return e(t)}}return{promise:i((function(n,r){e=n,t=r})),resolve:a(e),reject:a(t)}}var J,X=Object.prototype.toString,Q=Boolean(window.console),$=Boolean(Q&&window.console.log),Z=Boolean(Q&&window.console.info),ee=Boolean(Q&&window.console.warn),te=Boolean(Q&&window.console.error);function ne(){null!=J&&J.apply(void 0,arguments)}var re,ie={checkCookieSupport:ct,createTrackPixelIframeHtml:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?(t&&(e=encodeURI(e)),n&&(n='sandbox="'.concat(n,'"')),"<iframe ".concat(n,' id="').concat(de(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')):""},getWindowSelf:ve,getWindowTop:me,getWindowLocation:he,insertUserSyncIframe:Ye,insertElement:ze,isFn:_e,triggerPixel:Me,logError:Ie,logWarn:we,logMessage:be,logInfo:ye,parseQS:Ot,formatQS:Tt,deepEqual:_t},ae={},oe=function(e,t){return t}.bind(null,1,ae)()===ae?Function.prototype.bind:function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}},se=(re=0,function(){return++re});function de(){return se()+Math.random().toString(16).substr(2)}function ce(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,ce)}function ue(e,t,n){return n?e+t+"="+encodeURIComponent(n)+"&":e}function le(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t.replace(/&$/,"")}function fe(e){return e&&Object.getOwnPropertyNames(e).length>0?(t=e,Object.keys(t)).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(Je(e,t)))})).join("&"):"";var t}function pe(e){var t,n,r=[];if("string"==typeof e){var i=e.split(","),a=/^(\d)+x(\d)+$/i;if(i)for(var o in i)n=o,((t=i).hasOwnProperty?t.hasOwnProperty(n):void 0!==t[n]&&t.constructor.prototype[n]!==t[n])&&i[o].match(a)&&r.push(i[o])}else if("object"===s(e)){var d=e.length;if(d>0)if(2===d&&"number"==typeof e[0]&&"number"==typeof e[1])r.push(ge(e));else for(var c=0;c<d;c++)r.push(ge(e[c]))}return r}function ge(e){if(function(e){return Ae(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}(e))return e[0]+"x"+e[1]}function me(){return window.top}function ve(){return window.self}function he(){return window.location}function be(){Oe()&&$&&console.log.apply(console,Ce(arguments,"MESSAGE:"))}function ye(){Oe()&&Z&&console.info.apply(console,Ce(arguments,"INFO:"))}function we(){Oe()&&ee&&console.warn.apply(console,Ce(arguments,"WARNING:")),ne(w.FP.AUCTION_DEBUG,{type:"WARNING",arguments:arguments})}function Ie(){Oe()&&te&&console.error.apply(console,Ce(arguments,"ERROR:")),ne(w.FP.AUCTION_DEBUG,{type:"ERROR",arguments:arguments})}function xe(e){function t(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(void 0,[e].concat(r))}}return{logError:t(Ie),logWarn:t(we),logMessage:t(be),logInfo:t(ye)}}function Ce(e,t){e=[].slice.call(e);var n=k.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?"%c".concat(n):"")),e;function r(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function Oe(){return!!k.getConfig("debug")}function Te(){var e=document.createElement("iframe");return e.id=de(),e.height=0,e.width=0,e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.scrolling="no",e.frameBorder="0",e.src="about:blank",e.style.display="none",e}function Ee(e){return Ot(he().search)[e]||""}function ke(e,t){return X.call(e)==="[object "+t+"]"}function _e(e){return ke(e,"Function")}function Se(e){return ke(e,"String")}function Ae(e){return ke(e,"Array")}function je(e){return ke(e,"Number")}function Pe(e){return ke(e,"Object")}function Ue(e){return ke(e,"Boolean")}function Re(e){if(!e)return!0;if(Ae(e)||Se(e))return!(e.length>0);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}function Be(e){return Se(e)&&(!e||0===e.length)}function De(e,t){if(!Re(e)){if(_e(e.forEach))return e.forEach(t,this);var n=0,r=e.length;if(r>0)for(;n<r;n++)t(e[n],n,e);else for(n in e)hasOwnProperty.call(e,n)&&t.call(this,e[n],n)}}function qe(e,t){if(Re(e))return!1;if(_e(e.indexOf))return-1!==e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function Ne(e,t){if(Re(e))return[];if(_e(e.map))return e.map(t);var n=[];return De(e,(function(r,i){n.push(t(r,i,e))})),n}function ze(e,t,n,r){var i;t=t||document,i=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{if((i=i.length?i:t.getElementsByTagName("body")).length){i=i[0];var a=r?null:i.firstChild;return i.insertBefore(e,a)}}catch(e){}}function Fe(e,t){var n=null;return new H((function(r){var i=function t(){e.removeEventListener("load",t),e.removeEventListener("error",t),null!=n&&window.clearTimeout(n),r()};e.addEventListener("load",i),e.addEventListener("error",i),null!=t&&(n=window.setTimeout(i,t))}))}function Me(e,t,n){var r=new Image;t&&ie.isFn(t)&&Fe(r,n).then(t),r.src=e}function Le(e){var t=e.source,n=e.burl;t===w.os.YZ&&n&&ie.triggerPixel(n)}function We(e){if(e){var t=document.createElement("iframe");t.id=de(),t.width=0,t.height=0,t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.display="none",t.style.height="0px",t.style.width="0px",t.scrolling="no",t.frameBorder="0",t.allowtransparency="true",ie.insertElement(t,document,"body"),t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close()}}function Ye(e,t,n){var r=ie.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=r;var a=i.firstChild;t&&ie.isFn(t)&&Fe(a,n).then(t),ie.insertElement(a,document,"html",!0)}function Ke(e,t,n){return null==t?n:Se(t)?t:je(t)?t.toString():void ie.logWarn("Unsuported type for param: "+e+" required type: String")}function Ge(e,t,n){return n.indexOf(e)===t}function He(e,t){return e.concat(t)}function Ve(e,t){var n;if(e)return t.some((function(t){var r=c(t.bids,(function(t){return["bidId","adId","bid_id"].some((function(n){return t[n]===e}))}));return r&&(n=r),r})),n}function Je(e,t){return e[t]}function Xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pbjs.adUnits;return e.map((function(e){return e.bids.map((function(e){return e.bidder})).reduce(He,[])})).reduce(He,[]).filter(Ge)}function Qe(){if(window.googletag&&_e(window.googletag.pubads)&&_e(window.googletag.pubads().getSlots))return!0}var $e=et("timeToRespond",(function(e,t){return e>t})),Ze=et("responseTimestamp",(function(e,t){return e>t}));function et(e,t){return function(n,r){return n.cpm===r.cpm?t(n[e],r[e])?r:n:n.cpm<r.cpm?r:n}}function tt(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t),r=e[--t];e[t]=e[n],e[n]=r}return e}function nt(e,t){return d(e,t&&t.adUnitCode)}function rt(e){return S()(e)}function it(){try{return ie.getWindowSelf()!==ie.getWindowTop()}catch(e){return!0}}function at(e,t){if(e)return e.replace(/\$\{AUCTION_PRICE\}/g,t)}function ot(e,t){if(e&&t&&"string"==typeof t)return e.replace(/\${CLICKTHROUGH}/g,t)}function st(){return(new Date).getTime()}function dt(){return!1!==k.getConfig("deviceAccess")}function ct(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function ut(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function lt(e,t){return t.filter((function(t){return e[t]})).reduce((function(t,n){return Object.assign(t,i({},n,e[n]))}),{})}function ft(e,t,n){return e.filter((function(e){return e.code===t})).map((function(e){return e.bids})).reduce(He,[]).filter((function(e){return e.bidder===n})).map((function(e){return e.params||{}}))}et("responseTimestamp",(function(e,t){return e<t}));var pt=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t};function gt(e){var t=function(e){var t;return Qe()&&(t=c(window.googletag.pubads().getSlots(),function(e){return function(t){return pt(t,e)}}(e))),t}(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}function mt(e,t){var n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(n," ad unit\n    containing bidders that don't support ").concat(n,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")}function vt(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function ht(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")}function bt(e,t){return"object"!==s(e)?{}:t.reduce((function(n,r,i){if("function"==typeof r)return n;var a=r,o=r.match(/^(.+?)\sas\s(.+?)$/i);o&&(r=o[1],a=o[2]);var s=e[r];return"function"==typeof t[i+1]&&(s=t[i+1](s,n)),void 0!==s&&(n[a]=s),n}),{})}function yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",n=[];return De(e,(function(e,r){if(Ae(e)){var i=[];De(e,(function(e){((e=Ke(t+"."+r,e))||""===e)&&i.push(e)})),e=i}else{if(!Se(e=Ke(t+"."+r,e)))return;e=[e]}n.push({key:r,value:e})})),n}function wt(e,t){return Object.keys(e).forEach((function(n){var r,i;t[n]&&(_e(e[n])?t[n]=e[n](t[n]):t[n]=(r=e[n],i=t[n],"string"===r?i&&i.toString():"number"===r?Number(i):i),isNaN(t[n])&&delete t.key)})),t}function It(e,t){return Ae(e)&&(!t||e.length===t)&&e.every((function(e){return vt(e)}))}function xt(e,t){for(var n=[],r=0;r<t;r++){var i=Pe(e)?rt(e):e;n.push(i)}return n}function Ct(e,t){for(var n=[],r=0;r<Math.ceil(e.length/t);r++){var i=r*t,a=i+t;n.push(e.slice(i,a))}return n}function Ot(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var n=r(t.split("="),2),i=n[0],a=n[1];return/\[\]$/.test(i)?(e[i=i.replace("[]","")]=e[i]||[],e[i].push(a)):e[i]=a||"",e}),{}):{}}function Tt(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"[]=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")}function Et(e,t){var n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);var r=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:r?n.search:ie.parseQS(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}function kt(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(ie.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}function _t(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.checkTypes,i=void 0!==r&&r;if(e===t)return!0;if("object"!==s(e)||null===e||"object"!==s(t)||null===t||i&&e.constructor!==t.constructor)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e){if(!t.hasOwnProperty(a))return!1;if(!_t(e[a],t[a],{checkTypes:i}))return!1}return!0}function St(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var a=n.shift();if(Pe(e)&&Pe(a)){var s=function(t){Pe(a[t])?(e[t]||Object.assign(e,i({},t,{})),St(e[t],a[t])):Ae(a[t])?e[t]?Ae(e[t])&&a[t].forEach((function(n){for(var r=1,i=0;i<e[t].length;i++)if(_t(e[t][i],n)){r=0;break}r&&e[t].push(n)})):Object.assign(e,i({},t,o(a[t]))):Object.assign(e,i({},t,a[t]))};for(var d in a)s(d)}return St.apply(void 0,[e].concat(n))}function At(e,t,n){t.split&&(t=t.split("."));for(var r,i,a=0,o=t.length,s=e;a<o&&"__proto__"!==(i=t[a++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=a===o?n:typeof(r=s[i])==typeof t?r:0*t[a]!=0||~(""+t[a]).indexOf(".")?{}:[]}var jt,Pt=Array.prototype.slice,Ut=Array.prototype.push,Rt=Ne(w.FP,(function(e){return e})),Bt=w.aI,Dt=[],qt=function(){var e={},t={};function n(t,n){be("Emitting event for: "+t);var r=n[0]||{},i=r[Bt[t]],a=e[t]||{que:[]},o=Ne(a,(function(e,t){return t})),s=[];Dt.push({eventType:t,args:r,id:i,elapsedTime:window.performance&&window.performance.now&&window.performance.now()||0}),i&&qe(o,i)&&Ut.apply(s,a[i].que),Ut.apply(s,a.que),De(s,(function(e){if(e)try{e.apply(null,n)}catch(e){Ie("Error executing handler:","events.js",e)}}))}return t.on=function(t,n,r){if(function(e){return qe(Rt,e)}(t)){var i=e[t]||{que:[]};r?(i[r]=i[r]||{que:[]},i[r].que.push(n)):i.que.push(n),e[t]=i}else Ie("Wrong event name : "+t+" Valid event names :"+Rt)},t.emit=function(e){var t=Pt.call(arguments,1);n(e,t)},t.off=function(t,n,r){var i=e[t];Re(i)||Re(i.que)&&Re(i[r])||r&&(Re(i[r])||Re(i[r].que))||(r?De(i[r].que,(function(e){var t=i[r].que;e===n&&t.splice(t.indexOf(e),1)})):De(i.que,(function(e){var t=i.que;e===n&&t.splice(t.indexOf(e),1)})),e[t]=i)},t.get=function(){return e},t.addEvents=function(e){Rt=Rt.concat(e)},t.getEvents=function(){var e=[];return De(Dt,(function(t){var n=Object.assign({},t);e.push(n)})),e},t}();jt=qt.emit.bind(qt),J=jt;var Nt=qt.on,zt=qt.off,Ft=(qt.get,qt.getEvents),Mt=qt.emit;qt.addEvents;var Lt=Wt();function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.request,r=t.done;return function(t,i,a){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var d,c=o.method||(a?"POST":"GET"),u=document.createElement("a");u.href=t;var l="object"===s(i)&&null!==i?i:{success:function(){be("xhr success")},error:function(e){Ie("xhr error",null,e)}};if("function"==typeof i&&(l.success=i),(d=new window.XMLHttpRequest).onreadystatechange=function(){if(4===d.readyState){"function"==typeof r&&r(u.origin);var e=d.status;e>=200&&e<300||304===e?l.success(d.responseText,d):l.error(d.statusText,d)}},k.getConfig("disableAjaxTimeout")||(d.ontimeout=function(){Ie("  xhr timeout after ",d.timeout,"ms")}),"GET"===c&&a){var f=Et(t,o);Object.assign(f.search,a),t=kt(f)}d.open(c,t,!0),k.getConfig("disableAjaxTimeout")||(d.timeout=e),o.withCredentials&&(d.withCredentials=!0),De(o.customHeaders,(function(e,t){d.setRequestHeader(t,e)})),o.preflight&&d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.setRequestHeader("Content-Type",o.contentType||"text/plain"),"function"==typeof n&&n(u.origin),"POST"===c&&a?d.send(a):d.send()}catch(e){Ie("xhr construction",e),"object"===s(i)&&null!==i&&i.error(e)}}}function Yt(e,t){var n=t?"<![CDATA[".concat(t,"]]>"):"";return'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(e,"]]></VASTAdTagURI>\n        <Impression>").concat(n,"</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>")}function Kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?ki.index:n,i=e.vastXml?e.vastXml:Yt(e.vastUrl,e.vastImpUrl),a=r.getAuction(e),o=Number(e.ttl)+15,s={type:"xml",value:i,ttlseconds:o};return k.getConfig("cache.vasttrack")&&(s.bidder=e.bidder,s.bidid=e.requestId,s.aid=e.auctionId),null!=a&&(s.timestamp=a.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(s.key=e.customCacheKey),s}var Gt=new WeakMap,Ht=["debugging","adloox","criteo","outstream","adagio","spotx","browsi","brandmetrics","justtag","tncId","akamaidap","ftrackId","inskin","hadron","medianet","improvedigital","aaxBlockmeter","confiant"];function Vt(e,t,n,r,i){if(t&&e){if(d(Ht,t)){r||(r=document);var a=c(r,e);if(a)return n&&"function"==typeof n&&(a.loaded?n():a.callbacks.push(n)),a.tag;var o=Gt.get(r)||{},s={loaded:!1,tag:null,callbacks:[]};return o[e]=s,Gt.set(r,o),n&&"function"==typeof n&&s.callbacks.push(n),we("module ".concat(t," is loading external JavaScript")),function(t,n,r,i){r||(r=document);var a=r.createElement("script");a.type="text/javascript",a.async=!0;var o=c(r,e);return o&&(o.tag=a),a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,n())}:a.onload=function(){n()},a.src=t,i&&function(e,t){for(var n in t)t.hasOwnProperty(n)&&e.setAttribute(n,t[n])}(a,i),ze(a,r),a}(e,(function(){s.loaded=!0;try{for(var e=0;e<s.callbacks.length;e++)s.callbacks[e]()}catch(e){Ie("Error executing callback","adloader.js:loadExternalScript",e)}}),r,i)}Ie("".concat(t," not whitelisted for loading external JavaScript"))}else Ie("cannot load external script without url and moduleCode");function c(e,t){var n=Gt.get(e);return n&&n[t]?n[t]:null}}var Jt="outstream";function Xt(e){var t=this,n=e.url,r=e.config,i=e.id,a=e.callback,o=e.loaded,s=e.adUnitCode,d=e.renderNow;this.url=n,this.config=r,this.handlers={},this.id=i,this.loaded=o,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):Ie("Commands given to Renderer.push must be wrapped in a function")},this.callback=a||function(){t.loaded=!0,t.process()},this.render=function(){var e=this,t=arguments,r=function(){e._render?e._render.apply(e,t):we("No render function was provided, please use .setRender on the renderer")};Zt(s)?(we("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(s)),r()):d?r():(this.cmd.unshift(r),Vt(n,Jt,this.callback,this.documentContext))}.bind(this)}function Qt(e){return!(!e||!e.url)}function $t(e,t,n){var r=null;e.config&&e.config.documentResolver&&(r=e.config.documentResolver(t,document,n)),r||(r=document),e.documentContext=r,e.render(t,e.documentContext)}function Zt(e){var t=c(pbjs.adUnits,(function(t){return t.code===e}));if(!t)return!1;var n=y(t,"renderer"),r=!!(n&&n.url&&n.render),i=y(t,"mediaTypes.video.renderer"),a=!!(i&&i.url&&i.render);return!!(r&&!0!==n.backupOnly||a&&!0!==i.backupOnly)}Xt.install=function(e){return new Xt({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},Xt.prototype.getConfig=function(){return this.config},Xt.prototype.setRender=function(e){this._render=e},Xt.prototype.setEventHandlers=function(e){this.handlers=e},Xt.prototype.handleVideoEvent=function(e){var t=e.id,n=e.eventName;"function"==typeof this.handlers[n]&&this.handlers[n](),be("Prebid Renderer event for id ".concat(t," type ").concat(n))},Xt.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){Ie("Error processing Renderer command: ",e)}};var en,tn=n(1432),nn=n.n(tn),rn=nn()({ready:nn().SYNC|nn().ASYNC|nn().QUEUE}),an=V();rn.ready=(en=rn.ready,function(){try{return en.apply(rn,arguments)}finally{an.resolve()}}),an.promise;var on=rn.get;function sn(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var dn=new WeakSet;function cn(e){return null==e?this.defaultScope:e}var un=new(function(){function e(t,n){var r,i;A(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(r=this,i=dn),i.add(r),this.getSettings=t,this.defaultScope=n}return P(e,[{key:"get",value:function(e,t){var n=this.getOwn(e,t);return void 0===n&&(n=this.getOwn(null,t)),n}},{key:"getOwn",value:function(e,t){return e=sn(this,dn,cn).call(this,e),y(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter((function(t){return t!==e.defaultScope}))}},{key:"settingsFor",value:function(e){return St({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=sn(this,dn,cn).call(this,e),this.getSettings()[e]||{}}}]),e}())((function(){return a().bidderSettings||{}}),w.k2.zF);function ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var i=R(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return z(this,n)}}function fn(e,t,n){pn(e,t),t.set(e,n)}function pn(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gn(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var mn=Object.freeze({}),vn=new WeakMap,hn=new WeakMap,bn=new WeakMap,yn=new WeakMap,wn=new WeakSet,In=function(){function e(){var t;A(this,e),pn(this,t=wn),t.add(this),fn(this,vn,{writable:!0,value:void 0}),fn(this,hn,{writable:!0,value:void 0}),fn(this,bn,{writable:!0,value:void 0}),fn(this,yn,{writable:!0,value:void 0}),i(this,"generatedTime",void 0),this.reset()}return P(e,[{key:"reset",value:function(){L(this,bn,V()),L(this,vn,!1),L(this,hn,null),L(this,yn,!1),this.generatedTime=null}},{key:"enable",value:function(){L(this,vn,!0)}},{key:"enabled",get:function(){return M(this,vn)}},{key:"ready",get:function(){return M(this,yn)}},{key:"promise",get:function(){return M(this,yn)?H.resolve(M(this,hn)):(M(this,vn)||gn(this,wn,xn).call(this,null),M(this,bn).promise)}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st();this.generatedTime=t,gn(this,wn,xn).call(this,e)}},{key:"getConsentData",value:function(){return M(this,hn)}}]),e}();function xn(e){L(this,yn,!0),L(this,hn,e),M(this,bn).resolve(e)}var Cn=function(e){N(n,e);var t=ln(n);function n(){return A(this,n),t.apply(this,arguments)}return P(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&this.generatedTime)return{usp:e,generatedAt:this.generatedTime}}}]),n}(In),On=function(e){N(n,e);var t=ln(n);function n(){return A(this,n),t.apply(this,arguments)}return P(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:Se(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}]),n}(In),Tn=function(e){N(n,e);var t=ln(n);function n(){return A(this,n),t.apply(this,arguments)}return P(n,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}]),n}(In),En=["core","prebid-module"],kn=[];function _n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gvlid,n=e.moduleName,r=e.bidderCode,i=e.moduleType,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=a.bidderSettings,s=void 0===o?un:o;function d(){if(null==r)return!0;var e=s.get(r,"storageAllowed");return null!=e&&e}function c(e){var i;return d()?(Sn(t,r||n,{hasEnforcementHook:!1},(function(t){if(t&&t.hasEnforcementHook)i=e(t);else{var n={hasEnforcementHook:!1,valid:dt()};i=e(n)}})),i):(ye("bidderSettings denied access to device storage for bidder '".concat(r,"'")),e({valid:!1}))}En.includes(i)&&(t=t||mn);var u=function(e,t,n,r,i,a){var o=function(a){if(a&&a.valid){var o=i&&""!==i?" ;domain=".concat(encodeURIComponent(i)):"",s=n&&""!==n?" ;expires=".concat(n):"",d=null!=r&&"none"==r.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(s,"; path=/").concat(o).concat(r?"; SameSite=".concat(r):"").concat(d)}};if(!a||"function"!=typeof a)return c(o);kn.push((function(){var e=c(o);a(e)}))},l=function(e,t){var n=function(t){if(t&&t.valid){var n=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return n?decodeURIComponent(n[2]):null}return null};if(!t||"function"!=typeof t)return c(n);kn.push((function(){var e=c(n);t(e)}))},f=function(e){var t=function(e){if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(e){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(e){}}return!1};if(!e||"function"!=typeof e)return c(t);kn.push((function(){var n=c(t);e(n)}))},p=function(e){var t=function(e){return!(!e||!e.valid)&&ct()};if(!e||"function"!=typeof e)return c(t);kn.push((function(){var n=c(t);e(n)}))},g=function(e,t,n){var r=function(n){n&&n.valid&&h()&&window.localStorage.setItem(e,t)};if(!n||"function"!=typeof n)return c(r);kn.push((function(){var e=c(r);n(e)}))},m=function(e,t){var n=function(t){return t&&t.valid&&h()?window.localStorage.getItem(e):null};if(!t||"function"!=typeof t)return c(n);kn.push((function(){var e=c(n);t(e)}))},v=function(e,t){var n=function(t){t&&t.valid&&h()&&window.localStorage.removeItem(e)};if(!t||"function"!=typeof t)return c(n);kn.push((function(){var e=c(n);t(e)}))},h=function(e){var t=function(e){if(e&&e.valid)try{return!!window.localStorage}catch(e){Ie("Local storage api disabled")}return!1};if(!e||"function"!=typeof e)return c(t);kn.push((function(){var n=c(t);e(n)}))},b=function(e,t){var n=function(t){if(t&&t.valid){var n=[];if(dt())for(var r=document.cookie.split(";");r.length;){var i=r.pop(),a=i.indexOf("=");a=a<0?i.length:a,decodeURIComponent(i.slice(0,a).replace(/^\s+/,"")).indexOf(e)>=0&&n.push(decodeURIComponent(i.slice(a+1)))}return n}};if(!t||"function"!=typeof t)return c(n);kn.push((function(){var e=c(n);t(e)}))};return{setCookie:u,getCookie:l,localStorageIsEnabled:f,cookiesAreEnabled:p,setDataInLocalStorage:g,getDataFromLocalStorage:m,removeDataFromLocalStorage:v,hasLocalStorage:h,findSimilarCookies:b}}var Sn=rn("async",(function(e,t,n,r){r(n)}),"validateStorageEnforcement");function An(e){return _n({moduleName:e,moduleType:"core"})}function jn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gvlid,n=e.moduleName,r=e.bidderCode;if(arguments.length>1||arguments.length>0&&!Pe(arguments[0]))throw new Error("Invalid invocation for getStorageManager");return _n({gvlid:t,moduleName:n,bidderCode:r})}k.setDefaults({userSync:rt({syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0})});var Pn=An("usersync"),Un=function(e){var t={},n={image:[],iframe:[]},i=new Set,a={},o={image:!0,iframe:!1},s=e.config;function c(){if(s.syncEnabled&&e.browserSupportsCookies){try{o.iframe&&u(n.iframe,(function(e){var t=r(e,2),i=t[0],a=t[1];be("Invoking iframe user sync for bidder: ".concat(i)),Ye(a),function(e,t){e.image=e.image.filter((function(e){return e[0]!==t}))}(n,i)})),o.image&&u(n.image,(function(e){var t=r(e,2),n=t[0],i=t[1];be("Invoking image pixel user sync for bidder: ".concat(n)),Me(i)}))}catch(e){return Ie("Error firing user syncs",e)}n={image:[],iframe:[]}}}function u(e,t){tt(e).forEach((function(e){t(e),i.add(e[0])}))}return k.getConfig("userSync",(function(e){if(e.userSync){var t=e.userSync.filterSettings;Pe(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}s=Object.assign(s,e.userSync)})),t.registerSync=function(e,r,o){return i.has(r)?be('already fired syncs for "'.concat(r,'", ignoring registerSync call')):s.syncEnabled&&Ae(n[e])?r?0!==s.syncsPerBidder&&Number(a[r])>=s.syncsPerBidder?we('Number of user syncs exceeded for "'.concat(r,'"')):t.canBidderRegisterSync(e,r)?(n[e].push([r,o]),void(a=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(a,r))):we('Bidder "'.concat(r,'" not permitted to register their "').concat(e,'" userSync pixels.')):we("Bidder is required for registering sync"):we('User sync type "'.concat(e,'" not supported'))},t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(c,Number(e));c()},t.triggerUserSyncs=function(){s.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!s.filterSettings||!function(e,t){var n=s.filterSettings;if(function(e,t){if(e.all&&e[t])return we('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var n=e.all?e.all:e[t],r=e.all?"all":t;if(!n)return!1;var i=n.filter,a=n.bidders;return i&&"include"!==i&&"exclude"!==i?(we('UserSync "filterSettings.'.concat(r,".filter\" setting '").concat(i,"' is not a valid option; use either 'include' or 'exclude'.")),!1):!!("*"===a||Array.isArray(a)&&a.length>0&&a.every((function(e){return Se(e)&&"*"!==e})))||(we('Detected an invalid setup in userSync "filterSettings.'.concat(r,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1)}(n,e)){o[e]=!0;var r=n.all?n.all:n[e],i="*"===r.bidders?[t]:r.bidders,a={include:function(e,t){return!d(e,t)},exclude:function(e,t){return d(e,t)}};return a[r.filter||"include"](i,t)}return!o[e]}(e,t)},t}(Object.defineProperties({config:k.getConfig("userSync")},{browserSupportsCookies:{get:function(){return!/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)&&Pn.cookiesAreEnabled()}}})),Rn="outstream",Bn="instream";function Dn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?ki.index:n,i=y(r.getMediaTypes(e),"video"),a=i&&y(i,"context"),o=i&&y(i,"useCacheKey"),s=r.getAdUnit(e);return qn(e,s,i,a,o)}var qn=rn("sync",(function(e,t,n,r,i){return n&&(i||r!==Rn)?k.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):(Ie('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1):!(r===Rn&&!i&&!(e.renderer||t&&t.renderer||n.renderer))}),"checkVideoBidSetup"),Nn="native",zn="video",Fn="banner",Mn="adpod",Ln=[];function Wn(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}function Yn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labels,n=void 0===t?[]:t,r=e.labelAll,i=void 0!==r&&r,a=e.activeLabels,o=void 0===a?[]:a,s=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Ln,l=Kn(u);Pe(s)||(s=c?{banner:{sizes:c}}:{});var f=y(s,"banner.sizes");l.shouldFilter&&f&&((s=rt(s)).banner.sizes=f.filter((function(e){return l.sizesSupported[e]})));var p={active:!s.hasOwnProperty(Fn)||y(s,"banner.sizes.length")>0&&(0===n.length||!i&&(n.some((function(e){return l.labels[e]}))||n.some((function(e){return d(o,e)})))||i&&n.reduce((function(e,t){return e?l.labels[t]||d(o,t):e}),!0)),mediaTypes:s};return f&&f.length!==s.banner.sizes.length&&(p.filterResults={before:f,after:s.banner.sizes}),p}function Kn(e){return e.reduce((function(e,t){if("object"===s(t)&&"string"==typeof t.mediaQuery&&t.mediaQuery.length>0){var n=!1;try{n=me().matchMedia(t.mediaQuery).matches}catch(e){we("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),n=matchMedia(t.mediaQuery).matches}n&&(Array.isArray(t.sizesSupported)&&(e.shouldFilter=!0),["labels","sizesSupported"].forEach((function(n){return(t[n]||[]).forEach((function(t){return e[n][t]=!0}))})))}else we('sizeConfig rule missing required property "mediaQuery"');return e}),{labels:{},sizesSupported:{},shouldFilter:!1})}function Gn(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}function Hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.src,r=void 0===n?"client":n,i=t.bidder,a=void 0===i?"":i,o=t.bidId,s=t.transactionId,d=t.auctionId,c=r,u=e||0;function l(){switch(u){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}this.bidderCode=a,this.width=0,this.height=0,this.statusMessage=l(),this.adId=de(),this.requestId=o,this.transactionId=s,this.auctionId=d,this.mediaType="banner",this.source=c,this.getStatusCode=function(){return u},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,auctionId:this.auctionId}}}function Vn(e,t){return new Hn(e,t)}function Jn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}k.getConfig("sizeConfig",(function(e){return function(e){Ln=e}(e.sizeConfig)}));var Qn="performanceMetrics",$n=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},Zn=new WeakMap;function er(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.now,n=void 0===t?$n:t,r=e.mkNode,i=void 0===r?rr:r,a=e.mkTimer,o=void 0===a?nr:a,s=e.mkRenamer,d=void 0===s?function(e){return e}:s,c=e.nodes,u=void 0===c?Zn:c;return function(){return function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(t){t(e)}}};function a(e){return function(n){return t.dfWalk({visit:function(t,r){var i=r[e];if(i.hasOwnProperty(n))return i[n]}})}}r=d(r);var s=a("timestamps");function c(e,n){var i=r(e);t.dfWalk({follow:function(e,t){return t.propagate&&(!e||!e.stopPropagation)},visit:function(e,t){i.forEach((function(r){null==e?t.metrics[r]=n:(t.groups.hasOwnProperty(r)||(t.groups[r]=[]),t.groups[r].push(n))}))}})}function l(e){t.timestamps[e]=n()}function f(e,t){var r=s(e),i=null!=r?n()-r:null;return null!=t&&c(t,i),i}function p(e,t,n){var r=s(e),i=s(t),a=null!=r&&null!=i?i-r:null;return null!=n&&c(n,a),a}function g(e){return o(n,(function(t){return c(e,t)}))}function m(e,t){return g(e).stopAfter(t)()}function v(e,t,n){var r=g(e);return n(function(e){var t=r.stopBefore(e);return t.bail=e.bail&&r.stopBefore(e.bail),t.stopTiming=r,t.untimed=e,t}(t))}function h(){var e={};return t.dfWalk({visit:function(t,n){e=Object.assign({},!t||t.includeGroups?n.groups:null,n.metrics,e)}}),e}function b(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.propagate,o=void 0===a||a,s=n.stopPropagation,d=void 0!==s&&s,c=n.includeGroups,u=void 0!==c&&c;return e(i([[t,{propagate:o,stopPropagation:d,includeGroups:u}]]),r)}function y(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.propagate,i=void 0===r||r,a=n.stopPropagation,o=void 0!==a&&a,s=n.includeGroups,d=void 0!==s&&s,c=u.get(e);null!=c&&c.addParent(t,{propagate:i,stopPropagation:o,includeGroups:d})}function w(n){return e(t,n)}function I(){return e(t.newSibling(),r)}var x={startTiming:g,measureTime:m,measureHookTime:v,checkpoint:l,timeSince:f,timeBetween:p,setMetric:c,getMetrics:h,fork:b,join:y,newMetrics:I,renameWith:w,toJSON:function(){return h()}};return u.set(x,t),x}(i([]))}}function tr(e,t,n){return function(){t&&t();try{return e.apply(this,arguments)}finally{n&&n()}}}function nr(e,t){var n=e(),r=!1;function i(){r||(t(e()-n),r=!0)}return i.stopBefore=function(e){return tr(e,i)},i.stopAfter=function(e){return tr(e,null,i)},i}function rr(e){return{metrics:{},timestamps:{},groups:{},addParent:function(t,n){e.push([t,n])},newSibling:function(){return rr(e.slice())},dfWalk:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.visit,a=n.follow,o=void 0===a?function(){return!0}:a,s=n.visited,d=void 0===s?new Set:s,c=n.inEdge;if(!d.has(this)){if(d.add(this),null!=(t=i(c,this)))return t;var u,l=Jn(e);try{for(l.s();!(u=l.n()).done;){var f=r(u.value,2),p=f[0],g=f[1];if(o(c,g)&&null!=(t=p.dfWalk({visit:i,follow:o,visited:d,inEdge:g})))return t}}catch(e){l.e(e)}finally{l.f()}}}}}var ir=function(){var e=function(){},t=function(){return{}},n={forEach:e},r=function(){return null};r.stopBefore=function(e){return e},r.stopAfter=function(e){return e};var i=Object.defineProperties({dfWalk:e,newSibling:function(){return i},addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((function(e){return[e,{get:t}]}))));return er({now:function(){return 0},mkNode:function(){return i},mkRenamer:function(){return function(){return n}},mkTimer:function(){return r},nodes:{get:e,set:e}})()}(),ar=!0;function or(e){return ar&&e||ir}k.getConfig(Qn,(function(e){ar=!!e[Qn]}));var sr,dr=(sr=er(),function(){return ar?sr():ir});function cr(e,t){return function(n,r){return function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];var d=this;return or(t.apply(d,o)).measureHookTime(e+n,i,(function(e){return r.call.apply(r,[d,e].concat(o))}))}}}var ur=cr("requestBids.",(function(e){return e.metrics})),lr=(cr("addBidResponse.",(function(e,t){return t.metrics})),An("bidderFactory")),fr=["cpm","ttl","creativeId","netRevenue","currency"];function pr(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function n(e){var n=gr(e);ei.registerBidAdapter(n,e.code,t)}n(e),Array.isArray(e.aliases)&&e.aliases.forEach((function(t){var r,i,a=t;Pe(t)&&(a=t.code,r=t.gvlid,i=t.skipPbsAliasing),ei.aliasRegistry[a]=e.code,n(Object.assign({},e,{code:a,gvlid:r,skipPbsAliasing:i}))}))}function gr(e){return Object.assign(new Gn(e.code),{getSpec:function(){return Object.freeze(e)},registerSyncs:t,callBids:function(r,i,a,o,s,c){if(Array.isArray(r.bids)){var u={},l=[],f=yr(r).measureTime("validate",(function(){return r.bids.filter(n)}));if(0!==f.length){var p={};f.forEach((function(e){p[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),mr(e,f,r,o,c,{onRequest:function(e){return Mt(w.FP.BEFORE_BIDDER_HTTP,r,e)},onResponse:function(t){s(e.code),l.push(t)},onFledgeAuctionConfigs:function(e){e.forEach((function(e){var t=p[e.bidId];t&&hr(t,e)}))},onError:function(t,n){s(e.code),ei.callBidderError(e.code,n,r),Mt(w.FP.BIDDER_ERROR,{error:n,bidderRequest:r}),Ie("Server call for ".concat(e.code," failed: ").concat(t," ").concat(n.status,". Continuing without bids."))},onBid:function(t){var n,r,a,o,s=p[t.requestId];if(s){if(t.adapterCode=s.bidder,n=t.bidderCode,r=s.bidder,a=un.get(r,"allowAlternateBidderCodes")||!1,o=un.get(r,"allowedAlternateBidderCodes"),n&&r&&r!==n&&(o=Ae(o)?o.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(Ge):o,!a||Ae(o)&&"*"!==o[0]&&!o.includes(n)))return we("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(s.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),void i.reject(s.adUnitCode,t,w.Gw.Dg);t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[s.bidder]);var c=Object.assign(Vn(w.Q_.Q,s),t);!function(e,t){var n=or(t.metrics);n.checkpoint("addBidResponse"),u[e]=!0,n.measureTime("addBidResponse.validate",(function(){return function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?ki.index:n;function i(){var e=Object.keys(t);return fr.every((function(n){return d(e,n)&&!d([void 0,null],t[n])}))}function a(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}return e?t?i()?"native"!==t.mediaType||Hi(t,{index:r})?"video"!==t.mediaType||Dn(t,{index:r})?!("banner"===t.mediaType&&!br(e,t,{index:r}))||(Ie(a("Banner bids require a width and height")),!1):(Ie(a("Video bid does not have required vastUrl or renderer property")),!1):(Ie(a("Native bid missing some required properties.")),!1):(Ie(a("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1):(we("Some adapter tried to add an undefined bid for ".concat(e,".")),!1):(we("No adUnitCode was supplied to addBidResponse."),!1)}(e,t)}))?i(e,t):i.reject(e,t,w.Gw.UI)}(s.adUnitCode,c)}else we("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring.")),i.reject(null,t,w.Gw.Gp)},onCompletion:g})}else g()}function g(){a(),k.runWithBidder(e.code,(function(){Mt(w.FP.BIDDER_DONE,r),t(l,r.gdprConsent,r.uspConsent,r.gppConsent)}))}}});function t(t,n,r,i){vr(e,t,n,r,i)}function n(t){return!!e.isBidRequestValid(t)||(we("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(t))),!1)}}var mr=rn("sync",(function(e,t,n,r,i,a){var o=a.onRequest,d=a.onResponse,c=a.onFledgeAuctionConfigs,u=a.onError,l=a.onBid,f=a.onCompletion,p=yr(n);f=p.startTiming("total").stopBefore(f);var g=p.measureTime("buildRequests",(function(){return e.buildRequests(t,n)}));if(g&&0!==g.length){Array.isArray(g)||(g=[g]);var m=function(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got ".concat(t));var n=0;return function(){++n===t&&e.apply(this,arguments)}}(f,g.length);g.forEach((function(t){var n=p.fork();function a(e){null!=e&&(e.metrics=n.fork().renameWith()),l(e)}var f=i((function(r,i){h();try{r=JSON.parse(r)}catch(e){}r={body:r,headers:{get:i.getResponseHeader.bind(i)}},d(r);try{r=n.measureTime("interpretResponse",(function(){return e.interpretResponse(r,t)}))}catch(t){return Ie("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),void m()}var o;r&&Ae(r.fledgeAuctionConfigs)?(c(r.fledgeAuctionConfigs),o=r.bids):o=r,o&&(Ae(o)?o.forEach(a):a(o)),m()})),g=i((function(e,t){h(),u(e,t),m()}));o(t);var v,h=n.startTiming("net");switch(t.method){case"GET":r("".concat(t.url).concat((v=t.data)?"?".concat("object"===s(v)?le(v):v):""),{success:f,error:g},void 0,Object.assign({method:"GET",withCredentials:!0},t.options));break;case"POST":r(t.url,{success:f,error:g},"string"==typeof t.data?t.data:JSON.stringify(t.data),Object.assign({method:"POST",contentType:"text/plain",withCredentials:!0},t.options));break;default:we("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),m()}}))}else f()}),"processBidderRequests"),vr=rn("async",(function(e,t,n,r,i){var a=k.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(a||!ei.aliasRegistry[e.code])){var o=k.getConfig("userSync.filterSettings"),s=e.getUserSyncs({iframeEnabled:!(!o||!o.iframe&&!o.all),pixelEnabled:!(!o||!o.image&&!o.all)},t,n,r,i);s&&(Array.isArray(s)||(s=[s]),s.forEach((function(t){Un.registerSync(t.type,e.code,t.url)})))}}),"registerSyncs"),hr=rn("sync",(function(e,t){ye("bidderFactory.addComponentAuction",t)}),"addComponentAuction");function br(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.index,a=void 0===i?ki.index:i;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;var o=a.getBidRequest(t),s=a.getMediaTypes(t),d=o&&o.sizes||s&&s.banner&&s.banner.sizes,c=pe(d);if(1===c.length){var u=c[0].split("x"),l=r(u,2),f=l[0],p=l[1];return t.width=parseInt(f,10),t.height=parseInt(p,10),!0}return!1}function yr(e){return or(e.metrics).renameWith((function(t){return["adapter.client.".concat(t),"adapters.client.".concat(e.bidderCode,".").concat(t)]}))}on("checkAdUnitSetup").before((function(e,t){if(!k.getConfig("adpod.brandCategoryExclusion"))return e.call(this,t);t.filter((function(e){return y(e,"mediaTypes.video.context")===Mn})).map((function(e){return e.bids.map((function(e){return e.bidder}))})).reduce(He,[]).filter(Ge).forEach((function(e){var t=ei.getBidAdapter(e);if(t.getSpec().getMappingFileInfo){var n=t.getSpec().getMappingFileInfo(),r=n.refreshInDays?n.refreshInDays:1,i=n.localStorageKey?n.localStorageKey:t.getSpec().code,a=lr.getDataFromLocalStorage(i);try{(!(a=a?JSON.parse(a):void 0)||st()>a.lastUpdated+24*r*60*60*1e3)&&Lt(n.url,{success:function(t){try{t=JSON.parse(t);var n={lastUpdated:st(),mapping:t.mapping};lr.setDataInLocalStorage(i,JSON.stringify(n))}catch(t){Ie("Failed to parse ".concat(e," bidder translation mapping file"))}},error:function(){Ie("Failed to load ".concat(e," bidder translation file"))}})}catch(t){Ie("Failed to parse ".concat(e," bidder translation mapping file"))}}})),e.call(this,t)}));var wr={};function Ir(e,t,n){var r=function(e,t){var n=wr[e]=wr[e]||{bidders:{}};return t?n.bidders[t]=n.bidders[t]||{}:n}(e,n);return r[t]=(r[t]||0)+1,r[t]}var xr=function(e){return Ir(e,"requestsCounter")},Cr=function(e,t){return Ir(e,"requestsCounter",t)},Or=function(e,t){return Ir(e,"winsCounter",t)},Tr=function(e){return y(wr,"".concat(e,".requestsCounter"))||0},Er=function(e,t){return y(wr,"".concat(e,".bidders.").concat(t,".requestsCounter"))||0},kr=function(e,t){return y(wr,"".concat(e,".bidders.").concat(t,".winsCounter"))||0};function _r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return e;if(/\w+:\/\//.exec(e))return e;var n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:"".concat(n,"//").concat(e)}function Sr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.noLeadingWww,r=void 0!==n&&n,i=t.noPort,a=void 0!==i&&i;try{e=new URL(_r(e))}catch(e){return}return e=a?e.hostname:e.host,r&&e.startsWith("www.")&&(e=e.substring(4)),e}var Ar=function(e){function t(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}return function(){var n,r,i,a,o=[],s=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(e),d=k.getConfig("maxNestedIframes"),c=!1,u=0,l=!1,f=!1,p=!1;do{var g=n,m=f,v=void 0,h=!1,b=null;f=!1,n=n?n.parent:e;try{v=n.location.href||null}catch(e){h=!0}if(h)if(m){var y=g.context;try{r=b=y.sourceUrl,p=!0,l=!0,n===e.top&&(c=!0),y.canonicalUrl&&(i=y.canonicalUrl)}catch(e){}}else{we("Trying to access cross domain iframe. Continuing without referrer and location");try{var w=g.document.referrer;w&&(b=w,n===e.top&&(c=!0))}catch(e){}!b&&s&&s[u-1]&&(b=s[u-1],n===e.top&&(p=!0)),b&&!l&&(r=b)}else{if(v&&(r=b=v,l=!1,n===e.top)){c=!0;var I=t(n.document);I&&(i=I)}n.context&&n.context.sourceUrl&&(f=!0)}o.push(b),u++}while(n!==e.top&&u<d);o.reverse();try{a=e.top.document.referrer}catch(e){}var x=c||p?r:null,C=k.getConfig("pageUrl")||i||null,O=k.getConfig("pageUrl")||x||_r(C,e);return x&&x.indexOf("?")>-1&&-1===O.indexOf("?")&&(O="".concat(O).concat(x.substring(x.indexOf("?")))),{reachedTop:c,isAmp:l,numIframes:u-1,stack:o,topmostLocation:r||null,location:x,canonicalUrl:C,page:O,domain:Sr(O)||null,ref:a||null,legacy:{reachedTop:c,isAmp:l,numIframes:u-1,stack:o,referer:r||null,canonicalUrl:C}}}}(window);function jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jr(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ur="client",Rr="server",Br={},Dr=Br.bidderRegistry={},qr=Br.aliasRegistry={},Nr=[];k.getConfig("s2sConfig",(function(e){e&&e.s2sConfig&&(Nr=Ae(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var zr={},Fr=rn("sync",(function(e){var t=e.bidderCode,n=e.auctionId,r=e.bidderRequestId,i=e.adUnits,a=e.src,o=e.metrics;return i.reduce((function(e,i){return e.push(i.bids.filter((function(e){return e.bidder===t})).reduce((function(e,t){var s=null==(t=Object.assign({},t,lt(i,["nativeParams","nativeOrtbRequest","ortb2Imp","mediaType","renderer"]))).mediaTypes?i.mediaTypes:t.mediaTypes;return function(e){var t=["banner","native","video"];return!!Object.keys(e).every((function(e){return d(t,e)}))&&(!e.video||!e.video.context||d(["instream","outstream","adpod"],e.video.context))}(s)?t=Object.assign({},t,{mediaTypes:s}):Ie("mediaTypes is not correctly configured for adunit ".concat(i.code)),e.push(Object.assign({},t,{adUnitCode:i.code,transactionId:i.transactionId,sizes:y(s,"banner.sizes")||y(s,"video.playerSize")||[],bidId:t.bid_id||de(),bidderRequestId:r,auctionId:n,src:a,metrics:o,bidRequestsCount:Tr(i.code),bidderRequestsCount:Er(i.code,t.bidder),bidderWinsCount:kr(i.code,t.bidder)})),e}),[])),e}),[]).reduce(He,[]).filter((function(e){return""!==e}))}),"getBids"),Mr=rn("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.getS2SBidders,i=void 0===r?Vr:r;if(null==t)return e;var a=i(t);return e.filter((function(e){return a.has(e.bidder)}))}),"filterBidsForAdUnit");function Lr(e,t){var n=rt(e);return n.forEach((function(e){e.bids=Mr(e.bids,t).map((function(e){return e.bid_id=de(),e}))})),n.filter((function(e){return 0!==e.bids.length}))}function Wr(e){var t=rt(e);return t.forEach((function(e){e.bids=Mr(e.bids,null)})),t.filter((function(e){return 0!==e.bids.length}))}var Yr=new On,Kr=new Cn,Gr=new Tn,Hr=rn("sync",(function(e,t){return function(e,t){return e.reduce((function(e,n){var r=Yn(Wn(n,t),n.mediaTypes,n.sizes),i=r.active,a=r.mediaTypes,o=r.filterResults;return i?(o&&ye('Size mapping filtered adUnit "'.concat(n.code,'" banner sizes from '),o.before,"to ",o.after),n.mediaTypes=a,n.bids=n.bids.reduce((function(e,r){var i=Yn(Wn(r,t),n.mediaTypes),a=i.active,o=i.mediaTypes,s=i.filterResults;return a?(s&&(ye('Size mapping filtered adUnit "'.concat(n.code,'" bidder "').concat(r.bidder,'" banner sizes from '),s.before,"to ",s.after),r.mediaTypes=o),e.push(r)):ye('Size mapping deactivated adUnit "'.concat(n.code,'" bidder "').concat(r.bidder,'"')),e}),[]),e.push(n)):ye('Size mapping disabled adUnit "'.concat(n.code,'"')),e}),[])}(e,t)}),"setupAdUnitMediaTypes");function Vr(e){Ae(e)||(e=[e]);var t=new Set([null]);return e.filter((function(e){return e&&e.enabled})).flatMap((function(e){return e.bidders})).forEach((function(e){return t.add(e)})),t}var Jr=rn("sync",(function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.getS2SBidders,o=void 0===a?Vr:a,s=o(t);return Xe(e).reduce((function(e,t){return e[s.has(t)?Rr:Ur].push(t),e}),(i(n={},Ur,[]),i(n,Rr,[]),n))}),"partitionBidders");function Xr(e,t){var n=Dr[e],r=(null==n?void 0:n.getSpec)&&n.getSpec();if(r&&r[t]&&"function"==typeof r[t])return[r,r[t]]}function Qr(e,t,n,r){try{ye("Invoking ".concat(e,".").concat(t));for(var i=arguments.length,a=new Array(i>4?i-4:0),o=4;o<i;o++)a[o-4]=arguments[o];k.runWithBidder(e,r.bind.apply(r,[n].concat(a)))}catch(n){we("Error calling ".concat(t," of ").concat(e))}}function $r(e,t,n){var r=Xr(e,t);null!=r&&Qr.apply(void 0,[e,t].concat(o(r),[n]))}function Zr(e){for(var t=new Set;qr.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=qr[e];return e}Br.makeBidRequests=rn("sync",(function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6?arguments[6]:void 0;o=or(o),Mt(w.FP.BEFORE_REQUEST_BIDS,e),Ki(e),e=Hr(e,i);var s=Jr(e,Nr),d=s.client,u=s.server;k.getConfig("bidderSequence")===C&&(d=tt(d));var l=Ar(),f=[],p=a.global||{},g=a.bidder||{};function m(e){var t=Object.freeze(St({},p,g[e.bidderCode]));return e.ortb2=t,e.bids.forEach((function(e){return e.ortb2=t})),e}Nr.forEach((function(r){if(r&&r.enabled){var i=Lr(e,r),a=ce();u.forEach((function(e){var s=de(),d=o.fork(),c=m({bidderCode:e,auctionId:n,bidderRequestId:s,uniquePbsTid:a,bids:Fr({bidderCode:e,auctionId:n,bidderRequestId:s,adUnits:rt(i),src:w.os.YZ,metrics:d}),auctionStart:t,timeout:r.timeout,src:w.os.YZ,refererInfo:l,metrics:d});0!==c.bids.length&&f.push(c)})),i.forEach((function(e){var t=e.bids.filter((function(e){return c(f,(function(t){return c(t.bids,(function(t){return t.bidId===e.bid_id}))}))}));e.bids=t})),f.forEach((function(e){void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=i.filter((function(e){return e.bids.length>0})))}))}}));var v=Wr(e);return d.forEach((function(e){var a=de(),s=o.fork(),d=m({bidderCode:e,auctionId:n,bidderRequestId:a,bids:Fr({bidderCode:e,auctionId:n,bidderRequestId:a,adUnits:rt(v),labels:i,src:"client",metrics:s}),auctionStart:t,timeout:r,refererInfo:l,metrics:s}),c=Dr[e];c||Ie("Trying to make a request for bidder that does not exist: ".concat(e)),c&&d.bids&&0!==d.bids.length&&f.push(d)})),f.forEach((function(e){Yr.getConsentData()&&(e.gdprConsent=Yr.getConsentData()),Kr.getConsentData()&&(e.uspConsent=Kr.getConsentData()),Gr.getConsentData()&&(e.gppConsent=Gr.getConsentData())})),f.forEach((function(e){k.runWithBidder(e.bidderCode,(function(){var t=k.getConfig("fledgeEnabled");e.fledgeEnabled=navigator.runAdAuction&&t}))})),f}),"makeBidRequests"),Br.callBids=function(e,t,n,i,a,o,s){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(t.length){var c=t.reduce((function(e,t){return e[Number(void 0!==t.src&&t.src===w.os.YZ)].push(t),e}),[[],[]]),u=r(c,2),l=u[0],f=u[1],p=[];f.forEach((function(e){for(var t=-1,n=0;n<p.length;++n)if(e.uniquePbsTid===p[n].uniquePbsTid){t=n;break}t<=-1&&p.push(e)}));var g=0;Nr.forEach((function(e){if(e&&p[g]&&Vr(e).has(p[g].bidderCode)){var t=Wt(o,a?{request:a.request.bind(null,"s2s"),done:a.done}:void 0),r=e.bidders,s=Dr[e.adapter],c=p[g].uniquePbsTid,u=p[g].adUnitsS2SCopy,l=f.filter((function(e){return e.uniquePbsTid===c}));if(s){var m={ad_units:u,s2sConfig:e,ortb2Fragments:d};if(m.ad_units.length){var v=l.map((function(e){return e.start=st(),i.bind(e)})),h=Xe(m.ad_units).filter((function(e){return r.includes(e)}));be("CALLING S2S HEADER BIDDERS ==== ".concat(h.length>0?h.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),l.forEach((function(e){Mt(w.FP.BID_REQUESTED,Pr(Pr({},e),{},{tid:e.auctionId}))})),s.callBids(m,f,n,(function(){return v.forEach((function(e){return e()}))}),t)}}else Ie("missing "+e.adapter);g++}})),l.forEach((function(e){e.start=st();var t=Dr[e.bidderCode];k.runWithBidder(e.bidderCode,(function(){be("CALLING BIDDER"),Mt(w.FP.BID_REQUESTED,e)}));var r=Wt(o,a?{request:a.request.bind(null,e.bidderCode),done:a.done}:void 0),d=i.bind(e);try{k.runWithBidder(e.bidderCode,oe.call(t.callBids,t,e,n,d,r,s,k.callbackWithBidder(e.bidderCode)))}catch(t){Ie("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),d()}}))}else we("callBids executed with no bidRequests.  Were they filtered by labels or sizing?")},Br.videoAdapters=[],Br.registerBidAdapter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.supportedMediaTypes,i=void 0===r?[]:r;e&&t?"function"==typeof e.callBids?(Dr[t]=e,d(i,"video")&&Br.videoAdapters.push(t),d(i,"native")&&Pi.push(t)):Ie("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):Ie("bidAdapter or bidderCode not specified")},Br.aliasBidAdapter=function(e,t,n){if(void 0===Dr[t]){var r=Dr[e];if(void 0===r){var i=[];Nr.forEach((function(n){if(n.bidders&&n.bidders.length){var r=n&&n.bidders;n&&d(r,t)?qr[t]=e:i.push(e)}})),i.forEach((function(e){Ie('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{var a,o=function(e){var t=[];return d(Br.videoAdapters,e)&&t.push("video"),d(Pi,e)&&t.push("native"),t}(e);if(r.constructor.prototype!=Object.prototype)(a=new r.constructor).setBidderCode(t);else{var s=r.getSpec(),c=n&&n.gvlid,u=n&&n.skipPbsAliasing;a=gr(Object.assign({},s,{code:t,gvlid:c,skipPbsAliasing:u})),qr[t]=e}Br.registerBidAdapter(a,t,{supportedMediaTypes:o})}catch(t){Ie(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else be('alias name "'+t+'" has been already specified.')},Br.registerAnalyticsAdapter=function(e){var t=e.adapter,n=e.code,r=e.gvlid;t&&n?"function"==typeof t.enableAnalytics?(t.code=n,zr[n]={adapter:t,gvlid:r}):Ie('Prebid Error: Analytics adaptor error for analytics "'.concat(n,'"\n        analytics adapter must implement an enableAnalytics() function')):Ie("Prebid Error: analyticsAdapter or analyticsCode not specified")},Br.enableAnalytics=function(e){Ae(e)||(e=[e]),De(e,(function(e){var t=zr[e.provider];t&&t.adapter?t.adapter.enableAnalytics(e):Ie("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))}))},Br.getBidAdapter=function(e){return Dr[e]},Br.getAnalyticsAdapter=function(e){return zr[e]},Br.callTimedOutBidders=function(e,t,n){t=ut(t=t.map((function(t){return t.params=ft(e,t.adUnitCode,t.bidder),t.timeout=n,t})),"bidder"),Object.keys(t).forEach((function(e){$r(e,"onTimeout",t[e])}))},Br.callBidWonBidder=function(e,t,n){t.params=ft(n,t.adUnitCode,t.bidder),Or(t.adUnitCode,t.bidder),$r(e,"onBidWon",t)},Br.callSetTargetingBidder=function(e,t){$r(e,"onSetTargeting",t)},Br.callBidViewableBidder=function(e,t){$r(e,"onBidViewable",t)},Br.callBidderError=function(e,t,n){$r(e,"onBidderError",{error:t,bidderRequest:n})},Br.callDataDeletionRequest=rn("sync",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i="onDataDeletionRequest";Object.keys(Dr).filter((function(e){return!qr.hasOwnProperty(e)})).forEach((function(e){var n=Xr(e,i);if(null!=n){var r=ki.getBidsRequested().filter((function(t){return Zr(t.bidderCode)===e}));Qr.apply(void 0,[e,i].concat(o(n),[r],t))}})),Object.entries(zr).forEach((function(e){var n,a=r(e,2),o=a[0],s=a[1],d=null==s||null===(n=s.adapter)||void 0===n?void 0:n[i];if("function"==typeof d)try{d.apply(s.adapter,t)}catch(e){Ie("error calling ".concat(i," of ").concat(o),e)}}))}));var ei=Br,ti=Un.syncUsers,ni="completed";Nt(w.FP.BID_ADJUSTMENT,(function(e){!function(e){var t=e.bidderCode,n=e.cpm,r=un.get(t||null,"bidCpmAdjustment");if(r&&"function"==typeof r)try{n=r(e.cpm,Object.assign({},e))}catch(e){Ie("Error during bid adjustment","bidmanager.js",e)}n>=0&&(e.cpm=n)}(e)}));var ri={},ii={},ai=[];function oi(e){var t=e.adUnits,n=e.adUnitCodes,i=e.callback,a=e.cbTimeout,o=e.labels,c=e.auctionId,u=e.ortb2Fragments,l=e.metrics;l=or(l);var f,p,g,m,v=t,h=o,b=n,y=c||ce(),I=a,x=new Set,C=[],O=i,T=[],E=[],_=[],S=[];function A(){return{auctionId:y,timestamp:f,auctionEnd:p,auctionStatus:m,adUnits:v,adUnitCodes:b,labels:h,bidderRequests:T,noBids:_,bidsReceived:E,bidsRejected:C,winningBids:S,timeout:I,metrics:l}}function j(e,n){if(n&&clearTimeout(g),void 0===p){var r=[];e&&(be("Auction ".concat(y," timedOut")),i=x,(r=T.map((function(e){return(e.bids||[]).filter((function(e){return!i.has(e.bidder)}))})).reduce(He,[])).length&&Mt(w.FP.BID_TIMEOUT,r)),m=ni,p=Date.now(),l.checkpoint("auctionEnd"),l.timeBetween("requestBids","auctionEnd","requestBids.total"),l.timeBetween("callBids","auctionEnd","requestBids.callBids"),Mt(w.FP.AUCTION_END,A()),ci(v,(function(){try{if(null!=O){var n=b,i=E.filter(oe.call(nt,this,n)).reduce(Ti,{});O.apply(pbjs,[i,e,y]),O=null}}catch(e){Ie("Error executing bidsBackHandler",null,e)}finally{r.length&&ei.callTimedOutBidders(t,r,I);var a=k.getConfig("userSync")||{};a.enableOverride||ti(a.syncDelay)}}))}var i}function P(){k.resetBidder(),ye("Bids Received for Auction with id: ".concat(y),E),m=ni,j(!1,!0)}function U(e){x.add(e)}function R(e){var t=this;e.forEach((function(e){var t;t=e,T=T.concat(t)}));var n={},i={bidRequests:e,run:function(){var i,c;i=j.bind(null,!0),c=setTimeout(i,I),g=c,m="inProgress",Mt(w.FP.AUCTION_INIT,A());var l=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===n?ki.index:n,a=0,o=!1,c=new Set,u={},l={};function f(e,t){null==l[e]&&(l[e]=H.resolve()),l[e]=l[e].then((function(){return H.resolve(t).catch((function(){}))}))}function p(e,n){var r=e.timeout;(null==r||r>t.getTimeout())&&(r=t.getTimeout());var i=t.getAuctionStart()+r-Date.now(),a=l[e.bidderRequestId],o=l[""];(null!=a||null!=o)&&i>0?H.race([H.timeout(i),H.resolve(o).then((function(){return a}))]).then(n):n()}function g(){a--,o&&0===a&&e()}function m(e,t,n){return u[t.requestId]=!0,yi(t,e),a++,n(g)}function v(e,n){m(e,n,(function(e){var r=wi(n);r.mediaType===zn?fi(t,r,e):(null!=r.native&&"object"===s(r.native)&&mi(r),li(t,r),e())}))}function h(e,n,i){return m(e,n,(function(e){var a,o=Vn(w.Q_.H,null===(a=n.getIdentifiers)||void 0===a?void 0:a.call(n));return Object.assign(o,Object.fromEntries(Object.entries(n).filter((function(e){var t=r(e,1)[0];return!o.hasOwnProperty(t)&&!["ad","adUrl","vastXml","vastUrl","native"].includes(t)})))),o.status=w.UE.G9,o.cpm=0,n.rejectionReason=i,we("Bid from ".concat(n.bidder||"unknown bidder"," was rejected: ").concat(i),n),Mt(w.FP.BID_REJECTED,n),t.addBidRejected(n),e(),o}))}function b(){var n=t.getBidRequests(),r=k.getConfig("auctionOptions");if(c.add(this),r&&!Re(r)){var i=r.secondaryBidders;i&&!n.every((function(e){return d(i,e.bidderCode)}))&&(n=n.filter((function(e){return!d(i,e.bidderCode)})))}o=n.every((function(e){return c.has(e)})),this.bids.forEach((function(e){u[e.bidId]||(t.addNoBid(e),Mt(w.FP.NO_BID,e))})),o&&0===a&&e()}return{addBidResponse:function(){function e(e,t){var n,r=i.getBidderRequest(t);f(r&&r.bidderRequestId||"",si.call({dispatch:v},e,t,(function(r){return null==n&&(n=h(e,t,r)),n})))}return e.reject=h,e}(),adapterDone:function(){p(this,b.bind(this))}}}(P,t);ei.callBids(v,e,l.addBidResponse,l.adapterDone,{request:function(e,t){o(ri,t),o(n,e),ii[e]||(ii[e]={SRA:!0,origin:t}),n[e]>1&&(ii[e].SRA=!1)},done:function(e){ri[e]--,ai[0]&&a(ai[0])&&ai.shift()}},I,U,u)}};function a(e){var t=!0,n=k.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some((function(e){var r=1,i=void 0!==e.src&&e.src===w.os.YZ?"s2s":e.bidderCode;return ii[i]&&(!1===ii[i].SRA&&(r=Math.min(e.bids.length,n)),ri[ii[i].origin]+r>n&&(t=!1)),!t})),t&&e.run(),t}function o(e,t){void 0===e[t]?e[t]=1:e[t]++}a(i)||(we("queueing auction due to limited endpoint capacity"),ai.push(i))}return{addBidReceived:function(e){E=E.concat(e)},addBidRejected:function(e){C=C.concat(e)},addNoBid:function(e){_=_.concat(e)},executeCallback:j,callBids:function(){m="started",f=Date.now();var e=l.measureTime("requestBids.makeRequests",(function(){return ei.makeBidRequests(v,f,y,I,h,u,l)}));ye("Bids Requested for Auction with id: ".concat(y),e),l.checkpoint("callBids"),e.length<1?(we("No valid bid requests returned for auction"),P()):di.call({dispatch:R,context:this},e)},addWinningBid:function(e){S=S.concat(e),ei.callBidWonBidder(e.adapterCode||e.bidder,e,t)},setBidTargeting:function(e){ei.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return S},getAuctionStart:function(){return f},getTimeout:function(){return I},getAuctionId:function(){return y},getAuctionStatus:function(){return m},getAdUnits:function(){return v},getAdUnitCodes:function(){return b},getBidRequests:function(){return T},getBidsReceived:function(){return E},getNoBids:function(){return _},getFPD:function(){return u},getMetrics:function(){return l}}}var si=rn("sync",(function(e,t,n){this.dispatch.call(null,e,t)}),"addBidResponse"),di=rn("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),ci=rn("async",(function(e,t){t&&t()}),"bidsBackCallback");function ui(e,t){t.timeToRespond>e.getTimeout()+k.getConfig("timeoutBuffer")&&e.executeCallback(!0)}function li(e,t){var n,r,i;n=t,i=!0===un.get(n.bidderCode,"allowZeroCpmBids")?n.cpm>=0:n.cpm>0,n.bidderCode&&(i||n.dealId)&&(r=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?ki.index:n;if(!t)return{};var i=r.getBidRequest(t),a={},o=Ci(t.mediaType,e);return Oi(a,o,t,i),e&&un.getOwn(e,w.k2.xn)&&(Oi(a,un.ownSettingsFor(e),t,i),t.sendStandardTargeting=un.get(e,"sendStandardTargeting")),t.native&&(a=Object.assign({},a,Ji(t))),a}(n.bidderCode,n)),n.adserverTargeting=Object.assign(n.adserverTargeting||{},r),or(t.metrics).timeSince("addBidResponse","addBidResponse.total"),Mt(w.FP.BID_RESPONSE,t),e.addBidReceived(t),ui(e,t)}function fi(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.index,a=void 0===i?ki.index:i,o=!0,s=y(a.getMediaTypes({requestId:t.originalRequestId||t.requestId,transactionId:t.transactionId}),"video"),d=s&&y(s,"context"),c=s&&y(s,"useCacheKey");k.getConfig("cache.url")&&(c||d!==Rn)&&(!t.videoCacheKey||k.getConfig("cache.ignoreBidderCacheKey")?(o=!1,bi(e,t,n,s)):t.vastUrl||(Ie("videoCacheKey specified but not required vastUrl for video bid"),o=!1)),o&&(li(e,t),n())}var pi,gi,mi=function(e){var t,n,r=null===(t=ki.index.getAdUnit(e))||void 0===t?void 0:t.nativeOrtbRequest,i=null===(n=e.native)||void 0===n?void 0:n.ortb;if(r&&i){var a=function(e,t){var n={},r=(null==t?void 0:t.assets)||[];n.clickUrl=e.link.url,n.privacyLink=e.privacy;var i,a=_i((null==e?void 0:e.assets)||[]);try{var s=function(){var e=i.value,t=r.find((function(t){return e.id===t.id}));e.title?n.title=e.title.text:e.img?n[t.img.type===Di.MAIN?"image":"icon"]=e.img.url:e.data&&(n[Fi[Mi[t.data.type]]]=e.data.value)};for(a.s();!(i=a.n()).done;)s()}catch(e){a.e(e)}finally{a.f()}n.impressionTrackers=[];var d,c=[];null!=t&&t.imptrackers&&(d=n.impressionTrackers).push.apply(d,o(t.imptrackers));var u,l=_i((null==e?void 0:e.eventtrackers)||[]);try{for(l.s();!(u=l.n()).done;){var f=u.value;f.event===Wi&&f.method===Li.img&&n.impressionTrackers.push(f.url),f.event===Wi&&f.method===Li.js&&c.push(f.url)}}catch(e){l.e(e)}finally{l.f()}return c=c.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),null!=e&&e.jstracker&&c.push(e.jstracker),c.length&&(n.javascriptTrackers=c.join("\n")),n}(i,r);Object.assign(e.native,a)}},vi=function(e){var t,n,r;t=e.map((function(e){return e.bidResponse})),n=function(t,n){n.forEach((function(n,r){var i,a=e[r],o=a.auctionInstance,s=a.bidResponse,d=a.afterBidAdded;t?(we("Failed to save to the video cache: ".concat(t,". Video bid must be discarded.")),ui(o,s)):""===n.uuid?(we("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."),ui(o,s)):(s.videoCacheKey=n.uuid,s.vastUrl||(s.vastUrl=(i=s.videoCacheKey,"".concat(k.getConfig("cache.url"),"?uuid=").concat(i))),li(o,s),d())}))},r={puts:t.map(Kt)},Lt(k.getConfig("cache.url"),function(e){return{success:function(t){var n;try{n=JSON.parse(t).responses}catch(t){return void e(t,[])}n?e(null,n):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(t,n){e(new Error("Error storing video ad in the cache: ".concat(t,": ").concat(JSON.stringify(n))),[])}}}(n),JSON.stringify(r),{contentType:"text/plain",withCredentials:!0})};k.getConfig("cache",(function(e){pi="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,gi="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0}));var hi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vi,n=[[]],r=!1,i=function(e){return e()};return function(a,o,s){var d=gi>0?e:i;n[n.length-1].length>=pi&&n.push([]),n[n.length-1].push({auctionInstance:a,bidResponse:o,afterBidAdded:s}),r||(r=!0,d((function(){n.forEach(t),n=[[]],r=!1}),gi))}}(),bi=rn("async",(function(e,t,n,r){hi(e,t,n)}),"callPrebidCache");function yi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.index,i=void 0===r?ki.index:r,a=i.getBidderRequest(e),o=i.getAdUnit(e),s=a&&a.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||st(),requestTimestamp:e.requestTimestamp||s,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=(null==o?void 0:o.ttlBuffer)&&(e.ttlBuffer=o.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}function wi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.index,i=void 0===r?ki.index:r;Mt(w.FP.BID_ADJUSTMENT,e);var a=(null===(t=i.getBidRequest(e))||void 0===t?void 0:t.renderer)||i.getAdUnit(e).renderer,o=e.mediaType,d=i.getMediaTypes(e),c=d&&d[o],u=c&&c.renderer,l=null;u&&u.url&&u.render&&(!0!==u.backupOnly||!e.renderer)?l=u:a&&a.url&&a.render&&(!0!==a.backupOnly||!e.renderer)&&(l=a),l&&(e.renderer=Xt.install({url:l.url,config:l.options}),e.renderer.setRender(l.render));var f=Ii(e.mediaType,d,k.getConfig("mediaTypePriceGranularity")),p=m(e.cpm,"object"===s(f)?f:k.getConfig("customPriceBucket"),k.getConfig("currency.granularityMultiplier"));return e.pbLg=p.low,e.pbMg=p.med,e.pbHg=p.high,e.pbAg=p.auto,e.pbDg=p.dense,e.pbCg=p.custom,e}function Ii(e,t,n){if(e&&n){if(e===zn){var r=y(t,"".concat(zn,".context"),"instream");if(n["".concat(zn,"-").concat(r)])return n["".concat(zn,"-").concat(r)]}return n[e]}}function xi(e,t){return{key:e,val:"function"==typeof t?function(e,n){return t(e,n)}:function(e){return Je(e,t)}}}function Ci(e,t){var n=w.TD,r=Object.assign({},un.settingsFor(null));if(r[w.k2.xn]||(r[w.k2.xn]=function(){var e,t=w.TD;return[xi(t.BIDDER,"bidderCode"),xi(t.AD_ID,"adId"),xi(t.PRICE_BUCKET,(function(t){var n=e||function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?ki.index:t,r=Ii(e.mediaType,n.getMediaTypes(e),k.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&r?"string"==typeof r?r:"custom":k.getConfig("priceGranularity")}(t);return n===w.Ql.B7?t.pbAg:n===w.Ql.uN?t.pbDg:n===w.Ql.yE?t.pbLg:n===w.Ql.M2?t.pbMg:n===w.Ql.lj?t.pbHg:n===w.Ql.qN?t.pbCg:void 0})),xi(t.SIZE,"size"),xi(t.DEAL,"dealId"),xi(t.SOURCE,"source"),xi(t.FORMAT,"mediaType"),xi(t.ADOMAIN,(function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?e.meta.advertiserDomains[0]:""})),xi(t.ACAT,(function(e){return e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:""}))]}()),"video"===e){var i=r[w.k2.xn].slice();if(r[w.k2.xn]=i,[n.UUID,n.CACHE_ID].forEach((function(e){void 0===c(i,(function(t){return t.key===e}))&&i.push(xi(e,"videoCacheKey"))})),k.getConfig("cache.url")&&(!t||!1!==un.get(t,"sendStandardTargeting"))){var a=Et(k.getConfig("cache.url"));void 0===c(i,(function(e){return e.key===n.CACHE_HOST}))&&i.push(xi(n.CACHE_HOST,(function(e){return y(e,"adserverTargeting.".concat(n.CACHE_HOST))?e.adserverTargeting[n.CACHE_HOST]:a.hostname})))}}return r}function Oi(e,t,n,r){var i=t[w.k2.xn];return n.size=n.getSize(),De(i,(function(i){var a=i.key,o=i.val;if(e[a]&&we("The key: "+a+" is being overwritten"),_e(o))try{o=o(n,r)}catch(e){Ie("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&a!==w.TD.DEAL||!Be(o)&&null!=o?e[a]=o:ye("suppressing empty key '"+a+"' from adserver targeting")})),e}function Ti(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}function Ei(e){Object.assign(this,{getAuction:function(t){var n=t.auctionId;if(null!=n)return e().find((function(e){return e.getAuctionId()===n}))},getAdUnit:function(t){var n=t.transactionId;if(null!=n)return e().flatMap((function(e){return e.getAdUnits()})).find((function(e){return e.transactionId===n}))},getMediaTypes:function(e){var t=e.transactionId,n=e.requestId;if(null!=n){var r=this.getBidRequest({requestId:n});if(null!=r&&(null==t||r.transactionId===t))return r.mediaTypes}else if(null!=t){var i=this.getAdUnit({transactionId:t});if(null!=i)return i.mediaTypes}},getBidderRequest:function(t){var n=t.requestId,r=t.bidderRequestId;if(null!=n||null!=r){var i=e().flatMap((function(e){return e.getBidRequests()}));return null!=r&&(i=i.filter((function(e){return e.bidderRequestId===r}))),null==n?i[0]:i.find((function(e){return e.bids&&null!=e.bids.find((function(e){return e.bidId===n}))}))}},getBidRequest:function(t){var n=t.requestId;if(null!=n)return e().flatMap((function(e){return e.getBidRequests()})).flatMap((function(e){return e.bids})).find((function(e){return e&&e.bidId===n}))}})}var ki=function(){var e=[],t={addWinningBid:function(t){var n=or(t.metrics);n.checkpoint("bidWon"),n.timeBetween("auctionEnd","bidWon","render.pending"),n.timeBetween("requestBids","bidWon","render.e2e");var r=c(e,(function(e){return e.getAuctionId()===t.auctionId}));r?(t.status=w.UE.fe,r.addWinningBid(t)):we("Auction not found when adding winning bid")},getAllWinningBids:function(){return e.map((function(e){return e.getWinningBids()})).reduce(He,[])},getBidsRequested:function(){return e.map((function(e){return e.getBidRequests()})).reduce(He,[])},getNoBids:function(){return e.map((function(e){return e.getNoBids()})).reduce(He,[])},getBidsReceived:function(){return e.map((function(e){if(e.getAuctionStatus()===ni)return e.getBidsReceived()})).reduce(He,[]).filter((function(e){return e}))},getAllBidsForAdUnitCode:function(t){return e.map((function(e){return e.getBidsReceived()})).reduce(He,[]).filter((function(e){return e&&e.adUnitCode===t}))},getAdUnits:function(){return e.map((function(e){return e.getAdUnits()})).reduce(He,[])},getAdUnitCodes:function(){return e.map((function(e){return e.getAdUnitCodes()})).reduce(He,[]).filter(Ge)},createAuction:function(t){var n=oi(t);return function(t){e.push(t)}(n),n},findBidByAdId:function(t){return c(e.map((function(e){return e.getBidsReceived()})).reduce(He,[]),(function(e){return e.adId===t}))},getStandardBidderAdServerTargeting:function(){return Ci()[w.k2.xn]},setStatusForBids:function(n,r){var i=t.findBidByAdId(n);if(i&&(i.status=r),i&&r===w.UE.CK){var a=c(e,(function(e){return e.getAuctionId()===i.auctionId}));a&&a.setBidTargeting(i)}},getLastAuctionId:function(){return e.length&&e[e.length-1].getAuctionId()},clearAllAuctions:function(){e.length=0}};return t.index=new Ei((function(){return e})),t}();function _i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Si(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Si(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Si(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pi=[],Ui=Object.keys(w.FY).map((function(e){return w.FY[e]})),Ri={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},Bi=w.s$,Di=w.oF,qi=w.V1,Ni=w.zA,zi=w.FY,Fi=ra(qi),Mi=ra(Bi),Li={img:1,js:2,1:"img",2:"js"},Wi=1;function Yi(e){if(e&&e.type&&(!(!(t=e.type)||!d(Object.keys(Ri),t))||(Ie("".concat(t," nativeParam is not supported")),!1))&&(e=Ri[e.type]),!e||!e.ortb||Gi(e.ortb))return e;var t}function Ki(e){e.forEach((function(e){var t=e.nativeParams||y(e,"mediaTypes.native");t&&(e.nativeParams=Yi(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||function(e){if(e||Pe(e)){var t={ver:"1.2",assets:[]};for(var n in e)if(!Ni.includes(n))if(zi.hasOwnProperty(n)){var r=e[n],i=0;r.required&&Ue(r.required)&&(i=Number(r.required));var a={id:t.assets.length,required:i};if(n in qi)a.data={type:Bi[qi[n]]},r.len&&(a.data.len=r.len);else if("icon"===n||"image"===n){if(a.img={type:"icon"===n?Di.ICON:Di.MAIN},r.aspect_ratios)if(Ae(r.aspect_ratios))if(r.aspect_ratios.length){var o=r.aspect_ratios[0],s=o.min_width,d=o.min_height;vt(s)&&vt(d)?(a.img.wmin=s,a.img.hmin=d):Ie("image.aspect_ratios min_width or min_height are invalid: ",s,d);var c=r.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));c.length>0&&(a.img.ext={aspectratios:c})}else Ie("image.aspect_ratios was passed, but it's empty:",r.aspect_ratios);else Ie("image.aspect_ratios was passed, but it's not a an array:",r.aspect_ratios);r.sizes&&(2===r.sizes.length&&vt(r.sizes[0])&&vt(r.sizes[1])?(a.img.w=r.sizes[0],a.img.h=r.sizes[1],delete a.img.hmin,delete a.img.wmin):Ie("image.sizes was passed, but its value is not an array of integers:",r.sizes))}else"title"===n?a.title={len:r.len||140}:"ext"===n&&(a.ext=r,delete a.required);t.assets.push(a)}else Ie("Unrecognized native asset code: ".concat(n,". Asset will be ignored."));return t}Ie("Native assets object is empty or not an object: ",e)}(e.nativeParams))}))}function Gi(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return Ie("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var n=t.map((function(e){return e.id}));return t.length!==new Set(n).size||n.some((function(e){return e!==parseInt(e,10)}))?(Ie("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?(Ie("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((function(e){return function(e){if(!Pe(e))return Ie("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!je(e.img.w)&&!je(e.img.wmin))return Ie("for img asset there must be 'w' or 'wmin' property"),!1;if(!je(e.img.h)&&!je(e.img.hmin))return Ie("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!je(e.title.len))return Ie("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!je(e.data.type))return Ie("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&je(e.video.minduration)&&je(e.video.maxduration)))return Ie("video asset is not properly configured"),!1;return!0}(e)}))}function Hi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.index,i=void 0===r?ki.index:r,a=i.getAdUnit(e);if(!a)return!1;var o=a.nativeOrtbRequest,s=(null===(t=e.native)||void 0===t?void 0:t.ortb)||na(e.native,o);return Vi(s,o)}function Vi(e,t){if(!y(e,"link.url"))return Ie("native response doesn't have 'link' property. Ortb response: ",e),!1;var n=t.assets.filter((function(e){return 1===e.required})).map((function(e){return e.id})),r=e.assets.map((function(e){return e.id})),i=n.every((function(e){return d(r,e)}));return i||Ie("didn't receive a bid with all required assets. Required ids: ".concat(n,", but received ids in response: ").concat(r)),i}function Ji(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?ki.index:n,i={},a=r.getAdUnit(e);y(a,"nativeParams.rendererUrl")?e.native.rendererUrl=Qi(a.nativeParams.rendererUrl):y(a,"nativeParams.adTemplate")&&(e.native.adTemplate=Qi(a.nativeParams.adTemplate));var o=!1!==y(a,"nativeParams.sendTargetingKeys"),s=$i(a),d=ji(ji({},e.native),e.native.ext);return delete d.ext,Object.keys(d).forEach((function(t){var n=s[t],r=Qi(e.native[t])||Qi(y(e,"native.ext.".concat(t)));if("adTemplate"!==t&&n&&r){var d=y(a,"nativeParams.".concat(t,".sendId"));"boolean"!=typeof d&&(d=y(a,"nativeParams.ext.".concat(t,".sendId"))),d&&(r="".concat(n,":").concat(e.adId));var c=y(a,"nativeParams.".concat(t,".sendTargetingKeys"));"boolean"!=typeof c&&(c=y(a,"nativeParams.ext.".concat(t,".sendTargetingKeys"))),("boolean"==typeof c?c:o)&&(i[n]=r)}})),i}function Xi(e,t,n){var r={message:"assetResponse",adId:e.adId},i=t.native;return t.native.ortb&&(r.ortb=t.native.ortb),r.assets=[],(null==n?Object.keys(i):n).forEach((function(e){if("adTemplate"===e&&i[e])r.adTemplate=Qi(i[e]);else if("rendererUrl"===e&&i[e])r.rendererUrl=Qi(i[e]);else if("ext"===e)Object.keys(i[e]).forEach((function(t){if(i[e][t]){var n=Qi(i[e][t]);r.assets.push({key:t,value:n})}}));else if(i[e]&&w.FY.hasOwnProperty(e)){var t=Qi(i[e]);r.assets.push({key:e,value:t})}})),r}function Qi(e){return(null==e?void 0:e.url)||e}function $i(e){var t={};return y(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((function(e){t[e]="hb_native_".concat(e)})),ji(ji({},w.FY),t)}function Zi(e){if(Gi(e)){var t,n={},r=_i(e.assets);try{var i=function(){var e=t.value;if(e.title){var r={required:!!e.required&&Boolean(e.required),len:e.title.len};n.title=r}else if(e.img){var i={required:!!e.required&&Boolean(e.required)};e.img.w&&e.img.h?i.sizes=[e.img.w,e.img.h]:e.img.wmin&&e.img.hmin&&(i.aspect_ratios={min_width:e.img.wmin,min_height:e.img.hmin,ratio_width:e.img.wmin,ratio_height:e.img.hmin}),e.img.type===Di.MAIN?n.image=i:n.icon=i}else if(e.data){var a=Object.keys(Bi).find((function(t){return Bi[t]===e.data.type})),o=Object.keys(qi).find((function(e){return qi[e]===a}));n[o]={required:!!e.required&&Boolean(e.required)},e.data.len&&(n[o].len=e.data.len)}};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}return n}}function ea(e){if(!e||!Ae(e))return e;if(!e.some((function(e){var t;return null===(t=((null==e?void 0:e.mediaTypes)||{})[Nn])||void 0===t?void 0:t.ortb})))return e;var t,n=rt(e),r=_i(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.mediaTypes&&i.mediaTypes[Nn]&&i.mediaTypes[Nn].ortb&&(i.mediaTypes[Nn]=Object.assign(bt(i.mediaTypes[Nn],Ni),Zi(i.mediaTypes[Nn].ortb)),i.nativeParams=Yi(i.mediaTypes[Nn]))}}catch(e){r.e(e)}finally{r.f()}return n}function ta(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach((function(e){var n=r(e,2),i=n[0],a=n[1];switch(i){case"clickUrl":t.link.url=a;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(a)?a:[a];break;case"impressionTrackers":(Array.isArray(a)?a:[a]).forEach((function(e){t.eventtrackers.push({event:Wi,method:Li.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(a)?a.join(""):a}})),t}function na(e,t){var n=ji(ji({},ta(e)),{},{assets:[]});function r(e,r){var i=t.assets.find(e);null!=i&&(r(i=rt(i)),n.assets.push(i))}return Object.keys(e).filter((function(t){return!!e[t]})).forEach((function(t){var n=e[t];switch(t){case"title":r((function(e){return null!=e.title}),(function(e){e.title={text:n}}));break;case"image":case"icon":var i="image"===t?Di.MAIN:Di.ICON;r((function(e){return null!=e.img&&e.img.type===i}),(function(e){e.img={url:n}}));break;default:t in qi&&r((function(e){return null!=e.data&&e.data.type===Bi[qi[t]]}),(function(e){e.data={value:n}}))}})),n}function ra(e){var t={};for(var n in e)t[e[n]]=n;return t}var ia=w.FP,aa=ia.AD_RENDER_FAILED,oa=ia.AD_RENDER_SUCCEEDED;function sa(e){var t=e.reason,n=e.message,r=e.bid,i=e.id,a={reason:t,message:n};r&&(a.bid=r),i&&(a.adId=i),Ie(n),Mt(aa,a)}function da(e){var t=e.doc,n=e.bid,r=e.id,i={doc:t};n&&(i.bid=n),r&&(i.adId=r),Mt(oa,i)}var ca=w.FP.BID_WON,ua=w.FP.STALE_RENDER,la=new WeakSet,fa={"Prebid Request":function(e,t,n){if(null!=n){if(n.status!==w.UE.fe||(we("Ad id ".concat(n.adId," has been rendered before")),Mt(ua,n),!y(k.getConfig("auctionOptions"),"suppressStaleRender"))){try{!function(e,t){var n=e.adId,r=e.ad,i=e.adUrl,a=e.width,o=e.height,s=e.renderer,d=e.cpm,c=e.originalCpm;Qt(s)?$t(s,e):n&&(ga(e),t({message:"Prebid Response",ad:at(r,c||d),adUrl:at(i,c||d),adId:n,width:a,height:o}))}(n,e)}catch(e){return void sa({reason:w.q_.EXCEPTION,message:e.message,id:t.adId,bid:n})}ki.addWinningBid(n),Mt(ca,n)}}else sa({reason:w.q_.CANNOT_FIND_AD,message:"Cannot find ad '".concat(t.adId,"' for cross-origin render request"),id:t.adId})},"Prebid Event":function(e,t,n){if(null!=n)if(n.status===w.UE.fe)switch(t.event){case w.FP.AD_RENDER_FAILED:sa({bid:n,id:t.adId,reason:t.info.reason,message:t.info.message});break;case w.FP.AD_RENDER_SUCCEEDED:da({doc:null,bid:n,id:t.adId});break;default:Ie("Received x-origin event request for unsupported event: '".concat(t.event,"' (adId: '").concat(t.adId,"')"))}else we("Received x-origin event request without corresponding render request for ad '".concat(t.adId,"'"));else Ie("Cannot find ad '".concat(t.adId,"' for x-origin event request"))}};function pa(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message){var r=c(ki.getBidsReceived(),(function(e){return e.adId===n.adId}));fa.hasOwnProperty(n.message)&&fa[n.message](function(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw Ie(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}(e),n,r)}}function ga(e){var t=e.adId,n=e.adUnitCode,r=e.width,i=e.height;["div","iframe"].forEach((function(e){var a=function(e){var r=function(e,t){return Qe()?function(e){var t=c(window.googletag.pubads().getSlots(),(function(t){return c(t.getTargetingKeys(),(function(n){return d(t.getTargeting(n),e)}))}));return t?t.getSlotElementId():null}(e):function(){if(window.apntag&&_e(window.apntag.getTag))return!0}()?function(e){var t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,n),i=document.getElementById(r);return i&&i.querySelector(e)}(e+':not([style*="display: none"])');if(a){var o=a.style;o.width=r?r+"px":"100%",o.height=i+"px"}else we("Unable to locate matching page element for adUnitCode ".concat(n,".  Can't resize it to ad's dimensions.  Please review setup."))}))}Object.assign(fa,{"Prebid Native":function(e,t,n){var r,i,a;if(null!=n)switch(la.has(n)||(la.add(n),ki.addWinningBid(n),Mt(ca,n)),t.action){case"assetRequest":e(function(e,t){var n=e.assets.map((function(e){return function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n}(w.FY,e)}));return Xi(e,t,n)}(t,n));break;case"allAssetRequest":e(function(e,t){return Xi(e,t,null)}(t,n));break;case"resizeNativeHeight":n.height=t.height,n.width=t.width,ga(n);break;default:r=t,a=(i=n).native.ortb||ta(i.native),"click"===r.action?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).fetchURL,r=void 0===n?Me:n;if(t){var i,a=(e.assets||[]).filter((function(e){return e.link})).reduce((function(e,t){return e[t.id]=t.link,e}),{}),o=(null===(i=e.link)||void 0===i?void 0:i.clicktrackers)||[],s=a[t],d=o;s&&(d=s.clicktrackers||[]),d.forEach((function(e){return r(e)}))}else{var c;((null===(c=e.link)||void 0===c?void 0:c.clicktrackers)||[]).forEach((function(e){return r(e)}))}}(a,null==r?void 0:r.assetId):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.runMarkup,r=void 0===n?function(e){return We(e)}:n,i=t.fetchURL,a=void 0===i?Me:i,o=(e.eventtrackers||[]).filter((function(e){return e.event===Wi})).reduce((function(e,t){return Li.hasOwnProperty(t.method)&&e[Li[t.method]].push(t.url),e}),{img:[],js:[]}),s=o.img,d=o.js;e.imptrackers&&(s=s.concat(e.imptrackers)),s.forEach((function(e){return a(e)})),d=d.map((function(e){return'<script async src="'.concat(e,'"><\/script>')})),e.jstracker&&(d=d.concat([e.jstracker])),d.length&&r(d.join("\n"))}(a),r.action}else Ie("Cannot find ad '".concat(t.adId,"' for x-origin event request"))}});var ma=[],va=1;k.getConfig("ttlBuffer",(function(e){"number"==typeof e.ttlBuffer?va=e.ttlBuffer:Ie("Invalid value for ttlBuffer",e.ttlBuffer)}));var ha="targetingControls.allowTargetingKeys",ba="targetingControls.addTargetingKeys",ya='Only one of "'.concat(ha,'" or "').concat(ba,'" can be set'),wa=Object.keys(w.TD).map((function(e){return w.TD[e]})),Ia={isActualBid:function(e){return e.getStatusCode()===w.Q_.Q},isBidNotExpired:function(e){return e.responseTimestamp+1e3*(e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:va))>st()},isUnusedBid:function(e){return e&&(e.status&&!d([w.UE.fe],e.status)||!e.status)}};function xa(e){return!Object.values(Ia).some((function(t){return!t(e)}))}var Ca=rn("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!r){var i=[],a=k.getConfig("sendBidsControl.dealPrioritization"),s=ut(e,"adUnitCode");return Object.keys(s).forEach((function(e){var r=[],d=ut(s[e],"bidderCode");Object.keys(d).forEach((function(e){return r.push(d[e].reduce(t))})),n>0?(r=a?r.sort(Oa(!0)):r.sort((function(e,t){return t.cpm-e.cpm})),i.push.apply(i,o(r.slice(0,n)))):i.push.apply(i,o(r))})),i}return e}));function Oa(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}var Ta=function(e){var t={},n={};function r(e,t){return e.adserverTargeting&&t&&(Ae(t)&&d(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function a(e,t){if(!0===k.getConfig("targetingControls.alwaysIncludeDeals")){var n=wa.concat(Ui);return Ca(t,$e).map((function(t){if(t.dealId&&r(t,e))return i({},t.adUnitCode,C(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]}))))})).filter((function(e){return e}))}return[]}function s(e,t){var n=Object.assign({},w.TD,w.FY),r=Object.keys(n),i={};ye("allowTargetingKeys - allowed keys [ ".concat(t.map((function(e){return n[e]})).join(", ")," ]")),e.map((function(e){var a=Object.keys(e)[0],o=e[a].filter((function(e){var a=Object.keys(e)[0],o=0===r.filter((function(e){return 0===a.indexOf(n[e])})).length||c(t,(function(e){var t=n[e];return 0===a.indexOf(t)}));return i[a]=!o,o}));e[a]=o}));var a=Object.keys(i).filter((function(e){return i[e]}));return ye("allowTargetingKeys - removed keys [ ".concat(a.join(", ")," ]")),e.filter((function(e){return e[Object.keys(e)[0]].length>0}))}function u(e,t){var n=rt(e);return Object.keys(n).map((function(e){return{adUnitCode:e,adserverTargeting:n[e]}})).sort(Oa()).reduce((function(e,r,i,a){var o,s=(o=r.adserverTargeting,Object.keys(o).reduce((function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(o[t]),"%26")}),""));i+1===a.length&&(s=s.slice(0,-3));var d=r.adUnitCode,c=s.length;return c<=t?(t-=c,ye("AdUnit '".concat(d,"' auction keys comprised of ").concat(c," characters.  Deducted from running threshold; new limit is ").concat(t),n[d]),e[d]=n[d]):we("The following keys for adUnitCode '".concat(d,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(c,", the current allotted amount was ").concat(t,".\n"),n[d]),i+1===a.length&&0===Object.keys(e).length&&Ie("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}function l(e){var t=e.map((function(e){return i({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return i({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))})).reduce((function(e,t){return Object.assign(t,e)}),{}))})).reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=Object.assign({},e[n],t[n]),e}),{});return t}function f(t){return"string"==typeof t?[t]:Ae(t)?t:e.getAdUnitCodes()||[]}function p(){var t=e.getBidsReceived();if(k.getConfig("useBidCache")){var r=k.getConfig("bidCacheFilterFunction");"function"==typeof r&&(t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId||!!r(e)})))}else t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId}));return t=t.filter((function(e){return y(e,"video.context")!==Mn})).filter(xa),Ca(t,Ze)}function g(e,n){var r=t.getWinningBids(e,n),a=m();return r=r.map((function(e){return i({},e.adUnitCode,Object.keys(e.adserverTargeting).filter((function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===a.indexOf(t)})).reduce((function(t,n){var r=[e.adserverTargeting[n]],a=i({},n.substring(0,20),r);if(n===w.TD.DEAL){var s=i({},"".concat(n,"_").concat(e.bidderCode).substring(0,20),r);return[].concat(o(t),[a,s])}return[].concat(o(t),[a])}),[]))})),r}function m(){return e.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(wa).filter(Ge)}function v(e,t,n,r){return Object.keys(t.adserverTargeting).filter(h()).forEach((function(n){e.length&&e.filter(function(e){return function(n){return n.adUnitCode===t.adUnitCode&&n.adserverTargeting[e]}}(n)).forEach(function(e){return function(n){Ae(n.adserverTargeting[e])||(n.adserverTargeting[e]=[n.adserverTargeting[e]]),n.adserverTargeting[e]=n.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(Ge),delete t.adserverTargeting[e]}}(n))})),e.push(t),e}function h(){var e=m();return e=e.concat(Ui),function(t){return-1===e.indexOf(t)}}function b(e){return i({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(h()).map((function(t){return i({},t.substring(0,20),[e.adserverTargeting[t]])})))}function I(e,t){return t.filter((function(t){return d(e,t.adUnitCode)})).map((function(e){return Object.assign({},e)})).reduce(v,[]).map(b).filter((function(e){return e}))}function x(e,t){var n=wa.concat(Ui),a=k.getConfig("sendBidsControl.bidLimit"),o=Ca(t,$e,a),s=k.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),d=s?s.map((function(e){return w.TD[e]})):n;return o.map((function(t){if(r(t,e))return i({},t.adUnitCode,C(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]&&-1!==d.indexOf(e)}))))})).filter((function(e){return e}))}function C(e,t){return t.map((function(t){return i({},"".concat(t,"_").concat(e.bidderCode).substring(0,20),[e.adserverTargeting[t]])}))}function O(t){function n(e){return y(e,w.k2.xn)}return e.getAdUnits().filter((function(e){return d(t,e.code)&&n(e)})).map((function(e){return i({},e.code,function(e){var t=n(e);return Object.keys(t).map((function(e){return Se(t[e])&&(t[e]=t[e].split(",").map((function(e){return e.trim()}))),Ae(t[e])||(t[e]=[t[e]]),i({},e,t[e])}))}(e))}))}return t.setLatestAuctionForAdUnit=function(e,t){n[e]=t},t.resetPresetTargeting=function(t,n){if(Qe()){var r=f(t),i=e.getAdUnits().filter((function(e){return d(r,e.code)})),a=ma.reduce((function(e,t){return e[t]=null,e}),{});window.googletag.pubads().getSlots().forEach((function(e){var t=_e(n)&&n(e);i.forEach((function(n){(n.code===e.getAdUnitPath()||n.code===e.getSlotElementId()||_e(t)&&t(n.code))&&e.updateTargetingFromMap(a)}))}))}},t.resetPresetTargetingAST=function(e){f(e).forEach((function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var n=Object.keys(t.keywords),r={};n.forEach((function(e){d(ma,e.toLowerCase())||(r[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:r})}}))},t.getAllTargeting=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p(),n=f(e),r=g(n,t).concat(I(n,t)).concat(k.getConfig("enableSendAllBids")?x(n,t):a(n,t)).concat(O(n));r.map((function(e){Object.keys(e).map((function(t){e[t].map((function(e){-1===ma.indexOf(Object.keys(e)[0])&&(ma=Object.keys(e).concat(ma))}))}))}));var i=Object.keys(Object.assign({},w.kF,w.FY)),o=k.getConfig(ha),d=k.getConfig(ba);if(null!=d&&null!=o)throw new Error(ya);o=null!=d?i.concat(d):o||i,Array.isArray(o)&&o.length>0&&(r=s(r,o)),r=l(r);var c=k.getConfig("targetingControls.auctionKeyMaxChars");return c&&(ye("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(c," characters.  Running checks on auction keys...")),r=u(r,c)),n.forEach((function(e){r[e]||(r[e]={})})),r},k.getConfig("targetingControls",(function(e){null!=y(e,ha)&&null!=y(e,ba)&&Ie(ya)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((function(n){Object.keys(e).filter(t?t(n):function(e){return function(t){return pt(e,t)}}(n)).forEach((function(t){Object.keys(e[t]).forEach((function(n){var r=e[t][n];"string"==typeof r&&-1!==r.indexOf(",")&&(r=r.split(",")),e[t][n]=r})),be("Attempting to set targeting-map for slot: ".concat(n.getSlotElementId()," with targeting-map:"),e[t]),n.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p(),n=f(e);return t.filter((function(e){return d(n,e.adUnitCode)})).filter((function(e){return!0===un.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return e.adUnitCode})).filter(Ge).map((function(e){return t.filter((function(t){return t.adUnitCode===e?t:null})).reduce($e)}))},t.setTargetingForAst=function(e){var n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){Ie("unable to reset targeting for AST"+e)}Object.keys(n).forEach((function(e){return Object.keys(n[e]).forEach((function(t){if(be("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),Se(n[e][t])||Ae(n[e][t])){var r={};t.search(/pt[0-9]/)<0?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}}))}))},t.isApntagDefined=function(){if(window.apntag&&_e(window.apntag.setKeywords))return!0},t}(ki),Ea="__pbjs_debugging__";function ka(){return a().installedModules.includes("debugging")}function _a(e){return new H((function(t){Vt(e,"debugging",t)}))}function Sa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,n=void 0===t?ka:t,r=e.script,i=void 0===r?_a:r,o=null;return function(){return null==o&&(o=new H((function(e,t){setTimeout((function(){if(n())e();else{var r="https://cdn.jsdelivr.net/npm/prebid.js@7.31.0/dist/debugging-standalone.js";be('Debugging module not installed, loading it from "'.concat(r,'"...')),a()._installDebugging=!0,i(r).then((function(){a()._installDebugging({DEBUG_KEY:Ea,hook:rn,config:k,createBid:Vn,logger:xe("DEBUG:")})})).then(e,t)}}))}))),o}}var Aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,n=void 0===t?Sa():t,r=e.hook,i=void 0===r?on("requestBids"):r,a=null,o=!1;function s(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(a||H.resolve()).then((function(){return e.apply(t,r)}))}function d(){o||(a=n(),i.before(s,99),o=!0)}function c(){i.getHooks({hook:s}).remove(),o=!1}function u(){a=null,c()}return{enable:d,disable:c,reset:u}}();Aa.reset,k.getConfig("debugging",(function(e){var t=e.debugging;null!=t&&t.enabled?Aa.enable():Aa.disable()}));var ja=An(),Pa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=new Map,r=function(){var r=t.apply(this,arguments);return n.has(r)||n.set(r,e.apply(this,arguments)),n.get(r)};return r.clear=n.clear.bind(n),r}((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!ja.cookiesAreEnabled())return e;var t,n,r=e.split(".");if(2===r.length)return e;var i=-2,a="_rdc".concat(Date.now()),o="writeable";do{t=r.slice(i).join(".");var s=new Date(st()+1e4).toUTCString();ja.setCookie(a,o,s,"Lax",t,void 0);var d=ja.getCookie(a,void 0);d===o?(n=!1,ja.setCookie(a,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,t,void 0)):(i+=-1,n=Math.abs(i)<=r.length)}while(n);return t})),Ua=["architecture","bitness","model","platformVersion","fullVersionList"],Ra=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n=Re(t)?null:Object.freeze(Da(1,t));return function(){return n}}(),Ba=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,n={},r=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua;if(!r.has(e)){var i=Array.from(e);i.sort(),r.set(e,i.join("|"))}var a=r.get(e);if(!n.hasOwnProperty(a))try{n[a]=t.getHighEntropyValues(e).then((function(e){return Re(e)?null:Object.freeze(Da(2,e))})).catch((function(){return null}))}catch(e){n[a]=H.resolve(null)}return n[a]}}();function Da(e,t){function n(e,t){var n={brand:e};return Se(t)&&!Be(t)&&(n.version=t.split(".")),n}var r={source:e};return t.platform&&(r.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(r.browsers=(t.fullVersionList||t.brands).map((function(e){return n(e.brand,e.version)}))),t.hasOwnProperty("mobile")&&(r.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((function(e){var n=t[e];Se(n)&&(r[e]=n)})),r}var qa={getRefererInfo:Ar,findRootDomain:Pa,getWindowTop:me,getWindowSelf:ve,getHighEntropySUA:Ba,getLowEntropySUA:Ra},Na=rn("sync",(function(e){return H.all([e,(t=k.getConfig("firstPartyData.uaHints"),Array.isArray(t)&&0===t.length?H.resolve(qa.getLowEntropySUA()):qa.getHighEntropySUA(t)).catch((function(){return null}))]).then((function(e){var t=r(e,2),n=t[0],i=t[1];return Object.entries(Fa).forEach((function(e){var t=r(e,2),i=t[0],a=(0,t[1])();a&&Object.keys(a).length>0&&(n[i]=St({},a,n[i]))})),i&&At(n,"device.sua",Object.assign({},i,n.device.sua)),n}));var t}));function za(e){try{return e(qa.getWindowTop())}catch(t){return e(qa.getWindowSelf())}}var Fa={site:function(){var e,t,n,r,i=qa.getRefererInfo(),a=Sr(i.page,{noLeadingWww:!0}),o=null===(e=za((function(e){return e.document.querySelector("meta[name='keywords']")})))||void 0===e||null===(t=e.content)||void 0===t||null===(n=t.replace)||void 0===n?void 0:n.call(t,/\s/g,"");return lt(r={page:i.page,ref:i.ref,domain:a,keywords:o,publisher:{domain:qa.findRootDomain(a)}},Object.keys(r))},device:function(){return za((function(e){return{w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()}}))},regs:function(){var e={};za((function(e){return e.navigator.globalPrivacyControl}))&&At(e,"ext.gpc",1);var t=k.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}},Ma=a(),La=Un.triggerUserSyncs,Wa=w.FP,Ya=Wa.ADD_AD_UNITS,Ka=Wa.BID_WON,Ga=Wa.REQUEST_BIDS,Ha=Wa.SET_TARGETING,Va=Wa.STALE_RENDER,Ja=w.q_,Xa=Ja.PREVENT_WRITING_ON_MAIN_DOCUMENT,Qa=Ja.NO_AD,$a=Ja.EXCEPTION,Za=Ja.CANNOT_FIND_AD,eo=Ja.MISSING_DOC_OR_ADID,to={bidWon:function(e){if(qe(ki.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(He).filter(Ge),e))return!0;Ie('The "'+e+'" placement is not defined.')}};function no(e,t,n){e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t,e.defaultView.frameElement.height=n)}function ro(e,t){var n=[];return Ae(e)&&(t?e.length===t:e.length>0)&&(e.every((function(e){return It(e,2)}))?n=e:It(e,2)&&n.push(e)),n}function io(e){var t=rt(e),n=t.mediaTypes.banner,r=ro(n.sizes);return r.length>0?(n.sizes=r,t.sizes=r):(Ie("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function ao(e){var t=rt(e),n=t.mediaTypes.video;if(n.playerSize){var r="number"==typeof n.playerSize[0]?2:1,i=ro(n.playerSize,r);i.length>0?(2===r&&ye("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=i,t.sizes=i):(Ie("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}function oo(e){var t=rt(e),n=t.mediaTypes.native;if(n.ortb){var r=Object.keys(w.FY).filter((function(e){return w.FY[e].includes("hb_native_")})),i=Object.keys(n).filter((function(e){return r.includes(e)}));i.length>0&&(Ie("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(i," keys from request.")),i.forEach((function(e){return delete t.mediaTypes.native[e]})))}return n.image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&(Ie("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&(Ie("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&(Ie("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}function so(e,t){var n=y(e,"mediaTypes.".concat(t,".pos"));if(!je(n)||isNaN(n)||!isFinite(n)){var r="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");we(r),Mt(w.FP.AUCTION_DEBUG,{type:"WARNING",arguments:r}),delete e.mediaTypes[t].pos}return e}function co(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},n=e.mediaTypes,r=e.bids;return null==r||Ae(r)?null==r&&null==e.ortb2Imp?(Ie(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=r&&0!==r.length||(e.bids=[{bidder:null}],be(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):(Ie(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):(Ie(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}!function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=Aa,n=null;try{n=e.getItem(Ea)}catch(e){}null!==n&&t.enable()}}(),Ma.bidderSettings=Ma.bidderSettings||{},Ma.libLoaded=!0,Ma.version="v7.31.0",ye("Prebid.js v7.31.0 loaded"),Ma.installedModules=Ma.installedModules||[],Ma.adUnits=Ma.adUnits||[],Ma.triggerUserSyncs=La;var uo={validateAdUnit:co,validateBannerMediaType:io,validateVideoMediaType:ao,validateSizes:ro};Object.assign(uo,{validateNativeMediaType:oo});var lo,fo=rn("sync",(function(e){var t=[];return e.forEach((function(e){if(null!=(e=co(e))){var n,r,i,a=e.mediaTypes;a.banner&&(n=io(e),a.banner.hasOwnProperty("pos")&&(n=so(n,"banner"))),a.video&&(r=ao(n||e),a.video.hasOwnProperty("pos")&&(r=so(r,"video"))),a.native&&(i=oo(r||n||e));var o=Object.assign({},n,r,i);t.push(o)}})),t}),"checkAdUnitSetup");function po(e){var t=ki[e]().filter(oe.call(nt,this,ki.getAdUnitCodes())),n=ki.getLastAuctionId();return t.map((function(e){return e.adUnitCode})).filter(Ge).map((function(e){return t.filter((function(t){return t.auctionId===n&&t.adUnitCode===e}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return i({},e[0].adUnitCode,{bids:e})})).reduce((function(e,t){return Object.assign(e,t)}),{})}function go(e,t,n){var r=t.querySelector(n);e.parentNode&&e.parentNode===r||ze(e,t,n)}Ma.getAdserverTargetingForAdUnitCodeStr=function(e){if(ye("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=Ma.getAdserverTargetingForAdUnitCode(e);return fe(t)}be("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},Ma.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=ki.getAllBidsForAdUnitCode(e).filter(xa);return t.length?t.reduce($e):{}}be("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},Ma.getAdserverTargetingForAdUnitCode=function(e){return Ma.getAdserverTargeting(e)[e]},Ma.getAdserverTargeting=function(e){return ye("Invoking pbjs.getAdserverTargeting",arguments),Ta.getAllTargeting(e)},Ma.getConsentMetadata=function(){return ye("Invoking pbjs.getConsentMetadata"),{gdpr:Yr.getConsentMeta(),usp:Kr.getConsentMeta(),gpp:Gr.getConsentMeta(),coppa:!!k.getConfig("coppa")}},Ma.getNoBids=function(){return ye("Invoking pbjs.getNoBids",arguments),po("getNoBids")},Ma.getNoBidsForAdUnitCode=function(e){return{bids:ki.getNoBids().filter((function(t){return t.adUnitCode===e}))}},Ma.getBidResponses=function(){return ye("Invoking pbjs.getBidResponses",arguments),po("getBidsReceived")},Ma.getBidResponsesForAdUnitCode=function(e){return{bids:ki.getBidsReceived().filter((function(t){return t.adUnitCode===e}))}},Ma.setTargetingForGPTAsync=function(e,t){if(ye("Invoking pbjs.setTargetingForGPTAsync",arguments),Qe()){var n=Ta.getAllTargeting(e);Ta.resetPresetTargeting(e,t),Ta.setTargetingForGPT(n,t),Object.keys(n).forEach((function(e){Object.keys(n[e]).forEach((function(t){"hb_adid"===t&&ki.setStatusForBids(n[e][t],w.UE.CK)}))})),Mt(Ha,n)}else Ie("window.googletag is not defined on the page")},Ma.setTargetingForAst=function(e){ye("Invoking pbjs.setTargetingForAn",arguments),Ta.isApntagDefined()?(Ta.setTargetingForAst(e),Mt(Ha,Ta.getAllTargeting())):Ie("window.apntag is not defined on the page")},Ma.renderAd=rn("async",(function(e,t,n){if(ye("Invoking pbjs.renderAd",arguments),be("Calling renderAd with adId :"+t),t)try{var r=ki.findBidByAdId(t);if(!r){var i="Error trying to write ad. Cannot find ad by given id : ".concat(t);return void sa({reason:Za,message:i,id:t})}if(r.status===w.UE.fe&&(we("Ad id ".concat(r.adId," has been rendered before")),Mt(Va,r),y(k.getConfig("auctionOptions"),"suppressStaleRender")))return;if(r.ad=at(r.ad,r.originalCpm||r.cpm),r.adUrl=at(r.adUrl,r.originalCpm||r.cpm),n&&n.clickThrough){var a=n.clickThrough;r.ad=ot(r.ad,a),r.adUrl=ot(r.adUrl,a)}ki.addWinningBid(r),Mt(Ka,r);var o=r.height,s=r.width,d=r.ad,c=r.mediaType,u=r.adUrl,l=r.renderer,f=r.adUnitCode,p=Ma.adUnits.filter((function(e){return e.code===f})),g=Ma.videoModule;if(p.video&&g)return void g.renderBid(p.video.divId,r);if(!e){var m="Error trying to write ad Id :".concat(t," to the page. Missing document");return void sa({reason:eo,message:m,id:t})}var v=document.createComment("Creative ".concat(r.creativeId," served by ").concat(r.bidder," Prebid.js Header Bidding"));if(ze(v,e,"html"),Qt(l))$t(l,r,e),go(v,e,"html"),da({doc:e,bid:r,id:t});else if(e===document&&!it()||"video"===c){var h="Error trying to write ad. Ad render call ad id ".concat(t," was prevented from writing to the main document.");sa({reason:Xa,message:h,bid:r,id:t})}else if(d)e.write(d),e.close(),no(e,s,o),go(v,e,"html"),Le(r),da({doc:e,bid:r,id:t});else if(u){var b=Te();b.height=o,b.width=s,b.style.display="inline",b.style.overflow="hidden",b.src=u,ze(b,e,"body"),no(e,s,o),go(v,e,"html"),Le(r),da({doc:e,bid:r,id:t})}else{var I="Error trying to write ad. No ad for bid response id: ".concat(t);sa({reason:Qa,message:I,bid:r,id:t})}}catch(e){var x="Error trying to write ad Id :".concat(t," to the page:").concat(e.message);sa({reason:$a,message:x,id:t})}else{var C="Error trying to write ad Id :".concat(t," to the page. Missing adId");sa({reason:eo,message:C,id:t})}})),Ma.removeAdUnit=function(e){ye("Invoking pbjs.removeAdUnit",arguments),e?(Ae(e)?e:[e]).forEach((function(e){for(var t=Ma.adUnits.length-1;t>=0;t--)Ma.adUnits[t].code===e&&Ma.adUnits.splice(t,1)})):Ma.adUnits=[]},Ma.requestBids=(lo=rn("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,i=e.adUnits,a=e.adUnitCodes,o=e.labels,s=e.auctionId,c=e.ttlBuffer,u=e.ortb2,l=e.metrics,f=e.defer;Mt(Ga);var p=n||k.getConfig("bidderTimeout");ye("Invoking pbjs.requestBids",arguments),a&&a.length?i=i.filter((function(e){return d(a,e.code)})):a=i&&i.map((function(e){return e.code}));var g={global:St({},k.getAnyConfig("ortb2")||{},u||{}),bidder:Object.fromEntries(Object.entries(k.getBidderConfig()).map((function(e){var t=r(e,2);return[t[0],t[1].ortb2]})).filter((function(e){var t=r(e,2);return t[0],null!=t[1]})))};return Na(H.resolve(g.global)).then((function(e){return g.global=e,mo({bidsBackHandler:t,timeout:p,adUnits:i,adUnitCodes:a,labels:o,auctionId:s,ttlBuffer:c,ortb2Fragments:g,metrics:l,defer:f})}))}),"requestBids"),function(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((function(t){return[t,{get:function(){return e[t]}}]})))),t}(lo,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.adUnits||Ma.adUnits;return e.adUnits=Ae(t)?t.slice():[t],e.metrics=dr(),e.metrics.checkpoint("requestBids"),e.defer=V({promiseFactory:function(e){return new Promise(e)}}),lo.call(this,e),e.defer.promise})));var mo=rn("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,r=e.adUnits,i=e.ttlBuffer,a=e.adUnitCodes,o=e.labels,s=e.auctionId,c=e.ortb2Fragments,u=e.metrics,l=e.defer,f=Vr(k.getConfig("s2sConfig")||[]);function p(e,n,r){if("function"==typeof t)try{t(e,n,r)}catch(e){Ie("Error executing bidsBackHandler",null,e)}l.resolve({bids:e,timedOut:n,auctionId:r})}if((r=or(u).measureTime("requestBids.validate",(function(){return fo(r)}))).forEach((function(e){var t,n,r=Object.keys(e.mediaTypes||{banner:"banner"}),a=e.bids.map((function(e){return e.bidder})),o=ei.bidderRegistry,s=a.filter((function(e){return!f.has(e)})),c=(null===(t=e.ortb2Imp)||void 0===t||null===(n=t.ext)||void 0===n?void 0:n.tid)||ce();e.transactionId=c,null==i||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=i),At(e,"ortb2Imp.ext.tid",c),s.forEach((function(t){var n=o[t],i=n&&n.getSpec&&n.getSpec(),a=i&&i.supportedMediaTypes||["banner"];r.some((function(e){return d(a,e)}))?Cr(e.code,t):(we(mt(e,t)),e.bids=e.bids.filter((function(e){return e.bidder!==t})))})),xr(e.code)})),r&&0!==r.length){var g=ki.createAuction({adUnits:r,adUnitCodes:a,callback:p,cbTimeout:n,labels:o,auctionId:s,ortb2Fragments:c,metrics:u}),m=r.length;m>15&&ye("Current auction ".concat(g.getAuctionId()," contains ").concat(m," adUnits."),r),a.forEach((function(e){return Ta.setLatestAuctionForAdUnit(e,g.getAuctionId())})),g.callBids()}else be("No adUnits configured. No bids requested."),p()}),"startAuction");Ma.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(kn),n(vo),e.call(this,t)}),49),Ma.addAdUnits=function(e){ye("Invoking pbjs.addAdUnits",arguments),Ma.adUnits.push.apply(Ma.adUnits,Ae(e)?e:[e]),Mt(Ya)},Ma.onEvent=function(e,t,n){ye("Invoking pbjs.onEvent",arguments),_e(t)?!n||to[e].call(null,n)?Nt(e,t,n):Ie('The id provided is not valid for event "'+e+'" and no handler was set.'):Ie('The event handler provided is not a function and was not set on event "'+e+'".')},Ma.offEvent=function(e,t,n){ye("Invoking pbjs.offEvent",arguments),n&&!to[e].call(null,n)||zt(e,t,n)},Ma.getEvents=function(){return ye("Invoking pbjs.getEvents"),Ft()},Ma.registerBidAdapter=function(e,t){ye("Invoking pbjs.registerBidAdapter",arguments);try{ei.registerBidAdapter(e(),t)}catch(e){Ie("Error registering bidder adapter : "+e.message)}},Ma.registerAnalyticsAdapter=function(e){ye("Invoking pbjs.registerAnalyticsAdapter",arguments);try{ei.registerAnalyticsAdapter(e)}catch(e){Ie("Error registering analytics adapter : "+e.message)}},Ma.createBid=function(e){return ye("Invoking pbjs.createBid",arguments),Vn(e)};var vo=[],ho=rn("async",(function(e){e&&!Re(e)?(ye("Invoking pbjs.enableAnalytics for: ",e),ei.enableAnalytics(e)):Ie("pbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");function bo(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){Ie("Error processing command :","prebid.js",e)}}))}Ma.enableAnalytics=function(e){vo.push(ho.bind(this,e))},Ma.aliasBidder=function(e,t,n){ye("Invoking pbjs.aliasBidder",arguments),e&&t?ei.aliasBidAdapter(e,t,n):Ie("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},Ma.getAllWinningBids=function(){return ki.getAllWinningBids()},Ma.getAllPrebidWinningBids=function(){return ki.getBidsReceived().filter((function(e){return e.status===w.UE.CK}))},Ma.getHighestCpmBids=function(e){return Ta.getWinningBids(e)},Ma.markWinningBidAsUsed=function(e){var t=[];e.adUnitCode&&e.adId?t=ki.getBidsReceived().filter((function(t){return t.adId===e.adId&&t.adUnitCode===e.adUnitCode})):e.adUnitCode?t=Ta.getWinningBids(e.adUnitCode):e.adId?t=ki.getBidsReceived().filter((function(t){return t.adId===e.adId})):we("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),t.length>0&&(t[0].status=w.UE.fe)},Ma.getConfig=k.getAnyConfig,Ma.readConfig=k.readAnyConfig,Ma.mergeConfig=k.mergeConfig,Ma.mergeBidderConfig=k.mergeBidderConfig,Ma.setConfig=k.setConfig,Ma.setBidderConfig=k.setBidderConfig,Ma.que.push((function(){window.addEventListener("message",pa,!1)})),Ma.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){Ie("Error processing command :",e.message,e.stack)}else Ie("Commands written into pbjs.cmd.push must be wrapped in a function")},Ma.que.push=Ma.cmd.push,Ma.processQueue=function(){rn.ready(),bo(Ma.que),bo(Ma.cmd)};var yo=Ma;function wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Io(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wo(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xo={};k.getConfig("rubicon",(function(e){St(xo,e.rubicon)}));var Co={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160"};De(Co,(function(e,t){return Co[e]=t}));var Oo={code:"rubicon",gvlid:52,supportedMediaTypes:[Fn,zn],isBidRequestValid:function(e){if("object"!==s(e.params))return!1;for(var t=0,n=["accountId","siteId","zoneId"];t<n.length;t++)if(e.params[n[t]]=parseInt(e.params[n[t]]),isNaN(e.params[n[t]]))return Ie("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var r=jo(e,!0);return!!r&&("video"!==r||function(e){var t=!0,n=Object.prototype.toString.call([]),r={mimes:n,protocols:n,linearity:Object.prototype.toString.call(0),api:n};return Object.keys(r).forEach((function(n){Object.prototype.toString.call(y(e,"mediaTypes.video."+n))!==r[n]&&(t=!1,Ie("Rubicon: mediaTypes.video."+n+" is required and must be of type: "+r[n]))})),t}(e))},buildRequests:function(e,t){var n=[],r=e.filter((function(e){return"video"===jo(e)})).map((function(e){e.startTime=(new Date).getTime();var n={id:e.transactionId,test:k.getConfig("debug")?1:0,cur:["USD"],source:{tid:e.transactionId},tmax:t.timeout,imp:[{exp:k.getConfig("s2sConfig.defaultTtl"),id:e.adUnitCode,secure:1,ext:i({},e.bidder,e.params),video:y(e,"mediaTypes.video")||{}}],ext:{prebid:{channel:{name:"pbjs",version:pbjs.version},cache:{vastxml:{returnCreative:!0===xo.returnVast}},targeting:{includewinners:!0,includebidderkeys:!1,pricegranularity:Po(k)},bidders:{rubicon:{integration:xo.int_type||"pbjs"}}}}};"rubicon"!==e.bidder&&(n.ext.prebid.aliases=i({},e.bidder,"rubicon"));var r,o,d,c,u=a().installedModules;if(!u||u.length&&-1===u.indexOf("rubiconAnalyticsAdapter")||At(n,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),"function"!=typeof e.getFloor||xo.disableFloors)r=parseFloat(y(e,"params.floor"));else{var l;try{l=e.getFloor({currency:"USD",mediaType:"video",size:ko(e,"video")})}catch(e){Ie("Rubicon: getFloor threw an error: ",e)}r="object"!==s(l)||"USD"!==l.currency||isNaN(parseInt(l.floor))?void 0:parseFloat(l.floor)}isNaN(r)||(n.imp[0].bidfloor=r),"object"===s(e.floorData)&&(n.ext.prebid.floors={enabled:!1}),n.imp[0].ext[e.bidder].video.size_id=(d=e,c=parseInt(y(d,"params.video.size_id")),isNaN(c)?"outstream"===y(d,"mediaTypes.".concat(zn,".context"))?203:201:c),function(e,t,n){e&&("object"===s(k.getConfig("app"))?e.app=k.getConfig("app"):e.site={page:To(t,n)},"object"===s(k.getConfig("device"))&&(e.device=k.getConfig("device")),t.params.video.language&&["site","device"].forEach((function(n){e[n]&&("site"===n?e[n].content=Object.assign({language:t.params.video.language},e[n].content):e[n]=Object.assign({language:t.params.video.language},e[n]))})))}(n,e,t),function(e,t){"object"===s(e.imp[0].video)&&void 0===e.imp[0].video.skip&&(e.imp[0].video.skip=t.params.video.skip),"object"===s(e.imp[0].video)&&void 0===e.imp[0].video.skipafter&&(e.imp[0].video.skipafter=t.params.video.skipdelay),"object"===s(e.imp[0].video)&&void 0===e.imp[0].video.pos&&("atf"===t.params.position?e.imp[0].video.pos=1:"btf"===t.params.position&&(e.imp[0].video.pos=3));var n=ko(t,"video");e.imp[0].video.w=n[0],e.imp[0].video.h=n[1]}(n,e),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(o=t.gdprConsent.gdprApplies?1:0),At(n,"regs.ext.gdpr",o),At(n,"user.ext.consent",t.gdprConsent.consentString)),t.uspConsent&&At(n,"regs.ext.us_privacy",t.uspConsent);var f=y(t,"bids.0.userIdAsEids");f&&f.length&&At(n,"user.ext.eids",f);var p=k.getConfig("user.id");p&&At(n,"user.id",p),!0===k.getConfig("coppa")&&At(n,"regs.coppa",1),e.schain&&Uo(e.schain)&&At(n,"source.ext.schain",e.schain);var g=k.getConfig("multibid");return g&&At(n,"ext.prebid.multibid",g.reduce((function(e,t){var n={};return Object.keys(t).forEach((function(e){n[e.toLowerCase()]=t[e]})),e.push(n),e}),[])),_o(e,zn,n),At(n.imp[0],"ext.prebid.auctiontimestamp",t.auctionStart),n.ext.prebid.storedrequest=void 0,n.imp[0].ext.prebid.storedrequest=void 0,{method:"POST",url:"https://".concat(xo.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:n,bidRequest:e}}));if(!0!==k.getConfig("rubicon.singleRequest"))n=r.concat(e.filter((function(e){return"banner"===jo(e)})).map((function(e){var n=Oo.createSlotParams(e,t);return{method:"GET",url:"https://".concat(xo.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:Oo.getOrderedParams(n).reduce((function(e,t){var r=n[t];return Se(r)&&""!==r||je(r)?"".concat(e).concat(Ro(t,r),"&"):e}),"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})));else{var o=e.filter((function(e){return"banner"===jo(e)})).reduce((function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e}),{});n=r.concat(Object.keys(o).reduce((function(e,n){var r;return(r=o[n],10,r.map((function(e,t){return t%10==0?r.slice(t,t+10):null})).filter((function(e){return e}))).forEach((function(n){var r=Oo.combineSlotUrlParams(n.map((function(e){return Oo.createSlotParams(e,t)})));e.push({method:"GET",url:"https://".concat(xo.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:Oo.getOrderedParams(r).reduce((function(e,t){var n=r[t];return Se(n)&&""!==n||je(n)?"".concat(e).concat(Ro(t,n),"&"):e}),"")+"slots=".concat(n.length,"&rand=").concat(Math.random()),bidRequest:n})})),e}),[]))}return n},getOrderedParams:function(e){var t=/^tg_v/,n=/^tg_i/,r=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","rp_schain"].concat(Object.keys(e).filter((function(e){return r.test(e)}))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return n.test(e)}))).concat(["tk_flint","x_source.tid","l_pb_bid_id","x_source.pchain","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter((function(e){return-1===i.indexOf(e)})))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,n,r){return Object.keys(n).forEach((function(i){t.hasOwnProperty(i)||(t[i]=new Array(e.length)),t[i].splice(r,1,n[i])})),t}),{}),n=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var r=t[e].join(";"),i=r.match(n);t[e]=i?i[1]:r})),t},createSlotParams:function(e,t){e.startTime=(new Date).getTime();var n=e.params,i=ko(e,"banner"),a=r(n.latLong||[],2),o=a[0],d=a[1],u={account_id:n.accountId,site_id:n.siteId,zone_id:n.zoneId,size_id:i[0],alt_size_ids:i.slice(1).join(",")||void 0,rp_floor:(n.floor=parseFloat(n.floor))>=.01?n.floor:void 0,rp_secure:"1",tk_flint:"".concat(xo.int_type||"pbjs_lite","_v7.31.0"),"x_source.tid":e.transactionId,l_pb_bid_id:e.bidId,"x_source.pchain":n.pchain,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:n.userId,"p_geo.latitude":isNaN(parseFloat(o))?void 0:parseFloat(o).toFixed(4),"p_geo.longitude":isNaN(parseFloat(d))?void 0:parseFloat(d).toFixed(4),"tg_fl.eid":e.code,rf:To(e,t)};if("function"==typeof e.getFloor&&!xo.disableFloors){var l;try{l=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){Ie("Rubicon: getFloor threw an error: ",e)}u.rp_hard_floor="object"!==s(l)||"USD"!==l.currency||isNaN(parseInt(l.floor))?void 0:l.floor}var f={1:"atf",3:"btf"}[y(e,"mediaTypes.banner.pos")]||"";u.p_pos="atf"===n.position||"btf"===n.position?n.position:f;var p=k.getConfig("user.id");return p&&(u.ppuid=p),e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if("adserver.org"===e.source?(u.tpid_tdid=e.uids[0].id,u["eid_adserver.org"]=e.uids[0].id):"liveintent.com"===e.source?(u["tpid_liveintent.com"]=e.uids[0].id,u["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(u["tg_v.LIseg"]=e.ext.segments.join(","))):"liveramp.com"===e.source?u.x_liverampidl=e.uids[0].id:"id5-sync.com"===e.source?u["eid_id5-sync.com"]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype,"^").concat(e.uids[0].ext&&e.uids[0].ext.linkType||""):u["eid_".concat(e.source)]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype||""),!u.ppuid){var t=c(e.uids,(function(e){return e.ext&&"ppuid"===e.ext.stype}));t&&t.id&&(u.ppuid=t.id)}}catch(t){we("Rubicon: error reading eid:",e,t)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(u.gdpr=Number(t.gdprConsent.gdprApplies)),u.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(u.us_privacy=encodeURIComponent(t.uspConsent)),u.rp_maxbids=t.bidLimit||1,_o(e,Fn,u),!0===k.getConfig("coppa")&&(u.coppa=1),e.schain&&Uo(e.schain)&&(u.rp_schain=Oo.serializeSupplyChain(e.schain)),u},serializeSupplyChain:function(e){if(!Uo(e))return"";var t=e.ver,n=e.complete,r=e.nodes;return"".concat(t,",").concat(n,"!").concat(Oo.serializeSupplyChainNodes(r))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map((function(e){return t.map((function(t){return encodeURIComponent(e[t]||"")})).join(",")})).join("!")},interpretResponse:function(e,t){var n=t.bidRequest;if(!(e=e.body)||"object"!==s(e))return[];if(e.seatbid){var i=y(e,"ext.errors.rubicon");Array.isArray(i)&&i.length>0&&we("Rubicon: Error in video response");var a=[];return e.seatbid.forEach((function(t){(t.bid||[]).forEach((function(r){var i={requestId:n.bidId,currency:e.cur||"USD",creativeId:r.crid,cpm:r.price||0,bidderCode:t.seat,ttl:300,netRevenue:!1!==xo.netRevenue,width:r.w||y(n,"mediaTypes.video.w")||y(n,"params.video.playerWidth"),height:r.h||y(n,"mediaTypes.video.h")||y(n,"params.video.playerHeight")};r.id&&(i.seatBidId=r.id),r.dealid&&(i.dealId=r.dealid),r.adomain&&At(i,"meta.advertiserDomains",Array.isArray(r.adomain)?r.adomain:[r.adomain]),y(r,"ext.bidder.rp.advid")&&At(i,"meta.advertiserId",r.ext.bidder.rp.advid);var o=y(e,"ext.responsetimemillis.rubicon");if(n&&o&&(n.serverResponseTimeMs=o),y(r,"ext.prebid.type")===zn){i.mediaType=zn,At(i,"meta.mediaType",zn);var d=y(r,"ext.prebid.targeting");d&&"object"===s(d)&&(i.adserverTargeting=d),r.ext.prebid.cache&&"object"===s(r.ext.prebid.cache.vastXml)&&r.ext.prebid.cache.vastXml.cacheId&&r.ext.prebid.cache.vastXml.url?(i.videoCacheKey=r.ext.prebid.cache.vastXml.cacheId,i.vastUrl=r.ext.prebid.cache.vastXml.url):d&&d.hb_uuid&&d.hb_cache_host&&d.hb_cache_path&&(i.videoCacheKey=d.hb_uuid,i.vastUrl="https://".concat(d.hb_cache_host).concat(d.hb_cache_path,"?uuid=").concat(d.hb_uuid)),r.adm&&(i.vastXml=r.adm),r.nurl&&(i.vastUrl=r.nurl),!i.vastUrl&&r.nurl&&(i.vastUrl=r.nurl),"outstream"===y(n,"mediaTypes.video.context").toLowerCase()&&(i.renderer=function(e){var t=Xt.install({id:e.adId,url:xo.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:xo.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(Eo)}catch(e){we("Prebid Error calling setRender on renderer",e)}return t}(i))}else we("Rubicon: video response received non-video media type");a.push(i)}))})),a}var o,d=e.ads,c=0;return"object"!==s(n)||Array.isArray(n)||"video"!==jo(n)||"object"!==s(d)||(d=d[n.adUnitCode]),!Array.isArray(d)||d.length<1?[]:d.reduce((function(t,i,a){if(i.impression_id&&o===i.impression_id?c++:o=i.impression_id,"ok"!==i.status)return t;var d,u,l=Array.isArray(n)?n[a-c]:n;if(l&&"object"===s(l)){var f={requestId:l.bidId,currency:"USD",creativeId:i.creative_id||"".concat(i.network||"","-").concat(i.advertiser||""),cpm:i.cpm||0,dealId:i.deal,ttl:300,netRevenue:!1!==xo.netRevenue,rubicon:{advertiserId:i.advertiser,networkId:i.network},meta:{advertiserId:i.advertiser,networkId:i.network,mediaType:Fn}};if(i.creative_type&&(f.mediaType=i.creative_type),i.adomain&&(f.meta.advertiserDomains=Array.isArray(i.adomain)?i.adomain:[i.adomain]),i.creative_type===zn)f.width=l.params.video.playerWidth,f.height=l.params.video.playerHeight,f.vastUrl=i.creative_depot_url,f.impression_id=i.impression_id,f.videoCacheKey=i.impression_id;else{f.ad=(d=i.script,u=i.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(u,"'>\n<script type='text/javascript'>").concat(d,"<\/script>\n</div>\n</body>\n</html>"));var p=r(Co[i.size_id].split("x").map((function(e){return Number(e)})),2);f.width=p[0],f.height=p[1]}f.rubiconTargeting=(Array.isArray(i.targeting)?i.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:l.adUnitCode}),t.push(f)}else Ie("Rubicon: bidRequest undefined at index position:".concat(a),n,e);return t}),[]).sort((function(e,t){return(t.cpm||0)-(e.cpm||0)}))},getUserSyncs:function(e,t,n,r){if(!Bo&&e.iframeEnabled){var i={};return n&&("boolean"==typeof n.gdprApplies&&(i.gdpr=Number(n.gdprApplies)),"string"==typeof n.consentString&&(i.gdpr_consent=n.consentString)),r&&(i.us_privacy=encodeURIComponent(r)),i=Object.keys(i).length?"?".concat(Tt(i)):"",Bo=!0,{type:"iframe",url:"https://".concat(xo.syncHost||"eus",".rubiconproject.com/usync.html")+i}}},transformBidParams:function(e,t){return wt({accountId:"number",siteId:"number",zoneId:"number"},e)}};function To(e,t){var n;return n=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?n.replace(/^http:/i,"https:"):n}function Eo(e){var t,n=document.getElementById(e.adUnitCode);(t=n.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),function(e){var t=e.querySelector("script[id^='sas_script']"),n=t&&t.nextSibling;n&&"iframe"===n.localName&&n.style.setProperty("display","none")}(n);var r=e.renderer.getConfig();e.renderer.push((function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:n,align:r.align||"center",position:r.position||"append"},closeButton:r.closeButton||!1,label:r.label||void 0,collapse:r.collapse||!0})}))}function ko(e,t){var n=e.params;if("video"===t){var r=[];return n.video&&n.video.playerWidth&&n.video.playerHeight?r=[n.video.playerWidth,n.video.playerHeight]:Array.isArray(y(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?r=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(r=e.sizes[0]),r}var i=[];return Array.isArray(n.sizes)?i=n.sizes:void 0!==y(e,"mediaTypes.banner.sizes")?i=So(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=So(e.sizes):we("Rubicon: no sizes are setup or found"),function(e){var t=[15,2,9];return e.sort((function(e,n){var r=t.indexOf(e),i=t.indexOf(n);return r>-1||i>-1?-1===r?1:-1===i?-1:r-i:e-n}))}(i)}function _o(e,t,n){var r={user:{ext:{data:Io({},e.params.visitor)}},site:{ext:{data:Io({},e.params.inventory)}}};e.params.keywords&&(r.site.keywords=Ae(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var i=St({},e.ortb2||{},r),a=y(e.ortb2Imp,"ext")||{},o=y(e.ortb2Imp,"ext.data")||{},d=y(e,"ortb2Imp.ext.gpid"),c={user:[4],site:[1,2,5,6]},u={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},l=function(e,t,n){return"data"===t&&Array.isArray(e)?e.filter((function(e){return e.segment&&y(e,"ext.segtax")&&c[n]&&-1!==c[n].indexOf(y(e,"ext.segtax"))})).map((function(e){var t=e.segment.filter((function(e){return e.id})).reduce((function(e,t){return e.push(t.id),e}),[]);if(t.length>0)return t.toString()})).toString():"object"===s(e)&&!Array.isArray(e)||void 0===e?void 0:Array.isArray(e)?e.filter((function(e){if("object"!==s(e)&&void 0!==e)return e.toString();we("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString()},f=function(e,t,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=l(e,r,t),o=u[r]&&i?"".concat(u[r]):"data"===r?"".concat(u[t],"iab"):"".concat(u[t]).concat(r);n[o]=n[o]?n[o].concat(",",a):a};t===Fn?(["site","user"].forEach((function(e){Object.keys(i[e]).forEach((function(t){"site"===e&&"content"===t&&i[e][t].data?f(i[e][t].data,e,"data"):"ext"!==t?f(i[e][t],e,t):i[e][t].data&&Object.keys(i[e].ext.data).forEach((function(t){f(i[e].ext.data[t],e,t,!1)}))}))})),Object.keys(o).forEach((function(e){"adserver"!==e?f(o[e],"site",e):"gam"===o[e].name&&f(o[e].adslot,name,e)})),d&&(n.p_gpid=d),n["tg_i.pbadslot"]&&delete n["tg_i.dfp_ad_unit_code"]):(Object.keys(a).length&&St(n.imp[0].ext,a),d&&(n.imp[0].ext.gpid=d),St(n,i))}function So(e){return pe(e).reduce((function(e,t){var n=parseInt(Co[t],10);return n&&e.push(n),e}),[])}function Ao(e){var t=void 0!==y(e,"mediaTypes.".concat(zn)),n=void 0!==y(e,"mediaTypes.".concat(Fn)),r="object"!==s(y(e,"params.video"));return n&&r&&(t=!1),t&&r&&At(e,"params.video",{}),t}function jo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Ao(e)?-1===["outstream","instream"].indexOf(y(e,"mediaTypes.".concat(zn,".context")))?void(t&&Ie("Rubicon: mediaTypes.video.context must be outstream or instream")):ko(e,"video").length<2?void(t&&Ie("Rubicon: could not determine the playerSize of the video")):(t&&be("Rubicon: making video request for adUnit",e.adUnitCode),"video"):0===ko(e,"banner").length?void(t&&Ie("Rubicon: could not determine the sizes for banner request")):(t&&be("Rubicon: making banner request for adUnit",e.adUnitCode),"banner")}function Po(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}function Uo(e){var t=!1,n=["asi","sid","hp"];return e.nodes?((t=e.nodes.reduce((function(e,t){return e?n.every((function(e){return t.hasOwnProperty(e)})):e}),!0))||Ie("Rubicon: required schain params missing"),t):t}function Ro(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var Bo=!1;function Do(e){return null==e||!e.gdprApplies||!0===y(e,"vendorData.purpose.consents.1")}pr(Oo),window.pbjs.installedModules.push("rubiconBidAdapter");var qo="appnexus",No=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],zo=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay"],Fo=["age","externalUid","segments","gender","dnt","language"],Mo=["geo","device_id"],Lo=["enabled","dongle","member_id","debug_timeout"],Wo={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},Yo={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},Ko={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},Go=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,Ho=jn({gvlid:32,bidderCode:qo}),Vo={code:qo,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"pagescience"},{code:"defymedia"},{code:"gourmetads"},{code:"matomy"},{code:"featureforward"},{code:"oftmedia"},{code:"adasta"},{code:"beintoo",gvlid:618}],supportedMediaTypes:[Fn,zn,Nn],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,t){var n,r,i=(e=ea(e)).map(Qo),a=c(e,Zo),s={};!0===k.getConfig("coppa")&&(s={coppa:!0}),a&&Object.keys(a.params.user).filter((function(e){return d(Fo,e)})).forEach((function(e){var t=ht(e);if("segments"===e&&Ae(a.params.user[e])){var n=[];a.params.user[e].forEach((function(e){je(e)?n.push({id:e}):Pe(e)&&n.push(e)})),s[t]=n}else"segments"!==e&&(s[t]=a.params.user[e])}));var u,l=c(e,ts);l&&l.params&&l.params.app&&(u={},Object.keys(l.params.app).filter((function(e){return d(Mo,e)})).forEach((function(e){return u[e]=l.params.app[e]})));var f,p=c(e,ns);p&&p.params&&l.params.app&&l.params.app.id&&(f={appid:p.params.app.id});var g={},m={},v=Ho.getCookie("apn_prebid_debug")||null;if(v)try{g=JSON.parse(v)}catch(e){Ie("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(Wo).forEach((function(e){var t=Ee(e);Se(t)&&""!==t&&(g[Wo[e]]=t,g.enabled=!0)})),g=wt({member_id:"number",debug_timeout:"number"},g);var h=c(e,rs);h&&h.debug&&(g=h.debug)}g&&g.enabled&&Object.keys(g).filter((function(e){return d(Lo,e)})).forEach((function(e){m[e]=g[e]}));var b=c(e,es),w=b?parseInt(b.params.member,10):0,I=e[0].schain,x=c(e,as),C={tags:o(i),user:s,sdk:{source:"pbjs",version:"7.31.0"},schain:I};x&&(C.iab_support={omidpn:"Appnexus",omidpv:"7.31.0"}),w>0&&(C.member_id=w),l&&(C.device=u),p&&(C.app=f);var O,T,E=rt(t&&t.ortb2),_=(O=E,T=[],["site.keywords","site.content.keywords","user.keywords","app.keywords","app.content.keywords"].forEach((function(e){var t=y(O,e);Se(t)&&T.push(t)})),T).map((function(e){return ls(e)})),S=rt(k.getConfig("appnexusAuctionKeywords"))||{};Object.keys(S).forEach((function(e){(Se(S[e])||je(S[e]))&&(S[e]=[S[e]])}));var A=yt(St.apply(void 0,[{},S].concat(o(_))));if(A.length>0&&(A.forEach(Xo),C.keywords=A),k.getConfig("adpod.brandCategoryExclusion")&&(C.brand_category_uniqueness=!0),m.enabled&&(C.debug=m,ye("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(m,null,4))),t&&t.gdprConsent&&(C.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var j=t.gdprConsent.addtlConsent,P=j.substring(j.indexOf("~")+1);C.gdpr_consent.addtl_consent=P.split(".").map((function(e){return parseInt(e,10)}))}if(t&&t.uspConsent&&(C.us_privacy=t.uspConsent),null!=t&&t.gppConsent?C.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(r=n.regs)&&void 0!==r&&r.gpp&&(C.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var U={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")},R=t.refererInfo.canonicalUrl;Se(R)&&""!==R&&(U.rd_can=R),C.referrer_detection=U}if(c(e,is)&&e.filter(is).forEach((function(e){var t=function(e,t){var n,r=t.mediaTypes.video,i=r.durationRangeSec,a=r.requireExactDuration,s=function(e){var t,n=e.adPodDurationSec,r=e.durationRangeSec,i=e.requireExactDuration,a=(t=r,Math.min.apply(Math,o(t))),s=Math.floor(n/a);return i?Math.max(s,r.length):s}(t.mediaTypes.video),d=(n=i,Math.max.apply(Math,o(n))),c=e.filter((function(e){return e.uuid===t.bidId})),u=xt.apply(void 0,o(c).concat([s]));if(a){var l=Ct(u,Math.ceil(s/i.length));i.forEach((function(e,t){l[t].map((function(t){os(t,"minduration",e),os(t,"maxduration",e)}))}))}else u.map((function(e){return os(e,"maxduration",d)}));return u}(i,e),n=C.tags.filter((function(t){return t.uuid!==e.bidId}));C.tags=[].concat(o(n),o(t))})),e[0].userId){var B=[];cs(B,y(e[0],"userId.criteoId"),"criteo.com",null),cs(B,y(e[0],"userId.netId"),"netid.de",null),cs(B,y(e[0],"userId.idl_env"),"liveramp.com",null),cs(B,y(e[0],"userId.tdid"),"adserver.org","TDID"),cs(B,y(e[0],"userId.uid2.id"),"uidapi.com","UID2"),e[0].userId.pubProvidedId&&e[0].userId.pubProvidedId.forEach((function(e){e.uids.forEach((function(t){B.push({source:e.source,id:t.id})}))})),B.length&&(C.eids=B)}i[0].publisher_id&&(C.publisher_id=i[0].publisher_id);var D=function(e,t){var n=[],r={withCredentials:!0},i="https://ib.adnxs.com/ut/v3/prebid";if(Do(null==t?void 0:t.gdprConsent)||(i="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==Ee("apn_test").toUpperCase()&&!0!==k.getConfig("apn_test")||(r.customHeaders={"X-Is-Test":1}),e.tags.length>15){var a=rt(e);Ct(e.tags,15).forEach((function(e){a.tags=e;var o=JSON.stringify(a);n.push({method:"POST",url:i,data:o,bidderRequest:t,options:r})}))}else{var o=JSON.stringify(e);n={method:"POST",url:i,data:o,bidderRequest:t,options:r}}return n}(C,t);return D},interpretResponse:function(e,t){var n=this,r=t.bidderRequest;e=e.body;var i=[];if(!e||e.error){var a="in response for ".concat(r.bidderCode," adapter");return e&&e.error&&(a+=": ".concat(e.error)),Ie(a),i}if(e.tags&&e.tags.forEach((function(e){var t,a=(t=e)&&t.ads&&t.ads.length&&c(t.ads,(function(e){return e.rtb}));if(a&&(!0===un.get(r.bidderCode,"allowZeroCpmBids")?a.cpm>=0:a.cpm>0)&&d(n.supportedMediaTypes,a.ad_type)){var o=function(e,t,n){var r,i=Ve(e.uuid,[n]),a=de(),o={adId:a,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:i.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};if(t.adomain&&(o.meta=Object.assign({},o.meta,{advertiserDomains:[]})),t.advertiser_id&&(o.meta=Object.assign({},o.meta,{advertiserId:t.advertiser_id})),t.buyer_member_id&&(o.meta=Object.assign({},o.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(t)})),t.brand_id&&(o.meta=Object.assign({},o.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),y(i,"mediaTypes.video.context")){case Mn:var s=function(e,t){var n=ei.getBidAdapter(e);if(n.getSpec().getMappingFileInfo){var r=n.getSpec().getMappingFileInfo(),i=r.localStorageKey?r.localStorageKey:n.getBidderCode(),a=lr.getDataFromLocalStorage(i);if(a){try{a=JSON.parse(a)}catch(t){Ie("Failed to parse ".concat(e," mapping data stored in local storage"))}return a.mapping[t]?a.mapping[t]:null}}}(i.bidder,t.brand_category_id);o.meta=Object.assign({},o.meta,{primaryCatId:s});var d=t.deal_priority;o.video={context:Mn,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:d},o.vastUrl=t.rtb.video.asset_url;break;case Rn:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){var u=c(n.bids,(function(t){return t.bidId===e.uuid})),l=y(u,"mediaTypes.video.renderer.options");l||(l=y(u,"renderer.options")),o.renderer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Xt.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{r.setRender(ss)}catch(e){we("Prebid Error calling setRender on renderer",e)}return r.setEventHandlers({impression:function(){return be("AppNexus outstream video impression event")},loaded:function(){return be("AppNexus outstream video loaded event")},ended:function(){be("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),r}(o.adUnitCode,t,l)}break;case Bn:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[Nn]){var f,p=t.rtb[Nn];if(function(e){if(!e||""===e)return!1;var t=e.match(Go),n=null!=t&&t.length>=1,r=e.match("trk.js"),i=null!=r&&r.length>=1;return e.startsWith("<script")&&i&&n}(t.viewability.config)){var g="pbjs_adid="+a+";pbjs_auc="+i.adUnitCode;f=t.viewability.config.replace("dom_id=%native_dom_id%",g)}var m=p.javascript_trackers;null==m?m=f:Se(m)?m=[m,f]:m.push(f),o[Nn]={title:p.title,body:p.desc,body2:p.desc2,cta:p.ctatext,rating:p.rating,sponsoredBy:p.sponsored,privacyLink:p.privacy_link,address:p.address,downloads:p.downloads,likes:p.likes,phone:p.phone,price:p.price,salePrice:p.saleprice,clickUrl:p.link.url,displayUrl:p.displayurl,clickTrackers:p.link.click_trackers,impressionTrackers:p.impression_trackers,javascriptTrackers:m},p.main_img&&(o.native.image={url:p.main_img.url,height:p.main_img.height,width:p.main_img.width}),p.icon&&(o.native.icon={url:p.icon.url,height:p.icon.height,width:p.icon.width})}else{Object.assign(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var v=0;v<t.rtb.trackers[0].impression_urls.length;v++){var h=(r=t.rtb.trackers[0].impression_urls[v])?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;"><img src="'+encodeURI(r)+'"></div>':"";o.ad+=h}}catch(e){Ie("Error appending tracking pixel",e)}}return o}(e,a,r);o.mediaType=function(e){var t=e.ad_type;return t===zn?zn:t===Nn?Nn:Fn}(a),i.push(o)}})),e.debug&&e.debug.debug_info){var o="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;o=o.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),be("https://console.appnexus.com/docs/understanding-the-debug-auction"),be(o)}return i},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,n,r,i){if(e.iframeEnabled&&Do(n)&&function(e){return!e||!Array.isArray(e.applicableSections)||e.applicableSections.every((function(e){return"number"==typeof e&&e<=5}))}(i))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(e,t,n,r){var i=yt;if(!0===t){var a=null,o=k.getConfig("s2sConfig");Pe(o)?a=y(o,"endpoint.p1Consent"):Ae(o)&&o.forEach((function(e){d(e.bidders,n.bids[0].bidder)&&(a=y(e,"endpoint.p1Consent"))})),a&&a.match("/openrtb2/prebid")&&(i=us)}return e=wt({member:"string",invCode:"string",placementId:"number",keywords:i,publisherId:"number"},e),t&&(e.use_pmt_rule="boolean"==typeof e.usePaymentRule&&e.usePaymentRule,e.usePaymentRule&&delete e.usePaymentRule,Jo(e.keywords)&&e.keywords.forEach(Xo),Object.keys(e).forEach((function(t){var n=ht(t);n!==t&&(e[n]=e[t],delete e[t])}))),e}};function Jo(e){return!!(Ae(e)&&e.length>0)}function Xo(e){Jo(e.value)&&""===e.value[0]&&delete e.value}function Qo(e){var t={};t.sizes=$o(e.sizes),t.primary_size=t.sizes[0],t.ad_types=[],t.uuid=e.bidId,e.params.placementId?t.id=parseInt(e.params.placementId,10):t.code=e.params.invCode,t.allow_smaller_sizes=e.params.allowSmallerSizes||!1,t.use_pmt_rule=e.params.usePaymentRule||!1,t.prebid=!0,t.disable_psa=!0;var n=function(e){if(!_e(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return Pe(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);if(n&&(t.reserve=n),e.params.position)t.position={above:1,below:2}[e.params.position]||0;else{var r=y(e,"mediaTypes.banner.pos")||y(e,"mediaTypes.video.pos");0!==r&&1!==r&&3!==r||(t.position=3===r?2:r)}e.params.trafficSourceCode&&(t.traffic_source_code=e.params.trafficSourceCode),e.params.privateSizes&&(t.private_sizes=$o(e.params.privateSizes)),e.params.supplyType&&(t.supply_type=e.params.supplyType),e.params.pubClick&&(t.pubclick=e.params.pubClick),e.params.extInvCode&&(t.ext_inv_code=e.params.extInvCode),e.params.publisherId&&(t.publisher_id=parseInt(e.params.publisherId,10)),e.params.externalImpId&&(t.external_imp_id=e.params.externalImpId);var i=y(e,"ortb2Imp.ext.data.keywords");if(Se(i)&&""!==i||!Re(e.params.keywords)){var a=ls(i),o=Pe(e.params.keywords)?rt(e.params.keywords):{};Object.keys(o).forEach((function(e){(Se(o[e])||je(o[e]))&&(o[e]=[o[e]])}));var s=yt(St({},o,a));s.length>0&&(s.forEach(Xo),t.keywords=s)}var u,l,f=y(e,"ortb2Imp.ext.data.pbadslot");if(f&&(t.gpid=f),(e.mediaType===Nn||y(e,"mediaTypes.".concat(Nn)))&&(t.ad_types.push(Nn),0===t.sizes.length&&(t.sizes=$o([1,1])),e.nativeParams)){var p=(u=e.nativeParams,l={},Object.keys(u).forEach((function(e){var t=Ko[e]&&Ko[e].serverName||Ko[e]||e,n=Ko[e]&&Ko[e].requiredParams;if(l[t]=Object.assign({},n,u[e]),(t===Ko.image.serverName||t===Ko.icon.serverName)&&l[t].sizes){var r=l[t].sizes;(It(r)||Ae(r)&&r.length>0&&r.every((function(e){return It(e)})))&&(l[t].sizes=$o(l[t].sizes))}t===Ko.privacyLink&&(l.privacy_supported=!0)})),l);t[Nn]={layouts:[p]}}var g=y(e,"mediaTypes.".concat(zn)),m=y(e,"mediaTypes.video.context");t.hb_source=g&&"adpod"===m?7:1,(e.mediaType===zn||g)&&t.ad_types.push(zn),(e.mediaType===zn||g&&"outstream"!==m)&&(t.require_asset_url=!0),e.params.video&&(t.video={},Object.keys(e.params.video).filter((function(e){return d(No,e)})).forEach((function(n){switch(n){case"context":case"playback_method":var r=e.params.video[n];r=Ae(r)?r[0]:r,t.video[n]=Yo[n][r];break;case"frameworks":break;default:t.video[n]=e.params.video[n]}})),e.params.video.frameworks&&Ae(e.params.video.frameworks)&&(t.video_frameworks=e.params.video.frameworks)),g&&(t.video=t.video||{},Object.keys(g).filter((function(e){return d(zo,e)})).forEach((function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof t.video[e]&&(t.video[e]=g[e]);break;case"skip":"boolean"!=typeof t.video.skippable&&(t.video.skippable=1===g[e]);break;case"skipafter":"number"!=typeof t.video.skipoffset&&(t.video.skippoffset=g[e]);break;case"playbackmethod":if("number"!=typeof t.video.playback_method){var n=g[e];(n=Ae(n)?n[0]:n)>=1&&n<=4&&(t.video.playback_method=n)}break;case"api":if(!t.video_frameworks&&Ae(g[e])){var r=g[e].map((function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((function(e){return e}));t.video_frameworks=r}break;case"startdelay":case"placement":if("number"!=typeof t.video.context){var i=g.placement,a=g.startdelay,o=function(e){if(e)return 2===e?"in-banner":e>2?"outstream":void 0}(i)||function(e){if(e)return 0===e?"pre_roll":-1===e?"mid_roll":-2===e?"post_roll":void 0}(a);t.video.context=Yo.context[o]}}}))),e.renderer&&(t.video=Object.assign({},t.video,{custom_renderer_present:!0})),e.params.frameworks&&Ae(e.params.frameworks)&&(t.banner_frameworks=e.params.frameworks);var v=c(ki.getAdUnits(),(function(t){return e.transactionId===t.transactionId}));return v&&v.mediaTypes&&v.mediaTypes.banner&&t.ad_types.push(Fn),0===t.ad_types.length&&delete t.ad_types,t}function $o(e){var t=[],n={};if(Ae(e)&&2===e.length&&!Ae(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===s(e))for(var r=0;r<e.length;r++){var i=e[r];(n={}).width=parseInt(i[0],10),n.height=parseInt(i[1],10),t.push(n)}return t}function Zo(e){return!!e.params.user}function es(e){return!!parseInt(e.params.member,10)}function ts(e){if(e.params)return!!e.params.app}function ns(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function rs(e){return!!e.debug}function is(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===Mn}function as(e){var t=!1,n=e.params,r=e.params.video;return n.frameworks&&Ae(n.frameworks)&&(t=d(e.params.frameworks,6)),!t&&r&&r.frameworks&&Ae(r.frameworks)&&(t=d(e.params.video.frameworks,6)),t}function os(e,t,n){Re(e.video)&&(e.video={}),e.video[t]=n}function ss(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push((function(){var n=function(e){return e?e.defaultView:null}(t)||window;n.ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},ds.bind(null,e))}))}function ds(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}function cs(e,t,n,r){return t&&(r?e.push({source:n,id:t,rti_partner:r}):e.push({source:n,id:t})),e}function us(e){var t="";return Object.keys(e).forEach((function(n){Se(e[n])?""!==e[n]?t+="".concat(n,"=").concat(e[n],","):t+="".concat(n,","):Ae(e[n])&&(""===e[n][0]?t+="".concat(n,","):e[n].forEach((function(e){t+="".concat(n,"=").concat(e,",")})))})),t=t.substring(0,t.length-1)}function ls(e){var t={};return Se(e)&&""!==e&&e.split(/\s*(?:,)\s*/).forEach((function(e){if(-1!==e.indexOf("=")){var n=e.split("="),r=n[0],i=n[1];t.hasOwnProperty(r)?t[r].push(i):t[r]=[i]}else t.hasOwnProperty(e)||(t[e]=[""])})),t}function fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ps(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ms(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ms(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}pr(Vo),window.pbjs.installedModules.push("appnexusBidAdapter");var vs="ix",hs="roundel",bs=[Fn,zn,Nn],ys=[144,144],ws={JPY:1},Is={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},xs={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","trustpid.com":""},Cs=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId"],Os=["mimes","minduration","maxduration"],Ts=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h"],Es="ixdiag",ks="".concat(vs,"_features"),_s=!1,Ss=jn({gvlid:10,bidderCode:vs}),As={featureToggles:{},isFeatureEnabled:function(e){return y(this.featureToggles,"features.".concat(e,".activated"))},getFeatureToggles:function(){if(Ss.localStorageIsEnabled()){var e=function(e){try{return JSON.parse(e)}catch(e){}}(Ss.getDataFromLocalStorage(ks));y(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,n=new Date,r=y(t,"ext.features");r&&(this.featureToggles={expiry:n.setHours(n.getHours()+1),features:r},Ss.localStorageIsEnabled()&&Ss.setDataInLocalStorage(ks,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},Ss.localStorageIsEnabled()&&Ss.removeDataFromLocalStorage(ks)}},js=0,Ps="",Us="";function Rs(e){var t=Bs(e,zn),n=y(e,"mediaTypes.video"),r=y(e,"params.video");if(Fs(n,r).length)return{};for(var i in t.video=r?rt(e.params.video):{},t.ext.tid=y(e,"ortb2Imp.ext.tid"),n)-1===Ts.indexOf(i)||t.video.hasOwnProperty(i)||(t.video[i]=n[i]);if(t.video.minduration>t.video.maxduration)return Ie("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]"),{bidder:vs,code:9}),{};var a=r&&r.context||n&&n.context;if(a&&!t.video.hasOwnProperty("placement")&&(a===Bn?t.video.placement=1:a===Rn?y(r,"playerConfig.floatOnScroll")?t.video.placement=5:t.video.placement=4:we("IX Bid Adapter: Video context '".concat(a,"' is not supported"))),!t.video.w||!t.video.h){var o=Ms(y(t,"video.playerSize"))||Ms(y(e,"params.size"));if(!o)return we("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=o[0],t.video.h=o[1]}return Ds(e,t,zn),t}function Bs(e,t){var n={};if(n.id=e.bidId,n.ext={},y(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case Fn:n.ext.siteID=e.params.banner.siteId.toString();break;case zn:n.ext.siteID=e.params.video.siteId.toString();break;case Nn:n.ext.siteID=e.params.native.siteId.toString()}else n.ext.siteID=e.params.siteId.toString();return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(n.ext.sid=String(e.params.id)),n}function Ds(e,t,n){var r=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(r={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),_e(e.getFloor)){var a="*",o="*";if(n&&qe(bs,n)){var s=t[n];a=n,o=[s.w,s.h]}try{i=e.getFloor({mediaType:a,size:o})}catch(e){we("priceFloors module call getFloor failed, error : ",e)}}i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,t.ext.fl="p"):r&&(t.bidfloor=r.floor,t.bidfloorcur=r.currency,t.ext.fl="x")}function qs(e,t,n){var r={},i=!(!y(e,"exp")||!vt(e.exp)),a=y(e,"dealid")||y(e,"ext.dealid");ws.hasOwnProperty(t)?r.cpm=e.price/ws[t]:r.cpm=e.price/100,r.requestId=e.impid,a&&(r.dealId=a),r.netRevenue=!0,r.currency=t,r.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2==e.mtype?r.vastXml=e.adm:e.ext&&e.ext.vasturl&&(r.vastUrl=e.ext.vasturl);var o=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{o=JSON.parse(e.adm)}catch(e){we("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||2==e.mtype?(r.width=n.video.w,r.height=n.video.h,r.mediaType=zn,r.mediaTypes=n.mediaTypes,r.ttl=i?e.exp:3600):o&&o.native?(r.native={ortb:o.native},r.width=e.w?e.w:1,r.height=e.h?e.h:1,r.mediaType=Nn,r.ttl=i?e.exp:3600):(r.ad=e.adm,r.width=e.w,r.height=e.h,r.mediaType=Fn,r.ttl=i?e.exp:300),r.meta={},r.meta.networkId=y(e,"ext.dspid"),r.meta.brandId=y(e,"ext.advbrandid"),r.meta.brandName=y(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(r.meta.advertiserDomains=e.adomain),r}function Ns(e){return Array.isArray(e)&&2===e.length&&vt(e[0])&&vt(e[1])}function zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Ns(e))return e[0]===t[0]&&e[1]===t[1];for(var n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function Fs(e,t){var n=[];e||we("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");var r,i=gs(Os);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=e&&e.hasOwnProperty(a),s=t&&t.hasOwnProperty(a);o||s||n.push("IX Bid Adapter: ".concat(a," is not included in either the adunit or params level"))}}catch(e){i.e(e)}finally{i.f()}var d=e&&e.hasOwnProperty("protocol"),c=e&&e.hasOwnProperty("protocols"),u=t&&t.hasOwnProperty("protocol"),l=t&&t.hasOwnProperty("protocols");return d||c||u||l||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function Ms(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Ns(e)?e:!!Ns(e[0])&&e[0]}function Ls(e,t,n){if(e)return ps(ps({},c(n,(function(t){return t.bidId===e}))),c(t,(function(t){return t.id===e})))}function Ws(e,t,n,r){var i="https://htlb.casalemedia.com/openrtb/pbjs",a=function(e){var t=[],n={};if(Ae(e)){var r,i=gs(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;xs.hasOwnProperty(a.source)&&y(a,"uids.0")&&(n[a.source]=!0,""!=xs[a.source]&&(a.uids[0].ext={rtiPartner:xs[a.source]}),delete a.uids[0].atype,t.push(a))}}catch(e){i.e(e)}finally{i.f()}}return{toSend:t,seenSources:n}}(y(e,"0.userIdAsEids")),d=a.toSend,c=y(t,"refererInfo.page"),u=8e3;if(As.isFeatureEnabled("pbjs_use_32kb_size_limit")&&(u=32e3),window.headertag&&"function"==typeof window.headertag.getIdentityInfo){var l=window.headertag.getIdentityInfo();if(l&&"object"===s(l))for(var f in l)if(l.hasOwnProperty(f)){var p=l[f];!p.responsePending&&p.data&&"object"===s(p.data)&&Object.keys(p.data).length&&!a.seenSources[p.data.source]&&d.push(p.data)}}if(t&&t.bidderCode===hs&&!a.seenSources["liveramp.com"])return[];var g={},m=k.getConfig("bidderTimeout");g.id=e[0].bidderRequestId.toString(),g.site={},g.ext={},g.ext.source="prebid",g.ext.ixdiag={},g.ext.ixdiag.ls=Ss.localStorageIsEnabled(),g.imp=[],g.at=1;var v=function(e){for(var t=e.map((function(e){return e.transactionId})).filter((function(e,t,n){return n.indexOf(e)===t})),n={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"7.31.0",userIds:Ys(e[0]),url:window.location.href.split("?")[0]},r=function(r){y(a=e.filter((function(e){return e.transactionId===t[r]}))[0],"mediaTypes")&&(Object.keys(a.mediaTypes).length>1&&n.mfu++,y(a,"mediaTypes.native")&&n.nu++,y(a,"mediaTypes.banner")&&n.bu++,"outstream"===y(a,"mediaTypes.video.context")&&(n.ou++,Zs(a)&&(n.ren=!0)),"instream"===y(a,"mediaTypes.video.context")&&n.iu++,n.allu++)},i=0;i<t.length;i++){var a;r(i)}return n}(e);for(var h in v)g.ext.ixdiag[h]=v[h];m&&(g.ext.ixdiag.tmax=m),k.getConfig("userSync")&&(g.ext.ixdiag.syncsPerBidder=k.getConfig("userSync").syncsPerBidder);var b=function(){if(Ss.localStorageIsEnabled()){var e,t={};try{e=JSON.parse(Ss.getDataFromLocalStorage(Es)||"{}")}catch(e){return Ie("ix can not read ixdiag from localStorage."),null}return Object.keys(e).forEach((function(n){Object.keys(e[n]).forEach((function(r){"number"==typeof e[n][r]&&(t[r]=t[r]?t[r]+e[n][r]:e[n][r])}))})),t}}();Re(b)||(g.ext.ixdiag.err=b),g.ext.ixdiag.imps=Object.keys(n).length,g.source={tid:e[0].auctionId},e[0].schain&&(g.source.ext={},g.source.ext.schain=e[0].schain),d.length>0&&(g.user={},g.user.eids=d),document.referrer&&""!==document.referrer&&(g.site.ref=document.referrer),t&&(t.gdprConsent&&((Ps=t.gdprConsent).hasOwnProperty("gdprApplies")&&(g.regs={ext:{gdpr:Ps.gdprApplies?1:0}}),Ps.hasOwnProperty("consentString")&&(g.user=g.user||{},g.user.ext={consent:Ps.consentString||""},Ps.hasOwnProperty("addtlConsent")&&Ps.addtlConsent&&(g.user.ext.consented_providers_settings={consented_providers:Ps.addtlConsent}))),t.uspConsent&&(At(g,"regs.ext.us_privacy",t.uspConsent),Us=t.uspConsent),c&&(g.site.page=c)),k.getConfig("coppa")&&At(g,"regs.coppa",1);var w={};js=e[0].params.siteId,w.s=js;var I=t&&t.bidderCode||"ix",x=k.getConfig(I),C=[],O=0,T=Object.keys(n),E="".concat(i).concat(le(ps(ps({},w),{},{r:JSON.stringify(g)}))).length;if(E>u)return Ie("IX Bid Adapter: Base request size has exceeded maximum request size.",{bidder:vs,code:7}),C;var _=E,S=0,A=!1;if(x&&"object"===s(x.firstPartyData)){var j=x.firstPartyData,P="?";for(var U in j)j.hasOwnProperty(U)&&(P+="".concat(encodeURIComponent(U),"=").concat(encodeURIComponent(j[U]),"&"));P=P.slice(0,-1),(S=encodeURIComponent(P).length)<u?("page"in g.site?g.site.page+=P:g.site.page=P,_+=S):Ie("IX Bid Adapter: IX config FPD request size has exceeded maximum request size.",{bidder:vs,code:6})}for(var R=function(r){if(_>=u||C.length>=4)return"break";for(var a=n[T[r]],s=a.missingImps,d=void 0===s?[]:s,c=a.ixImps,l=!1,f=u-_,p={ixImps:void 0===c?[]:c,missingBannerImpressions:d},m=Object.keys(p).map((function(e){return p[e]})).filter((function(e){return Array.isArray(e)})).reduce((function(e,t){return e.concat.apply(e,o(t))}),[]),v=encodeURIComponent(JSON.stringify({impressionObjects:m})).length;m.length&&v>f;)l=!0,m.pop(),v=encodeURIComponent(JSON.stringify({impressionObjects:m})).length;var h=n[T[r]].gpid,b=n[T[r]].dfp_ad_unit_code,I=n[T[r]].tid,x=n[T[r]].sid;if(m.length&&Fn in m[0]){for(var k=m[0],S={id:k.id,banner:{topframe:k.banner.topframe,format:m.map((function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}}))}},j=0;j<S.banner.format.length;j++)null!=S.banner.format[j].ext&&null!=S.banner.format[j].ext.sid&&delete S.banner.format[j].ext.sid,"bidfloor"in m[j]&&(S.banner.format[j].ext.bidfloor=m[j].bidfloor);var P=n[T[r]].pos;vt(P)&&(S.banner.pos=P),(b||h||I||x)&&(S.ext={},S.ext.dfp_ad_unit_code=b,S.ext.gpid=h,S.ext.tid=I,S.ext.sid=x),"bidfloor"in m[0]&&(S.bidfloor=m[0].bidfloor),"bidfloorcur"in m[0]&&(S.bidfloorcur=m[0].bidfloorcur),g.imp.push(S)}else{var U;m.forEach((function(e){return At(e,"ext.gpid",h)})),(U=g.imp).push.apply(U,o(m))}_+=v;var R=y(t,"ortb2")||{};if(!Re(R)&&!A){g.ext.ixdiag.fpd=!0;var B=ps({},R.site||R.context);Object.keys(B).forEach((function(e){-1===Is.SITE.indexOf(e)&&delete B[e]}));var D=ps({},R.user);Object.keys(D).forEach((function(e){-1===Is.USER.indexOf(e)&&delete D[e]}));var q=rt(g);if(q.site=St({},q.site,B),q.user=St({},q.user,D),"".concat(i).concat(le(ps(ps({},w),{},{r:JSON.stringify(q)}))).length<u){g.site=St({},g.site,B),g.user=St({},g.user,D),A=!0;var N=encodeURIComponent(JSON.stringify(ps(ps({},B),D))).length;_+=N}else Ie("IX Bid Adapter: FPD request size has exceeded maximum request size.",{bidder:vs,code:8})}var z=n[T[r]].pbadslot,F=n[T[r]].tagId,M=n[T[r]].adUnitCode,L=n[T[r]].divId;if(z||F||M||L){var W=rt(g);"".concat(i).concat(le(ps(ps({},w),{},{r:JSON.stringify(W)}))).length<u&&(g.ext.ixdiag.pbadslot=z,g.ext.ixdiag.tagid=F,g.ext.ixdiag.adunitcode=M,g.ext.ixdiag.divId=L)}var Y=r===T.length-1;(l||Y)&&(Y&&!O||(g.ext.ixdiag.sn=O),O++,C.push({method:"POST",url:i+"?s="+js,data:rt(g),option:{contentType:"text/plain"},validBidRequests:e}),_=E,g.imp=[],A=!1)},B=0;B<T.length&&"break"!==R(B);B++);return C}function Ys(e){var t=e.userId||{};return Cs.filter((function(e){return t[e]}))}function Ks(e,t){if(t)for(var n=0;n<e.length;n++){var r=e[n];if(t[0]===r[0]&&t[1]===r[1]){e.splice(n,1);break}}}function Gs(e,t){var n=function(e){var t=Bs(e,Nn),n=e.nativeOrtbRequest;return n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"},t.ext.tid=y(e,"ortb2Imp.ext.tid"),Ds(e,t,Nn),t}(e);if(0!=Object.keys(n).length){t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=y(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=y(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=y(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=y(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:gt(r).divId;t[e.transactionId].adUnitCode=r,t[e.transactionId].divId=i}}function Hs(e,t){var n=Rs(e);if(0!=Object.keys(n).length){t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=y(e,"ortb2Imp.ext.gpid"),t[e.transactionId].dfp_ad_unit_code=y(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.transactionId].pbadslot=y(e,"ortb2Imp.ext.data.pbadslot"),t[e.transactionId].tagId=y(e,"params.tagId");var r=e.adUnitCode,i=document.getElementById(r)?r:gt(r).divId;t[e.transactionId].adUnitCode=r,t[e.transactionId].divId=i}}function Vs(e,t,n){var r=function(e){var t=Bs(e,Fn);t.banner={};var n=y(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=it()?0:1,Ds(e,t,Fn),t}(e),i=zs(y(e,"mediaTypes.banner.sizes"),y(e,"params.size"));n.hasOwnProperty(e.transactionId)||(n[e.transactionId]={}),n[e.transactionId].gpid=y(e,"ortb2Imp.ext.gpid"),n[e.transactionId].dfp_ad_unit_code=y(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.transactionId].tid=y(e,"ortb2Imp.ext.tid"),n[e.transactionId].pbadslot=y(e,"ortb2Imp.ext.data.pbadslot"),n[e.transactionId].tagId=y(e,"params.tagId"),n[e.transactionId].pos=y(e,"mediaTypes.banner.pos");var a=y(e,"params.id");!a||"string"!=typeof a&&"number"!=typeof a||(n[e.transactionId].sid=String(a));var o=e.adUnitCode,s=document.getElementById(o)?o:gt(o).divId;n[e.transactionId].adUnitCode=o,n[e.transactionId].divId=s,i&&(n[e.transactionId].hasOwnProperty("ixImps")||(n[e.transactionId].ixImps=[]),n[e.transactionId].ixImps.push(r)),function(e,t,n){var r=e.transactionId;if(t.hasOwnProperty(r)){var i=[];t[r].hasOwnProperty("missingSizes")&&(i=t[r].missingSizes),Ks(i,e.params.size),t[r].missingSizes=i}else if(y(e,"mediaTypes.banner.sizes")){var a=rt(e.mediaTypes.banner.sizes);Ks(a,e.params.size);var o={missingSizes:a,impression:n};t[r]=o}}(e,t,r)}function Js(e,t,n){var r=rt(t);return r.banner.w=n[0],r.banner.h=n[1],Ds(e,r,Fn),r}function Xs(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===vs&&function(e){if(Ss.localStorageIsEnabled()){var t;try{t=JSON.parse(Ss.getDataFromLocalStorage(Es)||"{}")}catch(e){we("ix can not read ixdiag from localStorage.")}var n=new Date;if(Object.keys(t).map((function(e){var r=new Date(e);r.setDate(r.getDate()+7)-n<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===vs){var r=n.toISOString().slice(0,10),i=e.arguments[1].code;i&&(t[r]=t[r]||{},Number(t[r][i])||(t[r][i]=0),t[r][i]++)}Ss.setDataInLocalStorage(Es,JSON.stringify(t))}}(e)}function Qs(e){e.renderer.push((function(){var t=e.adUnitCode,n=document.getElementById(t)?t:gt(t).divId;n?window.createIXPlayer(n,e):we("IX Bid Adapter: adUnitCode: ".concat(n," not found on page."))}))}function $s(e,t){var n=Xt.install({id:e,url:t,loaded:!1});try{n.setRender(Qs)}catch(e){return we("Prebid Error calling setRender on renderer",e),null}return t?n:(we("Outstream renderer URL not found"),null)}function Zs(e){if("outstream"!==y(e,"mediaTypes.video.context"))return!1;var t=y(e,"mediaTypes.video.renderer");return t||(t=y(e,"renderer")),!("object"===s(t)&&t.url&&t.render)||t.backupOnly}function ed(e,t){var n="",r="0";return Ps&&Ps.hasOwnProperty("gdprApplies")&&(r=Ps.gdprApplies?"1":"0"),Ps&&Ps.hasOwnProperty("consentString")&&(n=Ps.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid&site_id="+js.toString()+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+r+"&gdpr_consent="+n+"&us_privacy="+(Us||"")}function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?td(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}pr({code:vs,gvlid:10,aliases:[{code:hs,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:bs,isBidRequestValid:function(e){_s||(Nt(w.FP.AUCTION_DEBUG,Xs),Nt(w.FP.AD_RENDER_FAILED,Xs),_s=!0);var t,n,r=y(e,"params.video"),i=y(e,"params.size"),a=y(e,"mediaTypes.banner.sizes"),o=y(e,"mediaTypes.video"),s=y(e,"mediaTypes.video.playerSize"),d=e.params.hasOwnProperty("bidFloor"),c=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!qe(bs,e.mediaType))return we("IX Bid Adapter: media type is not supported."),!1;if(y(e,"mediaTypes.banner")&&!a)return!1;if(i){var u=Ms(i);if(!u)return Ie("IX Bid Adapter: size has invalid format.",{bidder:vs,code:1}),!1;if(!zs(e.sizes,u)&&!zs(s,u)&&!zs(a,u))return Ie("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:vs,code:2}),!1}if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return Ie("IX Bid Adapter: siteId must be string or number type.",{bidder:vs,code:4}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return Ie("IX Bid Adapter: siteId must valid value",{bidder:vs,code:4}),!1;if((d||c)&&!(d&&c&&(t=e.params.bidFloor,n=e.params.bidFloorCur,Boolean("number"==typeof t&&"string"==typeof n&&n.match(/^[A-Z]{3}$/)))))return Ie("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:vs,code:5}),!1;if(o&&r){var l=Rs(e).video,f=Fs(o,r);if(y(e,"mediaTypes.video.context")===Rn&&Zs(e)&&l){var p=[y(l,"w"),y(l,"h")];if(!(p[0]>=ys[0]&&p[1]>=ys[1]))return Ie("IX Bid Adapter: ".concat(p," is an invalid size for IX outstream renderer")),!1}if(f.length)return f.forEach((function(e){Ie(e,{bidder:vs,code:3})})),!1}return function(e){return void 0===y(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0}(e)},buildRequests:function(e,t){var n=[],r={},i={},a={},s={};for(var d in As.getFeatureToggles(),e.forEach((function(e){var t=Object.keys(y(e,"mediaTypes",{}));for(var n in t)switch(t[n]){case Fn:Vs(e,s,r);break;case zn:Hs(e,i);break;case Nn:Gs(e,a);break;default:we("IX Bid Adapter: ad unit mediaTypes ".concat(n," is not supported"))}})),s)if(s.hasOwnProperty(d)){var c=s[d].missingSizes;r.hasOwnProperty(d)||(r[d]={}),r[d].hasOwnProperty("missingImps")||(r[d].missingImps=[],r[d].missingCount=0);for(var u=s[d].impression,l=0;l<c.length;l++){var f=Js(e[0],u,c[l]);r[d].missingImps.push(f),r[d].missingCount++}}return Object.keys(r).length>0&&n.push.apply(n,o(Ws(e,t,r))),Object.keys(i).length>0&&n.push.apply(n,o(Ws(e,t,i))),Object.keys(a).length>0&&n.push.apply(n,o(Ws(e,t,a))),n},interpretResponse:function(e,t){var n=[],r=null;if(!e.hasOwnProperty("body")||!e.body.hasOwnProperty("seatbid"))return As.setFeatureToggles(e),n;for(var i=e.body,a=i.seatbid,o=0;o<a.length;o++)if(a[o].hasOwnProperty("bid")){for(var s=a[o].bid,d=t.data,c=0;c<s.length;c++){var u=Ls(s[c].impid,d.imp,t.validBidRequests);if((r=qs(s[c],i.cur,u)).mediaType===zn&&Zs(u)){var l=y(i,"ext.videoplayerurl");if(r.renderer=$s(s[c].bidId,l),!r.renderer)continue}n.push(r)}if(y(d,"ext.ixdiag.err")&&Ss.localStorageIsEnabled())try{Ss.removeDataFromLocalStorage(Es)}catch(e){Ie("ix can not clear ixdiag from localStorage.")}}return As.setFeatureToggles(e),n},transformBidParams:function(e,t){return wt({siteID:"number"},e)},getUserSyncs:function(e,t){var n=[],r=null;if(t.length>0&&(r=y(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==r&&0==r)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var i=null;k.getConfig("userSync")&&(i=k.getConfig("userSync").syncsPerBidder),0===i&&(i=r),i=r&&(0===i||i)?r>i?i:r:1;for(var a=0;a<i;a++)n.push({type:"image",url:ed(i,a)})}return n}}),window.pbjs.installedModules.push("ixBidAdapter");var rd="triplelift",id=!0,ad=null,od=jn({gvlid:28,bidderCode:rd}),sd={gvlid:28,code:rd,supportedMediaTypes:[Fn,zn],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var n="https://tlx.3lift.com/header/auction?",r=function(e,t){var n={},r=e[0].schain,i=function(e){var t={},n={},r={},i=e.ortb2||{},a=function(){var e=od.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return Ie("Triplelift: error parsing JSON: ",e),null}}(),o=Object.assign({},i.site),s=Object.assign({},i.user);if(a){s.data=s.data||[];try{s.data.push({name:"www.1plusx.com",ext:a})}catch(e){Ie("Triplelift: error adding 1plusX segments: ",e)}}return fd(n,o),fd(r,s),Re(n)||(t.context=n),Re(r)||(t.user=r),t}(t);n.imp=e.map((function(e,t){var n,r,i,a,o={id:t,tagid:e.params.inventoryCode,floor:ld(e)};return dd(e)&&(o.video=function(e){var t=nd(nd({},e.params.video),e.mediaTypes.video);try{t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1])}catch(e){we("Video size not defined",e)}return"instream"===t.context&&(t.placement=1),"outstream"===t.context&&(t.placement?-1===[3,4,5].indexOf(t.placement)&&(be("video.placement value of ".concat(t.placement," is invalid for outstream context. Setting placement to 3")),t.placement=3):t.placement=3),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!cd(e)&&(o.banner={format:(a=e.sizes,a.filter(md).map((function(e){return{w:e[0],h:e[1]}})))}),Re(e.ortb2Imp)||(o.fpd=(n=e.ortb2Imp,r={},fd(i={},n.ext),Re(i)||(r.context=i),r)),o}));var a=[].concat(o(pd([e[0]],"tdid","adserver.org","TDID")),o(function(e){return pd(e,"idl_env","liveramp.com","idl")}([e[0]])),o(function(e){return pd(e,"criteoId","criteo.com","criteoId")}([e[0]])),o(function(e){return pd(e,"pubcid","pubcid.org","pubcid")}([e[0]])),o(function(e){var t=["adserver.org","liveramp.com","criteo.com","pubcid.org"],n=[];return e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if(-1===t.indexOf(e.source)){var r=e.uids.map((function(t){return{id:t.id,ext:{rtiPartner:e.source}}}));n.push({source:e.source,uids:r})}}catch(t){we("Triplelift: Error attempting to add ".concat(e," to bid request"),t)}})),n}(e[0])));a.length>0&&(n.user={ext:{eids:a}});var s=function(e,t){var n={};return Re(e)||(n.schain=nd({},e)),Re(t)||(n.fpd=nd({},t)),n}(r,i);return Re(s)||(n.ext=s),n}(e,t);return n=ue(n,"lib","prebid"),n=ue(n,"v","7.31.0"),t&&t.refererInfo&&(n=ue(n,"referrer",t.refererInfo.page)),t&&t.timeout&&(n=ue(n,"tmax",t.timeout)),t&&t.gdprConsent&&(void 0!==t.gdprConsent.gdprApplies&&(n=ue(n,"gdpr",(id=t.gdprConsent.gdprApplies).toString())),void 0!==t.gdprConsent.consentString&&(n=ue(n,"cmp_cs",ad=t.gdprConsent.consentString))),t&&t.uspConsent&&(n=ue(n,"us_privacy",t.uspConsent)),!0===k.getConfig("coppa")&&(n=ue(n,"coppa",!0)),n.lastIndexOf("&")===n.length-1&&(n=n.substring(0,n.length-1)),be("tlCall request built: "+n),{method:"POST",url:n,data:r,bidderRequest:t}},interpretResponse:function(e,t){var n=t.bidderRequest;return(e.body.bids||[]).map((function(e){return function(e,t){var n={},r=t.width||1,i=t.height||1,a=t.deal_id||"",o=t.crid||"",s=e.bids[t.imp_id];return 0!=t.cpm&&t.ad&&(n={requestId:s.bidId,cpm:t.cpm,width:r,height:i,netRevenue:!0,ad:t.ad,creativeId:o,dealId:a,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},dd(s)&&"video"===t.media_type&&(n.vastXml=t.ad,n.mediaType="video",n.ttl=3600),t.advertiser_name&&(n.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(n.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(dd(s)&&"video"===t.media_type?n.meta.mediaType="video":n.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(n.meta.mediaType="native")),n}(n,e)}))},getUserSyncs:function(e,t,n,r){var i=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(i){var a="https://eb2.3lift.com/sync?";return"image"===i&&(a=ue(a,"px",1),a=ue(a,"src","prebid")),null!==ad&&(a=ue(a,"gdpr",id),a=ue(a,"cmp_cs",ad)),r&&(a=ue(a,"us_privacy",r)),[{type:i,url:a}]}}};function dd(e){return ud(e)&&(cd(e)||function(e){return ud(e)&&"outstream"===e.mediaTypes.video.context.toLowerCase()}(e))}function cd(e){return ud(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function ud(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function ld(e){var t=null;if("function"==typeof e.getFloor)try{var n=e.getFloor({currency:"USD",mediaType:dd(e)?"video":"banner",size:"*"});"object"!==s(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}catch(e){Ie("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function fd(e,t){Re(t)||Object.keys(t).forEach((function(n){null!=t[n]&&(e[n]=t[n])}))}function pd(e,t,n,r){return e.map(function(e){return function(t){return t&&t.userId&&t.userId[e]}}(t)).filter(gd(t)).map(function(e,t){return function(n){return{source:e,uids:[{id:n.id?n.id:n,ext:{rtiPartner:t}}]}}}(n,r))}var gd=function(e){return function(t,n,r){var i=!!t&&(Se(t)?!!t:Pe(t)&&!Ae(t)&&!Re(t)&&t.id&&Se(t.id)&&!!t.id);return i||void 0===r[0]||we("Triplelift: invalid ".concat(e," userId format")),i}};function md(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}pr(sd),window.pbjs.installedModules.push("tripleliftBidAdapter");var hd="PubMatic: ",bd="USD",yd=void 0,wd="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),Id={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},xd="number",Cd="array",Od={mimes:Cd,minduration:xd,maxduration:xd,startdelay:xd,playbackmethod:Cd,api:Cd,protocols:Cd,w:xd,h:xd,battr:Cd,linearity:xd,placement:xd,minbitrate:xd,maxbitrate:xd,skip:xd},Td={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},Ed=[{id:Td.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:Td.TITLE.ID,required:!0},{id:Td.IMAGE.ID,required:!0}],kd={1:"PMP",5:"PREF",6:"PMPG"},_d={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var n,r=_d.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode),a=0;a<window.bluebillywig.renderers.length;a++)if(window.bluebillywig.renderers[a]._id===r){n=window.bluebillywig.renderers[a];break}n?n.bootstrap(t,i):we("".concat(hd,": Couldn't find a renderer with ").concat(r))}else we("".concat(hd,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){var n=wd.replace("$RENDERER",e),r=Xt.install({url:n,loaded:!1,adUnitCode:t});try{r.setRender(_d.outstreamRender)}catch(e){we("".concat(hd,": Error tying to setRender on renderer"),e)}return r},outstreamRender:function(e){e.renderer.push((function(){_d.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},Sd=[Fn,zn,Nn],Ad=0,jd=!1,Pd={},Ud={},Rd=["pubmatic"],Bd=["all"];function Dd(e,t){if(!Se(t))return t&&we("PubMatic: Ignoring param key: "+e+", expects string-value, found "+s(t)),yd;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||yd;case"yob":return parseInt(t)||yd;default:return t}}function qd(e,t,n){var r,i="Ignoring param key: "+e+", expects "+n+", found "+s(t);switch(n){case"boolean":r=Ue;break;case xd:r=je;break;case"string":r=Se;break;case Cd:r=Ae}return r(t)?t:(we(hd+i),yd)}function Nd(e,t){var n=e.KEY;return{id:e.ID,required:t[n].required?1:0,data:{type:e.TYPE,len:t[n].len,ext:t[n].ext}}}function zd(e){var t={assets:[]};for(var n in e){if(e.hasOwnProperty(n)){var r={};if(!(t.assets&&t.assets.length>0&&t.assets.hasOwnProperty(n)))switch(n){case Td.TITLE.KEY:e[n].len||e[n].length?r={id:Td.TITLE.ID,required:e[n].required?1:0,title:{len:e[n].len||e[n].length,ext:e[n].ext}}:we("PubMatic: Error: Title Length is required for native ad: "+JSON.stringify(e));break;case Td.IMAGE.KEY:r={id:Td.IMAGE.ID,required:e[n].required?1:0,img:{type:3,w:e[n].w||e[n].width||(e[n].sizes?e[n].sizes[0]:yd),h:e[n].h||e[n].height||(e[n].sizes?e[n].sizes[1]:yd),wmin:e[n].wmin||e[n].minimumWidth||(e[n].minsizes?e[n].minsizes[0]:yd),hmin:e[n].hmin||e[n].minimumHeight||(e[n].minsizes?e[n].minsizes[1]:yd),mimes:e[n].mimes,ext:e[n].ext}};break;case Td.ICON.KEY:r={id:Td.ICON.ID,required:e[n].required?1:0,img:{type:1,w:e[n].w||e[n].width||(e[n].sizes?e[n].sizes[0]:yd),h:e[n].h||e[n].height||(e[n].sizes?e[n].sizes[1]:yd)}};break;case Td.VIDEO.KEY:r={id:Td.VIDEO.ID,required:e[n].required?1:0,video:{minduration:e[n].minduration,maxduration:e[n].maxduration,protocols:e[n].protocols,mimes:e[n].mimes,ext:e[n].ext}};break;case Td.EXT.KEY:r={id:Td.EXT.ID,required:e[n].required?1:0};break;case Td.LOGO.KEY:r={id:Td.LOGO.ID,required:e[n].required?1:0,img:{type:2,w:e[n].w||e[n].width||(e[n].sizes?e[n].sizes[0]:yd),h:e[n].h||e[n].height||(e[n].sizes?e[n].sizes[1]:yd)}};break;case Td.SPONSOREDBY.KEY:case Td.BODY.KEY:case Td.RATING.KEY:case Td.LIKES.KEY:case Td.DOWNLOADS.KEY:case Td.PRICE.KEY:case Td.SALEPRICE.KEY:case Td.PHONE.KEY:case Td.ADDRESS.KEY:case Td.DESC2.KEY:case Td.DISPLAYURL.KEY:case Td.CTA.KEY:r=Nd(Ud[n],e)}}r&&r.id&&(t.assets[t.assets.length]=r)}var i=Ed.length,a=0;return Ed.forEach((function(e){for(var n=t.assets.length,r=0;r<n;r++)if(e.id==t.assets[r].id){a++;break}})),jd=i!=a,t}function Fd(e){var t,n=e.mediaTypes.banner.sizes,r=[];if(n!==yd&&Ae(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=yd,we("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}n.length>0&&(r=[],n.forEach((function(e){e.length>1&&r.push({w:e[0],h:e[1]})})),r.length>0&&(t.format=r)),t.pos=0,t.topframe=it()?0:1}else we("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=yd;return t}function Md(e){var t,n=St(y(e.mediaTypes,"video"),e.params.video);if(n!==yd){for(var r in t={},function(e,t){y(e,"placement")||we("Video.Placement param missing for "+t)}(n,e.adUnitCode),Od)n.hasOwnProperty(r)&&(t[r]=qd(r,n[r],Od[r]));Ae(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):je(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=yd,we("PubMatic: Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function Ld(e,t,n){var r=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,i="";if(void 0!==r&&""!==r&&r.hasOwnProperty("segments")){var a,o=r.segments.length;i+="jw-id="+r.content.id;for(var s=0;s<o;s++)i+="|jw-"+r.segments[s]+"=1";n?void 0===e.dctr||0==e.dctr.length?e.dctr=i:e.dctr+="|"+i:(a=e.ext)&&void 0===a.key_val?a.key_val=i:a.key_val+="|"+i}}function Wd(e,t){(t=t.filter((function(e){return"string"==typeof e||(we("PubMatic: acat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){return n.indexOf(e)===t}))).length>0&&(we("PubMatic: acat: Selected: ",t),e.ext.acat=t)}function Yd(e){return!0===Ae(e)&&e.length>0}De(Td,(function(e){Pd[e.ID]=e.KEY})),De(Td,(function(e){Ud[e.KEY]=e}));var Kd={code:"pubmatic",gvlid:76,supportedMediaTypes:[Fn,zn,Nn],isBidRequestValid:function(e){if(e&&e.params){if(!Se(e.params.publisherId))return we("PubMatic: Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(zn)){var t=y(e.mediaTypes,"video.mimes"),n=y(e,"params.video.mimes");if(!1===Yd(t)&&!1===Yd(n))return we("PubMatic: Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[zn].hasOwnProperty("context"))return Ie("".concat(hd,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[zn].context&&!Se(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[zn].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(Fn)||e.mediaTypes.hasOwnProperty(Nn)?(delete e.mediaTypes[zn],we("".concat(hd,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):(Ie("".concat(hd,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var n,r,a,d,c;e=ea(e),t&&t.refererInfo&&(c=t.refererInfo);var u,l=function(e){return{pageURL:(null==e?void 0:e.page)||window.location.href,refURL:(null==e?void 0:e.ref)||window.document.referrer}}(c),f=function(e){return{id:""+(new Date).getTime(),at:1,cur:[bd],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(l),p="",g=[],m=[],v=[];if(e.forEach((function(e){if((u=rt(e)).params.adSlot=u.params.adSlot||"",function(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=Se(t=e.params.adSlot)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&we("pubmatic: adSlot must be a string. Ignoring adSlot"),"");var n=e.params.adSlot,r=n.split(":");if(n=r[0],2==r.length&&(e.params.adUnitIndex=r[1]),r=n.split("@"),e.params.adUnit=r[0],r.length>1){if(2!=(r=r[1].split("x")).length)return void we("PubMatic: AdSlot Error: adSlot not in required format");e.params.width=parseInt(r[0],10),e.params.height=parseInt(r[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(Fn)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,a=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&a.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=a,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}(u),u.mediaTypes&&u.mediaTypes.hasOwnProperty("video")||u.params.hasOwnProperty("video"));else if(!(u.hasOwnProperty("mediaTypes")&&u.mediaTypes.hasOwnProperty(Nn)||0!==u.params.width||0!==u.params.height))return void we("PubMatic: Skipping the non-standard adslot: ",u.params.adSlot,JSON.stringify(u));l.pubId=l.pubId||u.params.publisherId,(l=function(e,t){var n,r,i;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),Id)Id.hasOwnProperty(n)&&(r=e[n])&&("object"===s(i=Id[n])&&(r=i.f(r,t)),Se(r)?t[n]=r:we("PubMatic: Ignoring param : "+n+" with value : "+Id[n]+", expects string-value, found "+s(r)));return t}(u.params,l)).transactionId=u.transactionId,""===p?p=u.params.currency||yd:u.params.hasOwnProperty("currency")&&p!==u.params.currency&&we("PubMatic: Currency specifier ignored. Only one currency permitted."),u.params.currency=p,u.params.hasOwnProperty("dctr")&&Se(u.params.dctr)&&g.push(u.params.dctr),u.params.hasOwnProperty("bcat")&&Ae(u.params.bcat)&&(m=m.concat(u.params.bcat)),u.params.hasOwnProperty("acat")&&Ae(u.params.acat)&&(v=v.concat(u.params.acat));var t=function(e,t){var n,r,a={},o={},d=e.hasOwnProperty("sizes")?e.sizes:[],c="",u=[];if(function(e,t){t.params.deals&&(Ae(t.params.deals)?t.params.deals.forEach((function(t){Se(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):we("PubMatic: Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):we("PubMatic: Error: bid.params.deals should be an array of strings."))}(a={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:Dd("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:Dd("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?Dd("currency",e.params.currency):bd},e),function(e,t){var n,r="";if(t.params.dctr)if(Se(r=t.params.dctr)&&r.length>0){var i=r.split("|");r="",i.forEach((function(e){r+=e.length>0?e.trim()+"|":""})),n=r.length,"|"===r.substring(n,n-1)&&(r=r.substring(0,n-1)),e.ext.key_val=r.trim()}else we("PubMatic: Ignoring param : dctr with value : "+r+", expects string-value, found empty or non-string value")}(a,e),Ld(a,e),e.hasOwnProperty("mediaTypes"))for(c in e.mediaTypes)switch(c){case Fn:(n=Fd(e))!==yd&&(a.banner=n);break;case Nn:o.request=JSON.stringify(zd(e.nativeParams)),jd?we("PubMatic: Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."):a.native=o;break;case zn:(r=Md(e))!==yd&&(a.video=r)}else n={pos:0,w:e.params.width,h:e.params.height,topframe:it()?0:1},Ae(d)&&d.length>1&&((d=d.splice(1,d.length-1)).forEach((function(e){u.push({w:e[0],h:e[1]})})),n.format=u),a.banner=n;return function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vd(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y(t,"ortb2Imp.ext.data"));Object.keys(n).forEach((function(t){"pbadslot"===t?"string"==typeof n[t]&&n[t]&&At(e,"ext.data.pbadslot",n[t]):"adserver"===t?["name","adslot"].forEach((function(t){var r=y(n,"adserver.".concat(t));"string"==typeof r&&r&&(At(e,"ext.data.adserver.".concat(t.toLowerCase()),r),"adslot"===t&&At(e,"ext.dfp_ad_unit_code",r))})):At(e,"ext.data.".concat(t),n[t])}))}(a,e),function(e,t){var n=-1;"function"!=typeof t.getFloor||k.getConfig("pubmatic.disableFloors")||[Fn,zn,Nn].forEach((function(r){if(e.hasOwnProperty(r)){var i=[];"banner"===r&&(e[r].w&&e[r].h&&i.push([e[r].w,e[r].h]),Ae(e[r].format)&&e[r].format.forEach((function(e){return i.push([e.w,e.h])}))),0===i.length&&i.push("*"),i.forEach((function(i){var a=t.getFloor({currency:e.bidfloorcur,mediaType:r,size:i});if(ye(hd,"floor from floor module returned for mediatype:",r," and size:",i," is: currency",a.currency,"floor",a.floor),"object"===s(a)&&a.currency===e.bidfloorcur&&!isNaN(parseInt(a.floor))){var o=parseFloat(a.floor);ye(hd,"floor from floor module:",o,"previous floor value",n,"Min:",Math.min(o,n)),n=-1===n?o:Math.min(o,n),ye(hd,"new floor value:",n)}}))}})),e.bidfloor&&(ye(hd,"floor from floor module:",n,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor)),e.bidfloor=!isNaN(n)&&n>0?n:yd,ye(hd,"new impObj.bidfloor value:",e.bidfloor)}(a,e),a.hasOwnProperty(Fn)||a.hasOwnProperty(Nn)||a.hasOwnProperty(zn)?a:yd}(u);t&&f.imp.push(t)})),0!=f.imp.length){f.site.publisher.id=l.pubId.trim(),Ad=l.pubId.trim(),f.ext.wrapper={},f.ext.wrapper.profile=parseInt(l.profId)||yd,f.ext.wrapper.version=parseInt(l.verId)||yd,f.ext.wrapper.wiid=l.wiid||t.auctionId,f.ext.wrapper.wv="prebid_prebid_7.31.0",f.ext.wrapper.transactionId=l.transactionId,f.ext.wrapper.wp="pbjs";var h,b,w=t?un.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==w){if(f.ext.marketplace={},t&&1==w){var I=un.get(t.bidderCode,"allowedAlternateBidderCodes");Ae(I)?(I=I.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return!!e})).filter(Ge),Rd=I.includes("*")?Bd:[].concat(o(Rd),o(I))):Rd=Bd}f.ext.marketplace.allowedbidders=Rd.filter(Ge)}f.user.gender=l.gender?l.gender.trim():yd,f.user.geo={},f.user.geo.lat=Dd("lat",l.lat),f.user.geo.lon=Dd("lon",l.lon),f.user.yob=Dd("yob",l.yob),f.device.geo=f.user.geo,f.site.page=l.kadpageurl.trim()||f.site.page.trim(),f.site.domain=(h=f.site.page,(b=document.createElement("a")).href=h,b.hostname),"object"===s(k.getConfig("content"))&&(f.site.content=k.getConfig("content")),"object"===s(k.getConfig("device"))&&(f.device=Object.assign(f.device,k.getConfig("device"))),f.device.language=f.device.language&&f.device.language.split("-")[0],At(f,"source.tid",l.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(f.test=1),e[0].schain&&At(f,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(At(f,"user.ext.consent",t.gdprConsent.consentString),At(f,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&At(f,"regs.ext.us_privacy",t.uspConsent),!0===k.getConfig("coppa")&&At(f,"regs.coppa",1),function(e,t){var n=y(t,"0.userIdAsEids");Ae(n)&&n.length>0&&At(e,"user.eids",n)}(f,e);var x,C,O,T=t&&t.ortb2||{};if(T.site){var E=f.site,_=E.page,S=E.domain,A=E.ref;St(f,{site:T.site}),f.site.page=_,f.site.domain=S,f.site.ref=A}if(T.user&&St(f,{user:T.user}),T.bcat&&(m=m.concat(T.bcat)),null!==(n=T.ext)&&void 0!==n&&null!==(r=n.prebid)&&void 0!==r&&null!==(a=r.bidderparams)&&void 0!==a&&null!==(d=a[t.bidderCode])&&void 0!==d&&d.acat){var j=T.ext.prebid.bidderparams[t.bidderCode].acat;Wd(f,j)}else v.length&&Wd(f,v);return function(e,t){(t=t.filter((function(e){return"string"==typeof e||(we("PubMatic: bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){if(e.length>3)return n.indexOf(e)===t;we("PubMatic: bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&(we("PubMatic: bcat: Selected: ",t),e.bcat=t)}(f,m),null!=t&&t.timeout?f.tmax=t.timeout||k.getConfig("bidderTimeout"):f.tmax=null===(x=window)||void 0===x||null===(C=x.PWT)||void 0===C||null===(O=C.versionDetails)||void 0===O?void 0:O.timeout,f.ext.epoch=(new Date).getTime(),"object"===s(k.getConfig("app"))&&(f.app=k.getConfig("app"),f.app.publisher=f.site.publisher,f.app.ext=f.site.ext||yd,"object"!==s(f.app.content)&&(f.app.content=f.site.content||yd),delete f.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(f),bidderRequest:t}}},interpretResponse:function(e,t){var n=[],r=bd,i=JSON.parse(t.data),a=i.site&&i.site.ref?i.site.ref:"";try{e.body&&e.body.seatbid&&Ae(e.body.seatbid)&&(r=e.body.cur||r,e.body.seatbid.forEach((function(e){e.bid&&Ae(e.bid)&&e.bid.forEach((function(o){var s={requestId:o.impid,cpm:parseFloat((o.price||0).toFixed(2)),width:o.w,height:o.h,creativeId:o.crid||o.id,dealId:o.dealid,currency:r,netRevenue:!0,ttl:300,referrer:a,ad:o.adm,pm_seat:e.seat||null,pm_dspid:o.ext&&o.ext.dspid?o.ext.dspid:null,partnerImpId:o.id||""};i.imp&&i.imp.length>0&&i.imp.forEach((function(e){if(o.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=Sd[e.ext.bidtype];else{ye("PubMatic: bid.ext.bidtype does not exist, checking alternatively for mediaType");var n=e.adm,r="",i=new RegExp(/VAST\s+version/);if(n.indexOf('span class="PubAPIAd"')>=0)t.mediaType=Fn;else if(i.test(n))t.mediaType=zn;else try{(r=JSON.parse(n.replace(/\\/g,"")))&&r.native&&(t.mediaType=Nn)}catch(e){we("PubMatic: Error: Cannot parse native reponse for ad response: "+n)}}}(o,s),s.mediaType){case Fn:break;case zn:s.width=o.hasOwnProperty("w")?o.w:e.video.w,s.height=o.hasOwnProperty("h")?o.h:e.video.h,s.vastXml=o.adm,function(e,t){var n,r,i;if(t.bidderRequest&&t.bidderRequest.bids){for(var a=0;a<t.bidderRequest.bids.length;a++)t.bidderRequest.bids[a].bidId===e.requestId&&(n=t.bidderRequest.bids[a].params,r=t.bidderRequest.bids[a].mediaTypes[zn].context,i=t.bidderRequest.bids[a].adUnitCode);r&&"outstream"===r&&n&&n.outstreamAU&&i&&(e.rendererCode=n.outstreamAU,e.renderer=_d.newRenderer(e.rendererCode,i))}}(s,t),function(e,t,n){var r,i,a;if(null!=t&&null!==(r=t.ext)&&void 0!==r&&r.prebiddealpriority){var o=y(Ve(e.requestId,[n.bidderRequest]),"mediaTypes.video");if((null==o?void 0:o.context)==Mn){var s=(null==t||null===(i=t.ext)||void 0===i||null===(a=i.video)||void 0===a?void 0:a.duration)||(null==o?void 0:o.maxduration);e.video={context:Mn,durationSeconds:s,dealTier:t.ext.prebiddealpriority}}}}(s,o,t);break;case Nn:!function(e,t){if(t.native={},e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void we("PubMatic: Error: Cannot parse native reponse for ad response: "+t.adm)}if(n&&n.native&&n.native.assets&&n.native.assets.length>0){t.mediaType=Nn;for(var r=0,i=n.native.assets.length;r<i;r++)switch(n.native.assets[r].id){case Td.TITLE.ID:t.native.title=n.native.assets[r].title&&n.native.assets[r].title.text;break;case Td.IMAGE.ID:t.native.image={url:n.native.assets[r].img&&n.native.assets[r].img.url,height:n.native.assets[r].img&&n.native.assets[r].img.h,width:n.native.assets[r].img&&n.native.assets[r].img.w};break;case Td.ICON.ID:t.native.icon={url:n.native.assets[r].img&&n.native.assets[r].img.url,height:n.native.assets[r].img&&n.native.assets[r].img.h,width:n.native.assets[r].img&&n.native.assets[r].img.w};break;case Td.SPONSOREDBY.ID:case Td.BODY.ID:case Td.LIKES.ID:case Td.DOWNLOADS.ID:case Td.PRICE:case Td.SALEPRICE.ID:case Td.PHONE.ID:case Td.ADDRESS.ID:case Td.DESC2.ID:case Td.CTA.ID:case Td.RATING.ID:case Td.DISPLAYURL.ID:t.native[Pd[n.native.assets[r].id]]=n.native.assets[r].data&&n.native.assets[r].data.value}t.native.clickUrl=n.native.link&&n.native.link.url,t.native.clickTrackers=n.native.link&&n.native.link.clicktrackers||[],t.native.impressionTrackers=n.native.imptrackers||[],t.native.jstracker=n.native.jstracker||[],t.width||(t.width=0),t.height||(t.height=0)}}}(o,s)}})),o.ext&&o.ext.deal_channel&&(s.dealChannel=kd[o.ext.deal_channel]||null),s.meta={},o.ext&&o.ext.dspid&&(s.meta.networkId=o.ext.dspid),o.ext&&o.ext.advid&&(s.meta.buyerId=o.ext.advid),o.adomain&&o.adomain.length>0&&(s.meta.advertiserDomains=o.adomain,s.meta.clickUrl=o.adomain[0]),e.ext&&e.ext.buyid&&(s.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),o.ext&&o.ext.marketplace&&(s.bidderCode=o.ext.marketplace),n.push(s)}))})))}catch(e){Ie(e)}return n},getUserSyncs:function(e,t,n,r){var i=""+Ad;return n&&(i+="&gdpr="+(n.gdprApplies?1:0),i+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),r&&(i+="&us_privacy="+encodeURIComponent(r)),!0===k.getConfig("coppa")&&(i+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+i}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+i}]},transformBidParams:function(e,t,n,r){return Ld(e,n.bids[0],!0),wt({publisherId:"string",adSlot:"string"},e)}};pr(Kd),window.pbjs.installedModules.push("pubmaticBidAdapter");var Gd,Hd,Vd="iab",Jd=Vd,Xd=50,Qd=!1,$d={iab:function(e){var t,n=e.onSuccess,r=e.onError,i=(t={},{consentDataCallback:function(e,i){i&&e.uspString&&(t.usPrivacy=e.uspString),t.usPrivacy?tc(t,{onSuccess:n,onError:r}):r("Unable to get USP consent string.")}}),a={},o=function(){for(var e,t,n=window;;){try{if("function"==typeof n.__uspapi){t=n.__uspapi,e=n;break}}catch(e){}try{if(n.frames.__uspapiLocator){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}return{uspapiFrame:e,uspapiFunction:t}}(),s=o.uspapiFrame,d=o.uspapiFunction;if(!s)return r("USP CMP not found.");_e(d)?(ye("Detected USP CMP is directly accessible, calling it now..."),d("getUSPData",1,i.consentDataCallback),d("registerDeletion",1,ei.callDataDeletionRequest)):(ye("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),u("getUSPData",s,i.consentDataCallback),u("registerDeletion",s,ei.callDataDeletionRequest));var c=!1;function u(e,t,n){var r,i,o;c||(window.addEventListener("message",(function(e){var t=e&&e.data&&e.data.__uspapiReturn;t&&t.callId&&a.hasOwnProperty(t.callId)&&(a[t.callId](t.returnValue,t.success),delete a[t.callId])}),!1),c=!0),r=n,o={__uspapiCall:{command:e,version:1,callId:i=Math.random()+""}},a[i]=r,t.postMessage(o,"*")}},static:function(e){var t=e.onSuccess,n=e.onError;tc(Gd,{onSuccess:t,onError:n})}};function Zd(e){var t=null,n=!1;function r(r,i){if(null!=t&&clearTimeout(t),n=!0,Kr.setConsentData(r),null!=e){for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];e.apply(void 0,[i].concat(o))}}if($d[Jd]){var i={onSuccess:r,onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r.apply(void 0,[null,"".concat(e," Resuming auction without consent data as per consentManagement config.")].concat(n))}};$d[Jd](i),n||(0===Xd?tc(void 0,i):t=setTimeout(i.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),Xd))}else r(null,"USP framework (".concat(Jd,") is not a supported framework. Aborting consentManagement module and resuming auction."))}var ec=ur("usp",(function(e,t){var n=this;Qd||nc(),Zd((function(r){if(null!=r){for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];we.apply(void 0,[r].concat(a))}e.call(n,t)}))}));function tc(e,t){var n=t.onSuccess,r=t.onError;e&&e.usPrivacy?(function(e){e&&e.usPrivacy&&(Hd=e.usPrivacy)}(e),n(Hd)):r("USPAPI returned unexpected value during lookup process.",e)}function nc(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Qd||(ye("USPAPI consentManagement module has been activated".concat(e?"":" using default values (api: '".concat(Jd,"', timeout: ").concat(Xd,"ms)"))),Qd=!0,Kr.enable()),Zd()}k.getConfig("consentManagement",(function(e){return function(e){(e=e&&e.usp)&&"object"===s(e)||we("consentManagement.usp config not defined, using defaults"),e&&Se(e.cmpApi)?Jd=e.cmpApi:(Jd=Vd,ye("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat(Vd,")."))),e&&je(e.timeout)?Xd=e.timeout:(Xd=50,ye("consentManagement.usp config did not specify timeout. Using system default setting (".concat(50,")."))),"static"===Jd&&(Pe(e.consentData)&&Pe(e.consentData.getUSPData)?(e.consentData.getUSPData.uspString&&(Gd={usPrivacy:e.consentData.getUSPData.uspString}),Xd=0):Ie("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),nc(!0)}(e.consentManagement)})),on("requestBids").before(ec,50),Na.before((function(e,t){return e(t.then((function(e){var t=Kr.getConsentData();return t&&At(e,"regs.ext.us_privacy",t),e})))})),window.pbjs.installedModules.push("consentManagementUsp"),yo.processQueue()}()}();